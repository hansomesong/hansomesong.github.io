<!DOCTYPE html>












  


<html class="theme-next mist use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
























<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=7.1.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.1.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.1.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.1.0">


  <link rel="mask-icon" href="/images/logo.svg?v=7.1.0" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '7.1.0',
    sidebar: {"position":"right","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="2008年04月，SDN的概念以及 OpenFlow 被提出并被发表(CCR.Vol.38, issue 2) 2011年02月28日，release of OpenFlow 1.1 2011年03月，Open Networking Foundation 组织成立，推广SDN以及标准化 OpenFlow. OpenFlow进入快速发展阶段 2012年02月, release of OpenFlow">
<meta property="og:type" content="article">
<meta property="og:title" content="A brief history about Network Service Header">
<meta property="og:url" content="http://rennesong.com/2019/04/12/nsh-history-tuto/index.html">
<meta property="og:site_name" content="Rennesong&#39;s blog">
<meta property="og:description" content="2008年04月，SDN的概念以及 OpenFlow 被提出并被发表(CCR.Vol.38, issue 2) 2011年02月28日，release of OpenFlow 1.1 2011年03月，Open Networking Foundation 组织成立，推广SDN以及标准化 OpenFlow. OpenFlow进入快速发展阶段 2012年02月, release of OpenFlow">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2019-04-12T10:43:41.804Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="A brief history about Network Service Header">
<meta name="twitter:description" content="2008年04月，SDN的概念以及 OpenFlow 被提出并被发表(CCR.Vol.38, issue 2) 2011年02月28日，release of OpenFlow 1.1 2011年03月，Open Networking Foundation 组织成立，推广SDN以及标准化 OpenFlow. OpenFlow进入快速发展阶段 2012年02月, release of OpenFlow">



  <link rel="alternate" href="/atom.xml" title="Rennesong's blog" type="application/atom+xml">



  
  
  <link rel="canonical" href="http://rennesong.com/2019/04/12/nsh-history-tuto/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>A brief history about Network Service Header | Rennesong's blog</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript><!-- hexo-inject:begin --><!-- hexo-inject:end -->

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container sidebar-position-right page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Rennesong's blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">Blog my life from now on!</p>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
    
      
    

    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>关于</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>

      
      
    </ul>
  

  
    

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rennesong.com/2019/04/12/nsh-history-tuto/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="rennsong">
      <meta itemprop="description" content="Personal blog site, to note technique and life related articles">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Rennesong's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">A brief history about Network Service Header

              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-04-12 12:33:32 / 修改时间：12:43:41" itemprop="dateCreated datePublished" datetime="2019-04-12T12:33:32+02:00">2019-04-12</time>
            

            
              

              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>2008年04月，SDN的概念以及 OpenFlow 被提出并被发表(CCR.Vol.38, issue 2) 2011年02月28日，release of OpenFlow 1.1 2011年03月，Open Networking Foundation 组织成立，推广SDN以及标准化 OpenFlow. OpenFlow进入快速发展阶段 2012年02月, release of OpenFlow 1.2 2012年07月，SDN代表厂商Nicira(OVS主要开发者)被VMware收购，随后Google宣布成功在其全球10个IDC网络中部署SDN，这促使SDN引起业界的强烈关注。 2013年09月，LISP and NSH in Open vSwitch <a href="https://fr.slideshare.net/mestery/lisp-and-nsh-in-open-vswitch?next_slideshow=1" target="_blank" rel="noopener">source</a> 2013年10月，ONF 推出 OpenFlow 1.4 2014年05月，<a href="https://wiki.opendaylight.org/view/Service_Function_Chaining:Main" target="_blank" rel="noopener">ODL SFC project</a> 创立 2014年11月，Gary Kinghorn (思科) <a href="https://blogs.cisco.com/datacenter/nsh" target="_blank" rel="noopener">思科博客中</a>介绍 NSH 功能了。思科在发展NSH时，吸取了推出的 vPath 功能的一些经验教训并且推动了NSH的标准化。 2015年03月，release of OpenFlow 1.5.1 specification (at the time of this writing, this is the most recent OpenFlow version) 2015年03月，Paul Quinn (思科) 发布了第一个关于 NSH 的 dfart: draft-ietf-sfc-nsh-00.txt 2015年XX月：P.Quinn et al. RFC7498 “Problem statement for service function chaining” 2015年10月，IETF 发布了关于 SFC architecture 的 RFC7665 问题：RFC7655 要求NSH feature了么？这个链接给出了答案：The NSH protocol is used as an SFC encapsulation which is required for the support of the Service Function Chaining (SFC) Architecture as it defined in RFC7665. https://specs.openstack.org/openstack/openstack-ansible-specs/specs/pike/ovs-nsh.html RFC7665 lacks the definition of an encapsulation scheme (proposed by RFC8300). 2015年10月，Intel 的程序员在 OpenDaylight 社区讨论关于 <a href="https://lists.opendaylight.org/pipermail/sfc-dev/2015-October/002159.html" target="_blank" rel="noopener">NSH push/pop for Openflow</a> 2015年11月，OVS2015 上关于 <a href="https://www.youtube.com/watch?v=65kzpG6494s" target="_blank" rel="noopener">Network Service Headers: Additions to OVS to support SFC报告</a> 2016年03月，Ryo Nakamura (东京大学) 开源了其对于 NSH 实验性质的 Linux<a href="https://github.com/upa/nshkmod" target="_blank" rel="noopener">内核实现</a>。该实现只在 Ubuntu 14.03(kernel version 3.19.0-25 generic) 环境下测试过。 2016年06月，有证据表明 Intel 的工程师已经在做支持 NSH 的 patch 了：https://patchwork.ozlabs.org/patch/630753/ 2016年08月，有博文之处 ODL SFC 项目已经合并到 OPNFV 的 Brahmaputra 版本中 <a href="http://www.qingpingshan.com/m/view.php?aid=123815" target="_blank" rel="noopener">source</a> 2016年09月，IETF 发布了关于 NSH 的 draft 2016年XX月，文章作者提到 ODL SFC project adopts and implements the IETF SFC architecture (RFC7655),&lt;<an implementation of hierarchical service function chaining using opendaylight platform>&gt; 该文章采用的是 OpenFlow 1.4 看来不是非 OpenFlow 1.5不可啊 2017年04月，有博主发了<a href="https://segmentfault.com/a/1190000009084147" target="_blank" rel="noopener">帖子</a> ，记录了如何替换mininet自带的OVS版本 2017年XX月，该文章用 Mininet(openflow 1.3.4) + 定制过的 OpenDaylight 做了关于SFC (基于NSH) 的仿真http://orbit.dtu.dk/files/132152942/OFC17_SPN_20161011_1000_Final.pdf 要是属实的话，说明 openflow1.3.4 (2014年3月就发布了)支持了 NSH？mininet也是支持NSH？只是 OpenDaylight controller 不支持 NSH？ 2017年03月，目前 networking-sfc 项目中的基于ovs的sfc实现还是用的mpls, NSH 可能要 Pike 版本才能支持。[source: https://blog.csdn.net/bc_vnetwork/article/details/65630475] 2017年04月，有博客博主发表博文，支出当前 NSH 并不被主流 OVS 支持 但是有专门针对 NSH 的 patch. 作者同时指出 NF 支持 NSH feature 对于NSH的采用来说至关重要 而且 SFC proxy的实现也找不到 ODL社区邮件 mailing list 里有讨论过 作者还提到是存在 NSH python tools 的，管用，但是性能么，呵呵哒。https://bart.vanbrabant.eu/blog/2017/04/06/service-chaining-with-nsh-and-open-vswitch/ 2017年06月，OpenStack社区文档也讨论了 OVS with NSH support. 该文档中明确指出：The Openvswitch currently doesn’t support the NSH protocol. So the only way to add NSH support to Open vSwitch is through <a href="https://github.com/yyang13/ovs_nsh_patches" target="_blank" rel="noopener">Yi Yang’s patches</a>. 所以如果用户选择了支持NSH的switch的话，specific repo应该被选择 该任务被委派给了 Dimitrios Markou。 https://specs.openstack.org/openstack/openstack-ansible-specs/specs/pike/ovs-nsh.html 2017年10月，前Intel工程师Yi Yang最后一次提交其关于 <a href="patch.%20https://github.com/yyang13/ovs_nsh_patches">nsh support patch</a> 这是针对OVS 2.6.1 版本的 OVS实现做的 2017年11月，Zoltan Balogh 以及 Yi YANG 在OVS17大会上做了 NSH-based Service function chaining with OVS using packet-type aware pipeline 的<a href="https://www.youtube.com/watch?v=RrS11lJmK3Y" target="_blank" rel="noopener">讲座</a>. 该talk中提到了之前网上存在不少针对 NSH的patch, 但是这些patch要么不够generic要么违背了OVS的一些设计原则，总之他们需要做开发 在视频5：45秒出，Encap/Decap for NSH is implemented in OVS 2.8 2017年12月，packet 出版了一本书关于 ODLSFC 的，该书中有关于<code>sfc103 demo</code>的详细安装手册！ https://github.com/hansomesong/OpenDaylight-Cookbook 2018年01月，NSH 正式以 IETF <a href="https://datatracker.ietf.org/doc/rfc8300/" target="_blank" rel="noopener">RFC8300</a> 文档发表 . RFC8300 propose an encapsulation scheme which is not solved by RFC7665 2018年05月，OVS mailinglist 讨论过 OVS 2.9只有和 ODL fluorine 兼容 如果使用fluorine之前的ODL版本，只能用 OVS 2.6.1 patch 版本 https://mail.openvswitch.org/pipermail/ovs-discuss/2018-May/046790.html 2018年08月，Dimitrios Markou 在其PPA中上传一个 OVS package 2.9.2 我怀疑是支持 NSH的 2018年08月，OpenDayLight Flurione 发布 相比于之前的版本 针对OVS 2.9.2 有良好支持 跟过去对NSH的支持有较大改变。 2018年12月，Xiaofan Chen(Sangfor) and Yi Yang (Intel) 在OVS18上做了报告：<a href="https://www.youtube.com/watch?v=HTn4pOgnny0&amp;t=0s&amp;list=PLaJlRa-xItwCzuAL3mP6n02vmXab4Bwu-&amp;index=25" target="_blank" rel="noopener">Sangfor Cloud Security Pool</a>, The First-ever NSH Use Case 作者实现了SFC proxy 并且如果多个SF在同一个Host上，那么NSH encap/decap 并不是必须的 作者还修改了 ONOS代码</an></p>
<p>2018年01月，OpenStack All OpenStack Networking services and OpenStack Compute instances connect to a virtual network via ports making it possible to create a traffic steering model for service chaining using only ports. Including these ports in a port chain enables steering of traffic through one or more instances providing service functions. (https://docs.openstack.org/newton/networking-guide/config-sfc.html)</p>

      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/04/12/secsfc-impl-notes/" rel="next" title="secsfc-impl-notes">
                <i class="fa fa-chevron-left"></i> secsfc-impl-notes
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/04/15/identity-based-encryption/" rel="prev" title="identity-based-encryption">
                identity-based-encryption <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">rennsong</p>
              <div class="site-description motion-element" itemprop="description">Personal blog site, to note technique and life related articles</div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">42</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                      <a href="/categories/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">14</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">19</span>
                    <span class="site-state-item-name">标签</span>
                  
                </div>
              
            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/hansomesong" title="GitHub &rarr; https://github.com/hansomesong" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
            </div>
          

          

          
          

          
            
          
          

        </div>
      </div>

      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">rennsong</span>

  

  
</div>


  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a> v7.1.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/utils.js?v=7.1.0"></script>

  <script src="/js/motion.js?v=7.1.0"></script>



  
  


  <script src="/js/schemes/muse.js?v=7.1.0"></script>




  
  <script src="/js/scrollspy.js?v=7.1.0"></script>
<script src="/js/post-details.js?v=7.1.0"></script>



  


  <script src="/js/next-boot.js?v=7.1.0"></script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({"tex2jax":{"inlineMath":[["$","$"],["\\(","\\)"]],"skipTags":["script","noscript","style","textarea","pre","code"],"processEscapes":true},"TeX":{"equationNumbers":{"autoNumber":"AMS"}}});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->


  

  

  

  


  


  




  

  

  
  

  
  

  


  

  

  

  

  

  

  

  

  

  

  

</body>
</html>
