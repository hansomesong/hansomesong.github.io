<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"rennesong.com","root":"/","scheme":"Mist","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="l2switch is currently not being maintained by anyone and thus did not participate in the Fluorine release cycle. It needs version bumps and code changes to conform with upstream changes in yangtools,">
<meta property="og:type" content="article">
<meta property="og:title" content="odl-l2switch-adaption">
<meta property="og:url" content="http://rennesong.com/2019/07/08/odl-l2switch-adaption/index.html">
<meta property="og:site_name" content="Rennesong&#39;s blog">
<meta property="og:description" content="l2switch is currently not being maintained by anyone and thus did not participate in the Fluorine release cycle. It needs version bumps and code changes to conform with upstream changes in yangtools,">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2019-07-08T15:46:13.000Z">
<meta property="article:modified_time" content="2019-07-11T20:26:37.871Z">
<meta property="article:author" content="rennsong">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://rennesong.com/2019/07/08/odl-l2switch-adaption/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>odl-l2switch-adaption | Rennesong's blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Rennesong's blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Blog my life from now on!</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://rennesong.com/2019/07/08/odl-l2switch-adaption/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="rennsong">
      <meta itemprop="description" content="Personal blog site, to note technique and life related articles">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Rennesong's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          odl-l2switch-adaption
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-07-08 23:46:13" itemprop="dateCreated datePublished" datetime="2019-07-08T23:46:13+08:00">2019-07-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-07-12 04:26:37" itemprop="dateModified" datetime="2019-07-12T04:26:37+08:00">2019-07-12</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p><code>l2switch</code> is currently not being maintained by anyone and thus did not participate in the Fluorine release cycle. It needs version bumps and code changes to conform with upstream changes in <code>yangtools</code>, <code>mdsal</code>, etc. For the compile errors above, <code>getAugmentation</code> is now <code>augmentation</code> and <code>setKey</code> is now <code>withKey</code>.</p>
<p>These upstream changes were made in Fluorine along with others. This was all documented on the ODL mailing lists and TSC JIRA items during the Fluorine release cycle. Any contributions to reboot the project and get it building again and maintain it going forward would be welcomed by the ODL community.</p>
<p>可以参考的改进</p>
<h1 id="常见的类以及所属包以及路径">常见的类以及所属包以及路径</h1>
<p>RpcResult org.opendaylight.yangtools openflow.action org.opendaylight.openflowplugin openflow.inventory =&gt; org.opendaylight.msdal org.opendaylight.yang.gen.v1.urn.ietf.params.xml.ns.yang.ietf.inet.types.rev130715.IpAddress =&gt; org.opendaylight.msdal openflow.inventory.rev130819.node.NodeConnector =&gt; org.opendaylight.controller.msdal opendaylight.packet.service =&gt; org.opendaylight.openflowplugin opendaylight.arp.packet.* =&gt; org.opendaylight.l2switch</p>
<h1 id="查看-odl-javadoc">查看 ODL Javadoc</h1>
<p>https://nexus.opendaylight.org/content/repositories/public/org/opendaylight/l2switch/packethandler/packethandler-model/0.7.4/ 比如bundle <code>packethandler-model</code> 的 javadoc 就可以通过这里查看</p>
<p>https://javadocs.opendaylight.org/org.opendaylight.mdsal/fluorine/ 这里也可以查，比如<code>MD-SAL</code>所有的API都在这里</p>
<h1 id="org.opendaylight.yang.gen.v1.urn.opendaylight.inventory.rev130819.node.nodeconnector">org.opendaylight.yang.gen.v1.urn.opendaylight.inventory.rev130819.node.NodeConnector</h1>
<p>getKey()变成了key() setKey()变成了withKey() getAugmentation 变成了 augmentation()</p>
<h1 id="bundle-arphandler-impl-编译失败">Bundle <code>arphandler-impl</code> 编译失败</h1>
<h2 id="错误信息">错误信息</h2>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.7.0:compile (default-compile) on project addresstracker-impl: Compilation failure: Compilation failure:</span><br><span class="line">[ERROR] &#x2F;home&#x2F;qsong&#x2F;Documents&#x2F;sfc-patch&#x2F;sfc-l2switch&#x2F;addresstracker&#x2F;implementation&#x2F;src&#x2F;main&#x2F;java&#x2F;org&#x2F;opendaylight&#x2F;l2switch&#x2F;addresstracker&#x2F;addressobserver&#x2F;AddressObserverUsingArp.java:[60,17] no suitable constructor found for IpAddress(char[])</span><br><span class="line">[ERROR]     constructor org.opendaylight.yang.gen.v1.urn.ietf.params.xml.ns.yang.ietf.inet.types.rev130715.IpAddress.IpAddress(org.opendaylight.yang.gen.v1.urn.ietf.params.xml.ns.yang.ietf.inet.types.rev130715.Ipv4Address) is not applicable</span><br><span class="line">[ERROR]       (argument mismatch; char[] cannot be converted to org.opendaylight.yang.gen.v1.urn.ietf.params.xml.ns.yang.ietf.inet.types.rev130715.Ipv4Address)</span><br><span class="line">[ERROR]     constructor org.opendaylight.yang.gen.v1.urn.ietf.params.xml.ns.yang.ietf.inet.types.rev130715.IpAddress.IpAddress(org.opendaylight.yang.gen.v1.urn.ietf.params.xml.ns.yang.ietf.inet.types.rev130715.Ipv6Address) is not applicable</span><br><span class="line">[ERROR]       (argument mismatch; char[] cannot be converted to org.opendaylight.yang.gen.v1.urn.ietf.params.xml.ns.yang.ietf.inet.types.rev130715.Ipv6Address)</span><br><span class="line">[ERROR]     constructor org.opendaylight.yang.gen.v1.urn.ietf.params.xml.ns.yang.ietf.inet.types.rev130715.IpAddress.IpAddress(org.opendaylight.yang.gen.v1.urn.ietf.params.xml.ns.yang.ietf.inet.types.rev130715.IpAddress) is not applicable</span><br><span class="line">[ERROR]       (argument mismatch; char[] cannot be converted to org.opendaylight.yang.gen.v1.urn.ietf.params.xml.ns.yang.ietf.inet.types.rev130715.IpAddress)</span><br><span class="line">[ERROR] &#x2F;home&#x2F;qsong&#x2F;Documents&#x2F;sfc-patch&#x2F;sfc-l2switch&#x2F;addresstracker&#x2F;implementation&#x2F;src&#x2F;main&#x2F;java&#x2F;org&#x2F;opendaylight&#x2F;l2switch&#x2F;addresstracker&#x2F;addressobserver&#x2F;AddressObservationWriter.java:[127,21] cannot find symbol</span><br><span class="line">[ERROR]   symbol:   method getAugmentation(java.lang.Class&lt;org.opendaylight.yang.gen.v1.urn.opendaylight.address.tracker.rev140617.AddressCapableNodeConnector&gt;)</span><br><span class="line">[ERROR]   location: variable nc of type org.opendaylight.yang.gen.v1.urn.opendaylight.inventory.rev130819.node.NodeConnector</span><br><span class="line">[ERROR] &#x2F;home&#x2F;qsong&#x2F;Documents&#x2F;sfc-patch&#x2F;sfc-l2switch&#x2F;addresstracker&#x2F;implementation&#x2F;src&#x2F;main&#x2F;java&#x2F;org&#x2F;opendaylight&#x2F;l2switch&#x2F;addresstracker&#x2F;addressobserver&#x2F;AddressObservationWriter.java:[138,61] cannot find symbol</span><br><span class="line">[ERROR]   symbol:   method getKey()</span><br><span class="line">[ERROR]   location: interface org.opendaylight.yang.gen.v1.urn.opendaylight.address.tracker.rev140617.address.node.connector.Addresses</span><br><span class="line">[ERROR] &#x2F;home&#x2F;qsong&#x2F;Documents&#x2F;sfc-patch&#x2F;sfc-l2switch&#x2F;addresstracker&#x2F;implementation&#x2F;src&#x2F;main&#x2F;java&#x2F;org&#x2F;opendaylight&#x2F;l2switch&#x2F;addresstracker&#x2F;addressobserver&#x2F;AddressObservationWriter.java:[152,31] cannot find symbol</span><br><span class="line">[ERROR]   symbol:   method getKey()</span><br><span class="line">[ERROR]   location: variable addressBuilder of type org.opendaylight.yang.gen.v1.urn.opendaylight.address.tracker.rev140617.address.node.connector.AddressesBuilder</span><br><span class="line">[ERROR] &#x2F;home&#x2F;qsong&#x2F;Documents&#x2F;sfc-patch&#x2F;sfc-l2switch&#x2F;addresstracker&#x2F;implementation&#x2F;src&#x2F;main&#x2F;java&#x2F;org&#x2F;opendaylight&#x2F;l2switch&#x2F;addresstracker&#x2F;addressobserver&#x2F;AddressObservationWriter.java:[153,31] cannot find symbol</span><br><span class="line">[ERROR]   symbol:   method setKey(org.opendaylight.yang.gen.v1.urn.opendaylight.address.tracker.rev140617.address.node.connector.AddressesKey)</span><br><span class="line">[ERROR]   location: variable addressBuilder of type org.opendaylight.yang.gen.v1.urn.opendaylight.address.tracker.rev140617.address.node.connector.AddressesBuilder</span><br><span class="line">[ERROR] &#x2F;home&#x2F;qsong&#x2F;Documents&#x2F;sfc-patch&#x2F;sfc-l2switch&#x2F;addresstracker&#x2F;implementation&#x2F;src&#x2F;main&#x2F;java&#x2F;org&#x2F;opendaylight&#x2F;l2switch&#x2F;addresstracker&#x2F;addressobserver&#x2F;AddressObserverUsingIpv4.java:[62,21] no suitable constructor found for IpAddress(char[])</span><br><span class="line">[ERROR]     constructor org.opendaylight.yang.gen.v1.urn.ietf.params.xml.ns.yang.ietf.inet.types.rev130715.IpAddress.IpAddress(org.opendaylight.yang.gen.v1.urn.ietf.params.xml.ns.yang.ietf.inet.types.rev130715.Ipv4Address) is not applicable</span><br><span class="line">[ERROR]       (argument mismatch; char[] cannot be converted to org.opendaylight.yang.gen.v1.urn.ietf.params.xml.ns.yang.ietf.inet.types.rev130715.Ipv4Address)</span><br><span class="line">[ERROR]     constructor org.opendaylight.yang.gen.v1.urn.ietf.params.xml.ns.yang.ietf.inet.types.rev130715.IpAddress.IpAddress(org.opendaylight.yang.gen.v1.urn.ietf.params.xml.ns.yang.ietf.inet.types.rev130715.Ipv6Address) is not applicable</span><br><span class="line">[ERROR]       (argument mismatch; char[] cannot be converted to org.opendaylight.yang.gen.v1.urn.ietf.params.xml.ns.yang.ietf.inet.types.rev130715.Ipv6Address)</span><br><span class="line">[ERROR]     constructor org.opendaylight.yang.gen.v1.urn.ietf.params.xml.ns.yang.ietf.inet.types.rev130715.IpAddress.IpAddress(org.opendaylight.yang.gen.v1.urn.ietf.params.xml.ns.yang.ietf.inet.types.rev130715.IpAddress) is not applicable</span><br><span class="line">[ERROR]       (argument mismatch; char[] cannot be converted to org.opendaylight.yang.gen.v1.urn.ietf.params.xml.ns.yang.ietf.inet.types.rev130715.IpAddress)</span><br><span class="line">[ERROR] &#x2F;home&#x2F;qsong&#x2F;Documents&#x2F;sfc-patch&#x2F;sfc-l2switch&#x2F;addresstracker&#x2F;implementation&#x2F;src&#x2F;main&#x2F;java&#x2F;org&#x2F;opendaylight&#x2F;l2switch&#x2F;addresstracker&#x2F;addressobserver&#x2F;AddressObserverUsingIpv6.java:[62,21] no suitable constructor found for IpAddress(char[])</span><br><span class="line">[ERROR]     constructor org.opendaylight.yang.gen.v1.urn.ietf.params.xml.ns.yang.ietf.inet.types.rev130715.IpAddress.IpAddress(org.opendaylight.yang.gen.v1.urn.ietf.params.xml.ns.yang.ietf.inet.types.rev130715.Ipv4Address) is not applicable</span><br><span class="line">[ERROR]       (argument mismatch; char[] cannot be converted to org.opendaylight.yang.gen.v1.urn.ietf.params.xml.ns.yang.ietf.inet.types.rev130715.Ipv4Address)</span><br><span class="line">[ERROR]     constructor org.opendaylight.yang.gen.v1.urn.ietf.params.xml.ns.yang.ietf.inet.types.rev130715.IpAddress.IpAddress(org.opendaylight.yang.gen.v1.urn.ietf.params.xml.ns.yang.ietf.inet.types.rev130715.Ipv6Address) is not applicable</span><br><span class="line">[ERROR]       (argument mismatch; char[] cannot be converted to org.opendaylight.yang.gen.v1.urn.ietf.params.xml.ns.yang.ietf.inet.types.rev130715.Ipv6Address)</span><br><span class="line">[ERROR]     constructor org.opendaylight.yang.gen.v1.urn.ietf.params.xml.ns.yang.ietf.inet.types.rev130715.IpAddress.IpAddress(org.opendaylight.yang.gen.v1.urn.ietf.params.xml.ns.yang.ietf.inet.types.rev130715.IpAddress) is not applicable</span><br><span class="line">[ERROR]       (argument mismatch; char[] cannot be converted to org.opendaylight.yang.gen.v1.urn.ietf.params.xml.ns.yang.ietf.inet.types.rev130715.IpAddress)</span><br><span class="line">[ERROR] -&gt; [Help 1]</span><br></pre></td></tr></table></figure>
<h2 id="原因-在fluorine中-org.opendaylight.msdal-中定义的-ipaddress-删去了构造体-ipaddresschar-ipaddress方法org.opendaylight.msdal-中引入了-ipaddressbuilder-该方法支持从-string直接构造ipaddress对象">原因: 在fluorine中, org.opendaylight.msdal 中定义的 IpAddress 删去了构造体 IpAddress(Char<a href="#section-1"></a> ipAddress)方法。org.opendaylight.msdal 中引入了 IpAddressBuilder 该方法支持从 String直接构造IpAddress对象</h2>
<p>http://www.gzhshoulu.wang/article/1549928 源码解读ODL的MAC地址学习(二)</p>
<p>修改完上述错误之后，还有下面的问题要解决: <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.7.0:compile (default-compile) on project addresstracker-impl: Compilation failure: Compilation failure:</span><br><span class="line">[ERROR] &#x2F;home&#x2F;qsong&#x2F;Documents&#x2F;sfc-patch&#x2F;sfc-l2switch&#x2F;addresstracker&#x2F;implementation&#x2F;src&#x2F;main&#x2F;java&#x2F;org&#x2F;opendaylight&#x2F;l2switch&#x2F;addresstracker&#x2F;addressobserver&#x2F;AddressObservationWriter.java:[138,61] cannot find symbol</span><br><span class="line">[ERROR]   symbol:   method getKey()</span><br><span class="line">[ERROR]   location: interface org.opendaylight.yang.gen.v1.urn.opendaylight.address.tracker.rev140617.address.node.connector.Addresses</span><br><span class="line">[ERROR] &#x2F;home&#x2F;qsong&#x2F;Documents&#x2F;sfc-patch&#x2F;sfc-l2switch&#x2F;addresstracker&#x2F;implementation&#x2F;src&#x2F;main&#x2F;java&#x2F;org&#x2F;opendaylight&#x2F;l2switch&#x2F;addresstracker&#x2F;addressobserver&#x2F;AddressObservationWriter.java:[152,31] cannot find symbol</span><br><span class="line">[ERROR]   symbol:   method getKey()</span><br><span class="line">[ERROR]   location: variable addressBuilder of type org.opendaylight.yang.gen.v1.urn.opendaylight.address.tracker.rev140617.address.node.connector.AddressesBuilder</span><br><span class="line">[ERROR] &#x2F;home&#x2F;qsong&#x2F;Documents&#x2F;sfc-patch&#x2F;sfc-l2switch&#x2F;addresstracker&#x2F;implementation&#x2F;src&#x2F;main&#x2F;java&#x2F;org&#x2F;opendaylight&#x2F;l2switch&#x2F;addresstracker&#x2F;addressobserver&#x2F;AddressObservationWriter.java:[153,31] cannot find symbol</span><br><span class="line">[ERROR]   symbol:   method setKey(org.opendaylight.yang.gen.v1.urn.opendaylight.address.tracker.rev140617.address.node.connector.AddressesKey)</span><br><span class="line">[ERROR]   location: variable addressBuilder of type org.opendaylight.yang.gen.v1.urn.opendaylight.address.tracker.rev140617.address.node.connector.AddressesBuilder</span><br></pre></td></tr></table></figure> IntelliJ IDEA 真的是个神器。居然可以查看<code>.class</code>后缀的文件。通过查看<code>addresstracker</code>之下编译生成的<code>target/classes</code>中<code>Address.class</code>以及<code>AddressBuilder.class</code>文件 , 确认Fluorine之前版本之中的<code>getKey()</code>以及<code>setKey()</code>方法相应地被<code>key()</code>和<code>withKey()</code>替换了。</p>
<h1 id="编译-bundle-hosttracker-报错">编译 Bundle <code>hosttracker</code> 报错</h1>
<h2 id="报错信息">报错信息</h2>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.7.0:compile (default-compile) on project hosttracker-impl: Compilation failure: Compilation failure:</span><br><span class="line">[ERROR] &#x2F;home&#x2F;qsong&#x2F;Documents&#x2F;sfc-patch&#x2F;sfc-l2switch&#x2F;hosttracker&#x2F;implementation&#x2F;src&#x2F;main&#x2F;java&#x2F;org&#x2F;opendaylight&#x2F;l2switch&#x2F;hosttracker&#x2F;plugin&#x2F;inventory&#x2F;Host.java:[47,33] cannot find symbol</span><br><span class="line">[ERROR]   symbol:   method getAugmentation(java.lang.Class&lt;org.opendaylight.yang.gen.v1.urn.opendaylight.host.tracker.rev140624.HostNode&gt;)</span><br><span class="line">[ERROR]   location: variable node of type org.opendaylight.yang.gen.v1.urn.tbd.params.xml.ns.yang.network.topology.rev131021.network.topology.topology.Node</span><br><span class="line">[ERROR] &#x2F;home&#x2F;qsong&#x2F;Documents&#x2F;sfc-patch&#x2F;sfc-l2switch&#x2F;hosttracker&#x2F;implementation&#x2F;src&#x2F;main&#x2F;java&#x2F;org&#x2F;opendaylight&#x2F;l2switch&#x2F;hosttracker&#x2F;plugin&#x2F;inventory&#x2F;Host.java:[108,13] cannot find symbol</span><br><span class="line">[ERROR]   symbol:   method setKey(org.opendaylight.yang.gen.v1.urn.tbd.params.xml.ns.yang.network.topology.rev131021.network.topology.topology.NodeKey)</span><br><span class="line">[ERROR]   location: variable node of type org.opendaylight.yang.gen.v1.urn.tbd.params.xml.ns.yang.network.topology.rev131021.network.topology.topology.NodeBuilder</span><br><span class="line">[ERROR] &#x2F;home&#x2F;qsong&#x2F;Documents&#x2F;sfc-patch&#x2F;sfc-l2switch&#x2F;hosttracker&#x2F;implementation&#x2F;src&#x2F;main&#x2F;java&#x2F;org&#x2F;opendaylight&#x2F;l2switch&#x2F;hosttracker&#x2F;plugin&#x2F;inventory&#x2F;Host.java:[229,41] cannot find symbol</span><br><span class="line">[ERROR]   symbol:   method getKey()</span><br><span class="line">[ERROR]   location: variable apb of type org.opendaylight.yang.gen.v1.urn.opendaylight.host.tracker.rev140624.host.AttachmentPointsBuilder</span><br><span class="line">[ERROR] &#x2F;home&#x2F;qsong&#x2F;Documents&#x2F;sfc-patch&#x2F;sfc-l2switch&#x2F;hosttracker&#x2F;implementation&#x2F;src&#x2F;main&#x2F;java&#x2F;org&#x2F;opendaylight&#x2F;l2switch&#x2F;hosttracker&#x2F;plugin&#x2F;inventory&#x2F;Host.java:[229,21] cannot find symbol</span><br><span class="line">[ERROR]   symbol:   method getKey()</span><br><span class="line">[ERROR]   location: variable apbi of type org.opendaylight.yang.gen.v1.urn.opendaylight.host.tracker.rev140624.host.AttachmentPointsBuilder</span><br><span class="line">[ERROR] &#x2F;home&#x2F;qsong&#x2F;Documents&#x2F;sfc-patch&#x2F;sfc-l2switch&#x2F;hosttracker&#x2F;implementation&#x2F;src&#x2F;main&#x2F;java&#x2F;org&#x2F;opendaylight&#x2F;l2switch&#x2F;hosttracker&#x2F;plugin&#x2F;internal&#x2F;ConcurrentClusterAwareHostHashMap.java:[132,86] cannot find symbol</span><br><span class="line">[ERROR]   symbol:   method getKey()</span><br><span class="line">[ERROR]   location: variable hostNode of type org.opendaylight.yang.gen.v1.urn.tbd.params.xml.ns.yang.network.topology.rev131021.network.topology.topology.Node</span><br><span class="line">[ERROR] &#x2F;home&#x2F;qsong&#x2F;Documents&#x2F;sfc-patch&#x2F;sfc-l2switch&#x2F;hosttracker&#x2F;implementation&#x2F;src&#x2F;main&#x2F;java&#x2F;org&#x2F;opendaylight&#x2F;l2switch&#x2F;hosttracker&#x2F;plugin&#x2F;internal&#x2F;ConcurrentClusterAwareHostHashMap.java:[150,90] cannot find symbol</span><br><span class="line">[ERROR]   symbol:   method getKey()</span><br><span class="line">[ERROR]   location: variable hostNode of type org.opendaylight.yang.gen.v1.urn.tbd.params.xml.ns.yang.network.topology.rev131021.network.topology.topology.Node</span><br><span class="line">[ERROR] &#x2F;home&#x2F;qsong&#x2F;Documents&#x2F;sfc-patch&#x2F;sfc-l2switch&#x2F;hosttracker&#x2F;implementation&#x2F;src&#x2F;main&#x2F;java&#x2F;org&#x2F;opendaylight&#x2F;l2switch&#x2F;hosttracker&#x2F;plugin&#x2F;internal&#x2F;ConcurrentClusterAwareHostHashMap.java:[170,86] cannot find symbol</span><br><span class="line">[ERROR]   symbol:   method getKey()</span><br><span class="line">[ERROR]   location: variable hostNode of type org.opendaylight.yang.gen.v1.urn.tbd.params.xml.ns.yang.network.topology.rev131021.network.topology.topology.Node</span><br><span class="line">[ERROR] &#x2F;home&#x2F;qsong&#x2F;Documents&#x2F;sfc-patch&#x2F;sfc-l2switch&#x2F;hosttracker&#x2F;implementation&#x2F;src&#x2F;main&#x2F;java&#x2F;org&#x2F;opendaylight&#x2F;l2switch&#x2F;hosttracker&#x2F;plugin&#x2F;internal&#x2F;ConcurrentClusterAwareHostHashMap.java:[189,83] cannot find symbol</span><br><span class="line">[ERROR]   symbol:   method getKey()</span><br><span class="line">[ERROR]   location: variable hostNode of type org.opendaylight.yang.gen.v1.urn.tbd.params.xml.ns.yang.network.topology.rev131021.network.topology.topology.Node</span><br><span class="line">[ERROR] &#x2F;home&#x2F;qsong&#x2F;Documents&#x2F;sfc-patch&#x2F;sfc-l2switch&#x2F;hosttracker&#x2F;implementation&#x2F;src&#x2F;main&#x2F;java&#x2F;org&#x2F;opendaylight&#x2F;l2switch&#x2F;hosttracker&#x2F;plugin&#x2F;internal&#x2F;HostTrackerImpl.java:[200,37] cannot find symbol</span><br><span class="line">[ERROR]   symbol:   method getAugmentation(java.lang.Class&lt;org.opendaylight.yang.gen.v1.urn.opendaylight.host.tracker.rev140624.HostNode&gt;)</span><br><span class="line">[ERROR]   location: variable node of type org.opendaylight.yang.gen.v1.urn.tbd.params.xml.ns.yang.network.topology.rev131021.network.topology.topology.Node</span><br><span class="line">[ERROR] &#x2F;home&#x2F;qsong&#x2F;Documents&#x2F;sfc-patch&#x2F;sfc-l2switch&#x2F;hosttracker&#x2F;implementation&#x2F;src&#x2F;main&#x2F;java&#x2F;org&#x2F;opendaylight&#x2F;l2switch&#x2F;hosttracker&#x2F;plugin&#x2F;internal&#x2F;HostTrackerImpl.java:[286,43] cannot find symbol</span><br><span class="line">[ERROR]   symbol:   method getKey()</span><br><span class="line">[ERROR]   location: variable nodeConnector of type org.opendaylight.yang.gen.v1.urn.opendaylight.inventory.rev130819.node.NodeConnector</span><br><span class="line">[ERROR] &#x2F;home&#x2F;qsong&#x2F;Documents&#x2F;sfc-patch&#x2F;sfc-l2switch&#x2F;hosttracker&#x2F;implementation&#x2F;src&#x2F;main&#x2F;java&#x2F;org&#x2F;opendaylight&#x2F;l2switch&#x2F;hosttracker&#x2F;plugin&#x2F;internal&#x2F;HostTrackerImpl.java:[356,79] cannot find symbol</span><br><span class="line">[ERROR]   symbol:   method getKey()</span><br><span class="line">[ERROR]   location: variable l of type org.opendaylight.yang.gen.v1.urn.tbd.params.xml.ns.yang.network.topology.rev131021.network.topology.topology.Link</span><br><span class="line">[ERROR] &#x2F;home&#x2F;qsong&#x2F;Documents&#x2F;sfc-patch&#x2F;sfc-l2switch&#x2F;hosttracker&#x2F;implementation&#x2F;src&#x2F;main&#x2F;java&#x2F;org&#x2F;opendaylight&#x2F;l2switch&#x2F;hosttracker&#x2F;plugin&#x2F;internal&#x2F;HostTrackerImpl.java:[363,79] cannot find symbol</span><br><span class="line">[ERROR]   symbol:   method getKey()</span><br><span class="line">[ERROR]   location: variable l of type org.opendaylight.yang.gen.v1.urn.tbd.params.xml.ns.yang.network.topology.rev131021.network.topology.topology.Link</span><br><span class="line">[ERROR] &#x2F;home&#x2F;qsong&#x2F;Documents&#x2F;sfc-patch&#x2F;sfc-l2switch&#x2F;hosttracker&#x2F;implementation&#x2F;src&#x2F;main&#x2F;java&#x2F;org&#x2F;opendaylight&#x2F;l2switch&#x2F;hosttracker&#x2F;plugin&#x2F;internal&#x2F;HostTrackerImpl.java:[383,48] cannot find symbol</span><br><span class="line">[ERROR]   symbol:   method getAugmentation(java.lang.Class&lt;org.opendaylight.yang.gen.v1.urn.opendaylight.host.tracker.rev140624.HostNode&gt;)</span><br><span class="line">[ERROR]   location: interface org.opendaylight.yang.gen.v1.urn.tbd.params.xml.ns.yang.network.topology.rev131021.network.topology.topology.Node</span><br><span class="line">[ERROR] &#x2F;home&#x2F;qsong&#x2F;Documents&#x2F;sfc-patch&#x2F;sfc-l2switch&#x2F;hosttracker&#x2F;implementation&#x2F;src&#x2F;main&#x2F;java&#x2F;org&#x2F;opendaylight&#x2F;l2switch&#x2F;hosttracker&#x2F;plugin&#x2F;internal&#x2F;SimpleAddressObserver.java:[190,14] cannot find symbol</span><br><span class="line">[ERROR]   symbol:   method setKey(org.opendaylight.yang.gen.v1.urn.opendaylight.address.tracker.rev140617.address.node.connector.AddressesKey)</span><br><span class="line">[ERROR]   location: variable addrs of type org.opendaylight.yang.gen.v1.urn.opendaylight.address.tracker.rev140617.address.node.connector.AddressesBuilder</span><br><span class="line">[ERROR] &#x2F;home&#x2F;qsong&#x2F;Documents&#x2F;sfc-patch&#x2F;sfc-l2switch&#x2F;hosttracker&#x2F;implementation&#x2F;src&#x2F;main&#x2F;java&#x2F;org&#x2F;opendaylight&#x2F;l2switch&#x2F;hosttracker&#x2F;plugin&#x2F;util&#x2F;Utilities.java:[44,15] cannot find symbol</span><br><span class="line">[ERROR]   symbol:   method setKey(org.opendaylight.yang.gen.v1.urn.tbd.params.xml.ns.yang.network.topology.rev131021.network.topology.topology.LinkKey)</span><br><span class="line">[ERROR]   location: variable srcdst of type org.opendaylight.yang.gen.v1.urn.tbd.params.xml.ns.yang.network.topology.rev131021.network.topology.topology.LinkBuilder</span><br><span class="line">[ERROR] &#x2F;home&#x2F;qsong&#x2F;Documents&#x2F;sfc-patch&#x2F;sfc-l2switch&#x2F;hosttracker&#x2F;implementation&#x2F;src&#x2F;main&#x2F;java&#x2F;org&#x2F;opendaylight&#x2F;l2switch&#x2F;hosttracker&#x2F;plugin&#x2F;util&#x2F;Utilities.java:[52,15] cannot find symbol</span><br><span class="line">[ERROR]   symbol:   method setKey(org.opendaylight.yang.gen.v1.urn.tbd.params.xml.ns.yang.network.topology.rev131021.network.topology.topology.LinkKey)</span><br><span class="line">[ERROR]   location: variable dstsrc of type org.opendaylight.yang.gen.v1.urn.tbd.params.xml.ns.yang.network.topology.rev131021.network.topology.topology.LinkBuilder</span><br><span class="line">[ERROR] &#x2F;home&#x2F;qsong&#x2F;Documents&#x2F;sfc-patch&#x2F;sfc-l2switch&#x2F;hosttracker&#x2F;implementation&#x2F;src&#x2F;main&#x2F;java&#x2F;org&#x2F;opendaylight&#x2F;l2switch&#x2F;hosttracker&#x2F;plugin&#x2F;util&#x2F;Utilities.java:[80,17] cannot find symbol</span><br><span class="line">[ERROR]   symbol:   method setKey(org.opendaylight.yang.gen.v1.urn.opendaylight.host.tracker.rev140624.host.AttachmentPointsKey)</span><br><span class="line">[ERROR]   location: class org.opendaylight.yang.gen.v1.urn.opendaylight.host.tracker.rev140624.host.AttachmentPointsBuilder</span><br></pre></td></tr></table></figure>
<p><code>org.opendaylight.yang.gen.v1.urn.tbd.params.xml.ns.yang.network.topology.rev131021.network.topology.topology</code> 属于 <code>org.opendaylight.mdsal</code>.</p>
<h1 id="l2switch-main-编译错误">l2switch-main 编译错误</h1>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.7.0:compile (default-compile) on project main-impl: Compilation failure: Compilation failure:</span><br><span class="line">[ERROR] &#x2F;home&#x2F;qsong&#x2F;Documents&#x2F;sfc-patch&#x2F;sfc-l2switch&#x2F;l2switch-main&#x2F;src&#x2F;main&#x2F;java&#x2F;org&#x2F;opendaylight&#x2F;l2switch&#x2F;inventory&#x2F;InventoryReader.java:[73,69] cannot find symbol</span><br><span class="line">[ERROR]   symbol:   method getAugmentation(java.lang.Class&lt;org.opendaylight.yang.gen.v1.urn.opendaylight.l2switch.loopremover.rev140714.StpStatusAwareNodeConnector&gt;)</span><br><span class="line">[ERROR]   location: variable nc of type org.opendaylight.yang.gen.v1.urn.opendaylight.inventory.rev130819.node.NodeConnector</span><br><span class="line">[ERROR] &#x2F;home&#x2F;qsong&#x2F;Documents&#x2F;sfc-patch&#x2F;sfc-l2switch&#x2F;l2switch-main&#x2F;src&#x2F;main&#x2F;java&#x2F;org&#x2F;opendaylight&#x2F;l2switch&#x2F;inventory&#x2F;InventoryReader.java:[77,88] cannot find symbol</span><br><span class="line">[ERROR]   symbol:   method getKey()</span><br><span class="line">[ERROR]   location: variable nc of type org.opendaylight.yang.gen.v1.urn.opendaylight.inventory.rev130819.node.NodeConnector</span><br><span class="line">[ERROR] &#x2F;home&#x2F;qsong&#x2F;Documents&#x2F;sfc-patch&#x2F;sfc-l2switch&#x2F;l2switch-main&#x2F;src&#x2F;main&#x2F;java&#x2F;org&#x2F;opendaylight&#x2F;l2switch&#x2F;inventory&#x2F;InventoryReader.java:[78,58] cannot find symbol</span><br><span class="line">[ERROR]   symbol:   method getAugmentation(java.lang.Class&lt;org.opendaylight.yang.gen.v1.urn.opendaylight.address.tracker.rev140617.AddressCapableNodeConnector&gt;)</span><br><span class="line">[ERROR]   location: variable nc of type org.opendaylight.yang.gen.v1.urn.opendaylight.inventory.rev130819.node.NodeConnector</span><br><span class="line">[ERROR] &#x2F;home&#x2F;qsong&#x2F;Documents&#x2F;sfc-patch&#x2F;sfc-l2switch&#x2F;l2switch-main&#x2F;src&#x2F;main&#x2F;java&#x2F;org&#x2F;opendaylight&#x2F;l2switch&#x2F;inventory&#x2F;InventoryReader.java:[85,84] cannot find symbol</span><br><span class="line">[ERROR]   symbol:   method getKey()</span><br><span class="line">[ERROR]   location: variable nc of type org.opendaylight.yang.gen.v1.urn.opendaylight.inventory.rev130819.node.NodeConnector</span><br><span class="line">[ERROR] &#x2F;home&#x2F;qsong&#x2F;Documents&#x2F;sfc-patch&#x2F;sfc-l2switch&#x2F;l2switch-main&#x2F;src&#x2F;main&#x2F;java&#x2F;org&#x2F;opendaylight&#x2F;l2switch&#x2F;inventory&#x2F;InventoryReader.java:[87,102] cannot find symbol</span><br><span class="line">[ERROR]   symbol:   method getKey()</span><br><span class="line">[ERROR]   location: variable nc of type org.opendaylight.yang.gen.v1.urn.opendaylight.inventory.rev130819.node.NodeConnector</span><br></pre></td></tr></table></figure>
<h1 id="feature-odl-l2switch-packethandler-编译报错">feature odl-l2switch-packethandler 编译报错</h1>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[ERROR] Failed to execute goal on project odl-l2switch-packethandler: Could not resolve dependencies for project org.opendaylight.l2switch:odl-l2switch-packethandler:feature:0.8.0-SNAPSHOT: Could not find artifact org.opendaylight.openflowplugin:odl-openflowplugin-southbound:xml:features:0.7.0-SNAPSHOT in opendaylight-snapshot (https:&#x2F;&#x2F;nexus.opendaylight.org&#x2F;content&#x2F;repositories&#x2F;opendaylight.snapshot&#x2F;) -&gt; [Help 1]</span><br><span class="line">[ERROR]</span><br><span class="line">&#96;&#96;&#96; </span><br><span class="line"></span><br><span class="line">依赖问题，因为从fluorine起，maven采用的repository是&#96;https:&#x2F;&#x2F;nexus.opendaylight.org&#x2F;content&#x2F;repositories&#x2F;public&#x2F;&#96;, snapshot采用的是&#96;https:&#x2F;&#x2F;nexus.opendaylight.org&#x2F;content&#x2F;repositories&#x2F;opendaylight.snapshot&#x2F;&#96; 而&#96;opendaylight.snapshot&#96;删掉了好多东西</span><br><span class="line"></span><br><span class="line">修改&#96;odl-l2switch-packethandler&#x2F;pom.xml&#96;中的依赖关系如下:</span><br></pre></td></tr></table></figure>
<p><dependency> <groupId>org.opendaylight.openflowplugin</groupId> <artifactId>odl-openflowplugin-southbound</artifactId> <version>0.7.0</version> <type>xml</type> <classifier>features</classifier> </dependency> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"># feature odl-l2switch-loopremover 编译报错</span><br></pre></td></tr></table></figure> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[ERROR] Failed to execute goal on project odl-l2switch-loopremover: Could not resolve dependencies for project org.opendaylight.l2switch:odl-l2switch-loopremover:feature:0.8.0-SNAPSHOT: Could not find artifact org.opendaylight.openflowplugin:odl-openflowplugin-flow-services:xml:features:0.7.0-SNAPSHOT in opendaylight-snapshot (https:&#x2F;&#x2F;nexus.opendaylight.org&#x2F;content&#x2F;repositories&#x2F;opendaylight.snapshot&#x2F;) -&gt; [Help 1]</span><br><span class="line">[ERROR]</span><br></pre></td></tr></table></figure> 编译好的的<code>l2switch</code>(0.7.4)依赖<code>odl-openflowplugin-flow-services</code>的版本是0.6.4 鉴于其他SFC项目都采用了0.9.0-SNAPSHOT的<code>odl-openflowplugin-flow-services</code>。所以这里修改如下: <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.opendaylight.openflowplugin&lt;&#x2F;groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;odl-openflowplugin-flow-services&lt;&#x2F;artifactId&gt;</span><br><span class="line">    &lt;version&gt;0.9.0-SNAPSHOT&lt;&#x2F;version&gt;</span><br><span class="line">    &lt;type&gt;xml&lt;&#x2F;type&gt;</span><br><span class="line">    &lt;classifier&gt;features&lt;&#x2F;classifier&gt;</span><br><span class="line">&lt;&#x2F;dependency&gt;</span><br></pre></td></tr></table></figure></p>
<h1 id="feature-odl-l2switch-switch-rest-编译失败">feature odl-l2switch-switch-rest 编译失败</h1>
<p>因为项目的<code>pom.xml</code>依赖的是: <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;&#x2F;dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;org.opendaylight.netconf&lt;&#x2F;groupId&gt;</span><br><span class="line">&lt;artifactId&gt;odl-restconf&lt;&#x2F;artifactId&gt;</span><br><span class="line">&lt;version&gt;1.8.0-SNAPSHOT&lt;&#x2F;version&gt;</span><br><span class="line">&lt;type&gt;xml&lt;&#x2F;type&gt;</span><br><span class="line">&lt;classifier&gt;features&lt;&#x2F;classifier&gt;</span><br></pre></td></tr></table></figure> 以SFC项目为例，odl-sfc-provider-rest 依赖的<code>odl-restconf</code>工件版本已经是1.10.0-SNAPSHOT. 应该与SFC统一。 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependencies&gt;</span><br><span class="line"> &lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;org.opendaylight.netconf&lt;&#x2F;groupId&gt;</span><br><span class="line">&lt;artifactId&gt;odl-restconf&lt;&#x2F;artifactId&gt;</span><br><span class="line">&lt;version&gt;1.10.0-SNAPSHOT&lt;&#x2F;version&gt;</span><br><span class="line">&lt;type&gt;xml&lt;&#x2F;type&gt;</span><br><span class="line">&lt;classifier&gt;features&lt;&#x2F;classifier&gt;</span><br></pre></td></tr></table></figure></p>
<h1 id="feature-odl-l2switch-ui-编译报错">feature odl-l2switch-ui 编译报错</h1>
<p>在<code>features/pom.xml</code>注释掉/删掉关于 <code>odl-l2switch-switch-ui</code> 的模块</p>
<h1 id="feature-l2switch-编译报错">feature-l2switch 编译报错</h1>
<p>该项目下的pom.xml中注销掉关于<code>odl-l2switch-switch-ui</code>的依赖</p>
<h1 id="distribution-karaf-编译报错">distribution-karaf 编译报错</h1>
<p>有几个现象值得注意下： <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[INFO] ------------&lt; org.opendaylight.l2switch:distribution-karaf &gt;------------</span><br><span class="line">[INFO] Building distribution-karaf 0.8.0-SNAPSHOT                         [2&#x2F;5]</span><br><span class="line">[INFO] --------------------------------[ pom ]---------------------------------</span><br><span class="line">Downloading from opendaylight-mirror: https:&#x2F;&#x2F;nexus.opendaylight.org&#x2F;content&#x2F;repositories&#x2F;public&#x2F;org&#x2F;opendaylight&#x2F;odlparent&#x2F;karaf-plugin&#x2F;3.1.0&#x2F;karaf-plugin-3.1.0.pom</span><br><span class="line">Downloaded from opendaylight-mirror: https:&#x2F;&#x2F;nexus.opendaylight.org&#x2F;content&#x2F;repositories&#x2F;public&#x2F;org&#x2F;opendaylight&#x2F;odlparent&#x2F;karaf-plugin&#x2F;3.1.0&#x2F;karaf-plugin-3.1.0.pom (5.6 kB at 9.9 kB&#x2F;s)</span><br><span class="line">Downloading from opendaylight-mirror: https:&#x2F;&#x2F;nexus.opendaylight.org&#x2F;content&#x2F;repositories&#x2F;public&#x2F;org&#x2F;opendaylight&#x2F;odlparent&#x2F;karaf-plugin&#x2F;3.1.0&#x2F;karaf-plugin-3.1.0.jar</span><br><span class="line">Downloaded from opendaylight-mirror: https:&#x2F;&#x2F;nexus.opendaylight.org&#x2F;content&#x2F;repositories&#x2F;public&#x2F;org&#x2F;opendaylight&#x2F;odlparent&#x2F;karaf-plugin&#x2F;3.1.0&#x2F;karaf-plugin-3.1.0.jar (32 kB at 96 kB&#x2F;s)</span><br><span class="line">Downloading from opendaylight-mirror: https:&#x2F;&#x2F;nexus.opendaylight.org&#x2F;content&#x2F;repositories&#x2F;public&#x2F;org&#x2F;apache&#x2F;karaf&#x2F;features&#x2F;framework&#x2F;4.1.5&#x2F;framework-4.1.5.pom</span><br><span class="line">Downloaded from opendaylight-mirror: https:&#x2F;&#x2F;nexus.opendaylight.org&#x2F;content&#x2F;repositories&#x2F;public&#x2F;org&#x2F;apache&#x2F;karaf&#x2F;features&#x2F;framework&#x2F;4.1.5&#x2F;framework-4.1.5.pom (12 kB at 53 kB&#x2F;s)</span><br><span class="line">Downloading from opendaylight-mirror: https:&#x2F;&#x2F;nexus.opendaylight.org&#x2F;content&#x2F;repositories&#x2F;public&#x2F;org&#x2F;apache&#x2F;karaf&#x2F;features&#x2F;base&#x2F;4.1.5&#x2F;base-4.1.5.pom</span><br><span class="line">Downloaded from opendaylight-mirror: https:&#x2F;&#x2F;nexus.opendaylight.org&#x2F;content&#x2F;repositories&#x2F;public&#x2F;org&#x2F;apache&#x2F;karaf&#x2F;features&#x2F;base&#x2F;4.1.5&#x2F;base-4.1.5.pom (9.1 kB at 37 kB&#x2F;s)</span><br><span class="line">Downloading from opendaylight-mirror: https:&#x2F;&#x2F;nexus.opendaylight.org&#x2F;content&#x2F;repositories&#x2F;public&#x2F;org&#x2F;apache&#x2F;karaf&#x2F;org.ap</span><br></pre></td></tr></table></figure></p>
<p>针对这一点有两处需要改动： 1. features/featues-l2switch 貌似下载的是<code>karaf 3.1.1</code>, 而SFC依赖的是(定义在<code>features/features-l2switch/pom.xml</code>中): <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;parent&gt;</span><br><span class="line">    &lt;groupId&gt;org.opendaylight.odlparent&lt;&#x2F;groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;feature-repo-parent&lt;&#x2F;artifactId&gt;</span><br><span class="line">    &lt;version&gt;5.0.0&lt;&#x2F;version&gt;</span><br><span class="line">    &lt;relativePath&#x2F;&gt;</span><br><span class="line">&lt;&#x2F;parent&gt;</span><br></pre></td></tr></table></figure> 修改<code>features/features-l2switch</code>使二者统一</p>
<ol start="2" type="1">
<li>artifacts/pom.xml 修改后的内容: <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;parent&gt;</span><br><span class="line">    &lt;groupId&gt;org.opendaylight.odlparent&lt;&#x2F;groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;odlparent-lite&lt;&#x2F;artifactId&gt;</span><br><span class="line">    &lt;version&gt;5.0.0&lt;&#x2F;version&gt;</span><br><span class="line">    &lt;relativePath&#x2F;&gt;</span><br><span class="line">&lt;&#x2F;parent&gt;</span><br></pre></td></tr></table></figure></li>
</ol>
<p>为何sfc项目保持一致。&lt;openflow.plugin.version&gt;0.9.0-SNAPSHOT&lt;/openflow.plugin.version&gt; 统一改为0.9.0-SNAPSHOT 之前是多少？</p>
<p>parent 文件夹中pom.xml中<parent>亦是改成4.0.2(之前为0.13.0)</parent></p>
<p>第二，报错依然跟<code>odl-l2switch-switch-ui/</code>有关 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[ERROR] Failed to execute goal org.apache.karaf.tooling:karaf-maven-plugin:4.1.5:assembly (process-resources) on project distribution-karaf: Unable to build assembly: Could not find matching feature for odl-l2switch-switch-ui&#x2F;0.0.0 -&gt; [Help 1]</span><br><span class="line">[ERROR]</span><br></pre></td></tr></table></figure> 这是因为在文件<code>/distribution/karaf/pom.xml</code> 中，有这么个配置，而这么个配置是编译中产生的:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--properties&gt;</span><br><span class="line">  &lt;karaf.localFeature&gt;odl-l2switch-switch-ui&lt;&#x2F;karaf.localFeature&gt;</span><br><span class="line">&lt;&#x2F;properties--&gt;</span><br></pre></td></tr></table></figure>
<p>删掉这个配置！ 同时parent的版本号要改成5.0.0</p>
<h1 id="section"></h1>
<p>[INFO] ------------------------------------------------------------------------ [ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.7.0:compile (default-compile) on project packethandler-model: Compilation failure [ERROR] /home/qsong/Documents/sfc-patch/sfc-l2switch/packethandler/model/target/generated-sources/mdsal-binding/org/opendaylight/yang/gen/v1/urn/opendaylight/packet/basepacket/rev140528/raw/packet/fields/MatchBuilder.java:[293,26] org.opendaylight.yang.gen.v1.urn.opendaylight.packet.basepacket.rev140528.raw.packet.fields.MatchBuilder.MatchImpl is not abstract and does not override abstract method implementedInterface() in org.opendaylight.yang.gen.v1.urn.opendaylight.model.match.types.rev131026.Match</p>
<p>这个错误是由于依赖从&lt;openflow.plugin.version&gt;0.9.0-SNAPSHOT&lt;/openflow.plugin.version&gt; 改为0.9.0-SNAPSHOT引起的，当其为0.7.0的时候，并没有这个问题！ <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 获取另外分支上的更新到 src&#x2F;js 文件&#x2F;文件夹下</span><br><span class="line">git checkout feature-branch -- src&#x2F;js&#x2F;</span><br><span class="line"># 比较两个分支上跟新的不同</span><br><span class="line">git diff branchA branchB -- file.cs</span><br></pre></td></tr></table></figure></p>
<h1 id="section-1"></h1>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">[INFO] --- maven-surefire-plugin:2.18.1:test (default) @ odl-l2switch-packethandler ---</span><br><span class="line">[INFO] Surefire report directory: &#x2F;home&#x2F;qsong&#x2F;Documents&#x2F;sfc-patch&#x2F;sfc-l2switch&#x2F;features&#x2F;odl-l2switch-packethandler&#x2F;target&#x2F;surefire-reports</span><br><span class="line"></span><br><span class="line">-------------------------------------------------------</span><br><span class="line"> T E S T S</span><br><span class="line">-------------------------------------------------------</span><br><span class="line">Running org.opendaylight.odlparent.featuretest.SingleFeatureTest</span><br><span class="line">Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 18.655 sec &lt;&lt;&lt; FAILURE! - in org.opendaylight.odlparent.featuretest.SingleFeatureTest</span><br><span class="line">installFeatureCatchAndLog(org.opendaylight.odlparent.featuretest.SingleFeatureTest)[repoUrl: file:&#x2F;home&#x2F;qsong&#x2F;Documents&#x2F;sfc-patch&#x2F;sfc-l2switch&#x2F;features&#x2F;odl-l2switch-packethandler&#x2F;target&#x2F;feature&#x2F;feature.xml, Feature: odl-l2switch-packethandler 0.8.0.SNAPSHOT]  Time elapsed: 17.925 sec  &lt;&lt;&lt; ERROR!</span><br><span class="line">org.osgi.service.resolver.ResolutionException: Unable to resolve root: missing requirement [root] osgi.identity; osgi.identity&#x3D;odl-l2switch-packethandler; type&#x3D;karaf.feature; version&#x3D;&quot;[0.8.0.SNAPSHOT,0.8.0.SNAPSHOT]&quot;; filter:&#x3D;&quot;(&amp;(osgi.identity&#x3D;odl-l2switch-packethandler)(type&#x3D;karaf.feature)(version&gt;&#x3D;0.8.0.SNAPSHOT)(version&lt;&#x3D;0.8.0.SNAPSHOT))&quot; [caused by: Unable to resolve odl-l2switch-packethandler&#x2F;0.8.0.SNAPSHOT: missing requirement [odl-l2switch-packethandler&#x2F;0.8.0.SNAPSHOT] osgi.identity; osgi.identity&#x3D;odl-openflowplugin-southbound; type&#x3D;karaf.feature; version&#x3D;&quot;[0.7.0,0.7.0]&quot; [caused by: Unable to resolve odl-openflowplugin-southbound&#x2F;0.7.0: missing requirement [odl-openflowplugin-southbound&#x2F;0.7.0] osgi.identity; osgi.identity&#x3D;odl-serviceutils-tools; type&#x3D;karaf.feature; version&#x3D;&quot;[0.2.0,0.2.0]&quot; [caused by: Unable to resolve odl-serviceutils-tools&#x2F;0.2.0: missing requirement [odl-serviceutils-tools&#x2F;0.2.0] osgi.identity; osgi.identity&#x3D;odl-infrautils-metrics; type&#x3D;karaf.feature; version&#x3D;&quot;[1.4.0,1.4.0]&quot; [caused by: Unable to resolve odl-infrautils-metrics&#x2F;1.4.0: missing requirement [odl-infrautils-metrics&#x2F;1.4.0] osgi.identity; osgi.identity&#x3D;io.dropwizard.metrics.jvm; type&#x3D;osgi.bundle; version&#x3D;&quot;[4.0.2,4.0.2]&quot;; resolution:&#x3D;mandatory [caused by: Unable to resolve io.dropwizard.metrics.jvm&#x2F;4.0.2: missing requirement [io.dropwizard.metrics.jvm&#x2F;4.0.2] osgi.wiring.package; filter:&#x3D;&quot;(osgi.wiring.package&#x3D;com.sun.management)&quot;]]]]]</span><br><span class="line">    at org.apache.felix.resolver.ResolutionError.toException(ResolutionError.java:42)</span><br><span class="line">    at org.apache.felix.resolver.ResolverImpl.doResolve(ResolverImpl.java:391)</span><br><span class="line">    at org.apache.felix.resolver.ResolverImpl.resolve(ResolverImpl.java:377)</span><br><span class="line">    at org.apache.felix.resolver.ResolverImpl.resolve(ResolverImpl.java:349)</span><br><span class="line">    at org.apache.karaf.features.internal.region.SubsystemResolver.resolve(SubsystemResolver.java:218)</span><br><span class="line">    at org.apache.karaf.features.internal.service.Deployer.deploy(Deployer.java:291)</span><br><span class="line">    at org.apache.karaf.features.internal.service.FeaturesServiceImpl.doProvision(FeaturesServiceImpl.java:1248)</span><br><span class="line">    at org.apache.karaf.features.internal.service.FeaturesServiceImpl.lambda$doProvisionInThread$1(FeaturesServiceImpl.java:1147)</span><br><span class="line">    at java.util.concurrent.FutureTask.run(FutureTask.java:266)</span><br><span class="line">    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)</span><br><span class="line">    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">    at java.lang.Thread.run(Thread.java:748)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Results :</span><br><span class="line"></span><br><span class="line">Tests in error:</span><br><span class="line">  Unable to resolve root: missing requirement [root] osgi.identity; osgi.identity&#x3D;odl-l2switch-packethandler; type&#x3D;karaf.feature; version&#x3D;&quot;[0.8.0.SNAPSHOT,0.8.0.SNAPSHOT]&quot;; filter:&#x3D;&quot;(&amp;(osgi.identity&#x3D;odl-l2switch-packethandler)(type&#x3D;karaf.feature)(version&gt;&#x3D;0.8.0.SNAPSHOT)(version&lt;&#x3D;0.8.0.SNAPSHOT))&quot; [caused by: Unable to resolve odl-l2switch-packethandler&#x2F;0.8.0.SNAPSHOT: missing requirement [odl-l2switch-packethandler&#x2F;0.8.0.SNAPSHOT] osgi.identity; osgi.identity&#x3D;odl-openflowplugin-southbound; type&#x3D;karaf.feature; version&#x3D;&quot;[0.7.0,0.7.0]&quot; [caused by: Unable to resolve odl-openflowplugin-southbound&#x2F;0.7.0: missing requirement [odl-openflowplugin-southbound&#x2F;0.7.0] osgi.identity; osgi.identity&#x3D;odl-serviceutils-tools; type&#x3D;karaf.feature; version&#x3D;&quot;[0.2.0,0.2.0]&quot; [caused by: Unable to resolve odl-serviceutils-tools&#x2F;0.2.0: missing requirement [odl-serviceutils-tools&#x2F;0.2.0] osgi.identity; osgi.identity&#x3D;odl-infrautils-metrics; type&#x3D;karaf.feature; version&#x3D;&quot;[1.4.0,1.4.0]&quot; [caused by: Unable to resolve odl-infrautils-metrics&#x2F;1.4.0: missing requirement [odl-infrautils-metrics&#x2F;1.4.0] osgi.identity; osgi.identity&#x3D;io.dropwizard.metrics.jvm; type&#x3D;osgi.bundle; version&#x3D;&quot;[4.0.2,4.0.2]&quot;; resolution:&#x3D;mandatory [caused by: Unable to resolve io.dropwizard.metrics.jvm&#x2F;4.0.2: missing requirement [io.dropwizard.metrics.jvm&#x2F;4.0.2] osgi.wiring.package; filter:&#x3D;&quot;(osgi.wiring.package&#x3D;com.sun.management)&quot;]]]]]</span><br><span class="line"></span><br><span class="line">Tests run: 1, Failures: 0, Errors: 1, Skipped: 0</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.7.0:compile (default-compile) on project packethandler-model: Compilation failure: Compilation failure:</span><br><span class="line">[ERROR] &#x2F;home&#x2F;qsong&#x2F;Documents&#x2F;sfc-patch&#x2F;sfc-l2switch&#x2F;packethandler&#x2F;model&#x2F;src&#x2F;main&#x2F;yang-gen-sal&#x2F;org&#x2F;opendaylight&#x2F;yang&#x2F;gen&#x2F;v1&#x2F;urn&#x2F;opendaylight&#x2F;packet&#x2F;ethernet&#x2F;rev140528&#x2F;VlanId.java:[10,47] cannot find symbol</span><br><span class="line">[ERROR]   symbol:   class TypeObject</span><br><span class="line">[ERROR]   location: package org.opendaylight.yangtools.yang.binding</span><br></pre></td></tr></table></figure>
<p>好端端的为啥 <code>org.opendaylight.yangtools.yang.binding.TypeObject</code> 就找不到了？ 这个包定义在 <code>org.opendaylight.mdsal</code>之中</p>
<p><code>https://github.com/opendaylight/mdsal/tree/stable/fluorine/binding/yang-binding/src/main/java/org/opendaylight/yangtools/yang/binding</code> 显示 这个<code>TypeObject</code>类没有了</p>
<p><a href="https://javadocs.opendaylight.org/org.opendaylight.mdsal/master/" target="_blank" rel="noopener">ODL MDSAL Javadoc</a> 显示: <code>TypeObject</code>这个类似乎是master分支才引进的，之前(包括Fluorine版本)从来没有存在过！L2switch代码我下载的也是master分支的，并且其中代码实现了接口类<code>TypeObject</code>.</p>
<p>问题: 为什么在<code>l2switch-parent/pom.xml</code>中，之前使用老版本的mdsal反倒没有这种问题呢？ 我发现<code>~/.m2/repository/org/opendaylight/mdsal/yang-binding/2.0.2/yang-binding-2.0.2.jar</code>中倒是发现了<code>TypeObject这个类</code></p>
<p>IntelliJ IDEA 真是写代码神器，有这个工具的帮助，感觉效率成倍提高！我的目标是让l2switch跟sfc代码兼容，让他们有相同的依赖，没有依赖冲突。现在的策略是一个一个模块来编译</p>
<p>在做static code analysis 的时候，将<code>javax.annotation.Nonnull</code>统一替换为<code>org.eclipse.jdt.annotation.NonNull</code></p>
<p>loopremover/NetworkGraphImpl 下有几个特殊字符，不知道IDE 自动替换的是否正确啊</p>
<p>原来一直odl-l2switch-switch-rest中依赖的 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;&#x2F;dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;org.opendaylight.netconf&lt;&#x2F;groupId&gt;</span><br><span class="line">&lt;artifactId&gt;odl-restconf&lt;&#x2F;artifactId&gt;</span><br><span class="line">&lt;version&gt;1.8.0-SNAPSHOT&lt;&#x2F;version&gt;</span><br><span class="line">&lt;type&gt;xml&lt;&#x2F;type&gt;</span><br><span class="line">&lt;classifier&gt;features&lt;&#x2F;classifier&gt;</span><br></pre></td></tr></table></figure> 在编译成distribution-karaf的时候，依赖一些老的东西, 采用<version>1.10.0-SNAPSHOT</version></p>
<h1 id="后来在编译feature-odl-l2switch-loopremover-的时候又是因为在dependency里面显式地依赖了org.opendaylight.openflowplugin-的-odl-openflowplugin-flow-services-0.7.0版本-而不是0.9.0-snapshot-最后又出现了需要-com.google.common.base-version-27.1.0-提供的是-28.0.0">后来在编译feature odl-l2switch-loopremover 的时候，又是因为在dependency里面显式地依赖了org.opendaylight.openflowplugin 的 odl-openflowplugin-flow-services (0.7.0版本) 而不是0.9.0-SNAPSHOT 最后又出现了需要 com.google.common.base version = 27.1.0 提供的是 28.0.0</h1>
<h1 id="这个问题终于找到了原因了">这个问题终于找到了原因了</h1>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[INFO] Running org.opendaylight.odlparent.featuretest.SingleFeatureTest</span><br><span class="line">[ERROR] Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 27.367 s &lt;&lt;&lt; FAILURE! - in org.opendaylight.odlparent.featuretest.SingleFeatureTest</span><br><span class="line">[ERROR] installFeatureCatchAndLog(org.opendaylight.odlparent.featuretest.SingleFeatureTest)[repoUrl: file:&#x2F;Users&#x2F;qsong&#x2F;Documents&#x2F;Post-doc-doc&#x2F;sfc-patch&#x2F;features&#x2F;odl-sfc-sfp-checker&#x2F;target&#x2F;feature&#x2F;feature.xml, Feature: odl-sfc-sfp-checker 0.10.0.SNAPSHOT]  Time elapsed: 24.488 s  &lt;&lt;&lt; ERROR!</span><br><span class="line">org.apache.felix.resolver.reason.ReasonException: Unable to resolve org.opendaylight.sfc.sfp-checker&#x2F;0.10.0.SNAPSHOT: missing requirement [org.opendaylight.sfc.sfp-checker&#x2F;0.10.0.SNAPSHOT] osgi.wiring.package; filter:&#x3D;&quot;(osgi.wiring.package&#x3D;org.opendaylight.l2switch.arphandler.core)&quot;</span><br><span class="line">    at org.apache.felix.resolver.Candidates$MissingRequirementError.toException(Candidates.java:1343)</span><br><span class="line">    at org.apache.felix.resolver.Candidates$MissingRequirementError.toException(Candidates.java:1343)</span><br><span class="line">    at org.apache.felix.resolver.Candidates$MissingRequirementError.toException(Candidates.java:1343)</span><br><span class="line">    at org.apache.felix.resolver.ResolverImpl.doResolve(ResolverImpl.java:392)</span><br><span class="line">    at org.apache.felix.resolver.ResolverImpl.resolve(ResolverImpl.java:378)</span><br><span class="line">    at org.apache.felix.resolver.ResolverImpl.resolve(ResolverImpl.java:332)</span><br><span class="line">    at org.apache.karaf.features.internal.region.SubsystemResolver.resolve(SubsystemResolver.java:257)</span><br><span class="line">    at org.apache.karaf.features.internal.service.Deployer.deploy(Deployer.java:388)</span><br><span class="line">    at org.apache.karaf.features.internal.service.FeaturesServiceImpl.doProvision(FeaturesServiceImpl.java:1025)</span><br><span class="line">    at org.apache.karaf.features.internal.service.FeaturesServiceImpl.lambda$doProvisionInThread$13(FeaturesServiceImpl.java:964)</span><br><span class="line">    at org.apache.karaf.features.internal.service.FeaturesServiceImpl$$Lambda$75.00000000E79B4420.call(Unknown Source)</span><br><span class="line">    at java.util.concurrent.FutureTask.run(FutureTask.java:266)</span><br><span class="line">    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)</span><br><span class="line">    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">    at java.lang.Thread.run(Thread.java:819)</span><br></pre></td></tr></table></figure>
<p>根本原因是 arphandler-impl 这个bundle并没有export-package其中的core包，但问题是：为啥这个sfc-sfp-checker这个模块依赖arphandler-impl的时候 却没有任何问题呢？？？</p>

    </div>

    
    
    

      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2019/06/21/java-tuto/" rel="prev" title="Maven Java 经验积累">
      <i class="fa fa-chevron-left"></i> Maven Java 经验积累
    </a></div>
      <div class="post-nav-item">
    <a href="/2019/07/13/yang-model-tuto/" rel="next" title="深入浅出理解 YANG 模型">
      深入浅出理解 YANG 模型 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#常见的类以及所属包以及路径"><span class="nav-number">1.</span> <span class="nav-text">常见的类以及所属包以及路径</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#查看-odl-javadoc"><span class="nav-number">2.</span> <span class="nav-text">查看 ODL Javadoc</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#org.opendaylight.yang.gen.v1.urn.opendaylight.inventory.rev130819.node.nodeconnector"><span class="nav-number">3.</span> <span class="nav-text">org.opendaylight.yang.gen.v1.urn.opendaylight.inventory.rev130819.node.NodeConnector</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#bundle-arphandler-impl-编译失败"><span class="nav-number">4.</span> <span class="nav-text">Bundle arphandler-impl 编译失败</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#错误信息"><span class="nav-number">4.1.</span> <span class="nav-text">错误信息</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#原因-在fluorine中-org.opendaylight.msdal-中定义的-ipaddress-删去了构造体-ipaddresschar-ipaddress方法org.opendaylight.msdal-中引入了-ipaddressbuilder-该方法支持从-string直接构造ipaddress对象"><span class="nav-number">4.2.</span> <span class="nav-text">原因: 在fluorine中, org.opendaylight.msdal 中定义的 IpAddress 删去了构造体 IpAddress(Char ipAddress)方法。org.opendaylight.msdal 中引入了 IpAddressBuilder 该方法支持从 String直接构造IpAddress对象</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#编译-bundle-hosttracker-报错"><span class="nav-number">5.</span> <span class="nav-text">编译 Bundle hosttracker 报错</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#报错信息"><span class="nav-number">5.1.</span> <span class="nav-text">报错信息</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#l2switch-main-编译错误"><span class="nav-number">6.</span> <span class="nav-text">l2switch-main 编译错误</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#feature-odl-l2switch-packethandler-编译报错"><span class="nav-number">7.</span> <span class="nav-text">feature odl-l2switch-packethandler 编译报错</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#feature-odl-l2switch-switch-rest-编译失败"><span class="nav-number">8.</span> <span class="nav-text">feature odl-l2switch-switch-rest 编译失败</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#feature-odl-l2switch-ui-编译报错"><span class="nav-number">9.</span> <span class="nav-text">feature odl-l2switch-ui 编译报错</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#feature-l2switch-编译报错"><span class="nav-number">10.</span> <span class="nav-text">feature-l2switch 编译报错</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#distribution-karaf-编译报错"><span class="nav-number">11.</span> <span class="nav-text">distribution-karaf 编译报错</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#section"><span class="nav-number">12.</span> <span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#section-1"><span class="nav-number">13.</span> <span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#后来在编译feature-odl-l2switch-loopremover-的时候又是因为在dependency里面显式地依赖了org.opendaylight.openflowplugin-的-odl-openflowplugin-flow-services-0.7.0版本-而不是0.9.0-snapshot-最后又出现了需要-com.google.common.base-version-27.1.0-提供的是-28.0.0"><span class="nav-number">14.</span> <span class="nav-text">后来在编译feature odl-l2switch-loopremover 的时候，又是因为在dependency里面显式地依赖了org.opendaylight.openflowplugin 的 odl-openflowplugin-flow-services (0.7.0版本) 而不是0.9.0-SNAPSHOT 最后又出现了需要 com.google.common.base version &#x3D; 27.1.0 提供的是 28.0.0</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#这个问题终于找到了原因了"><span class="nav-number">15.</span> <span class="nav-text">这个问题终于找到了原因了</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">rennsong</p>
  <div class="site-description" itemprop="description">Personal blog site, to note technique and life related articles</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">68</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">20</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">22</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/hansomesong" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;hansomesong" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">rennsong</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://mist.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

  

</body>
</html>
