<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"rennesong.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="The Southbound REST Plug-in is used to send configuration from datastore down to network devices supporting a REST API (i.e. they have a configured REST URI). It supports POST&#x2F;PUT&#x2F;DELETE operations, w">
<meta property="og:type" content="article">
<meta property="og:title" content="latest-sfc103demo-trial">
<meta property="og:url" content="http://rennesong.com/2019/03/29/latest-sfc103demo-trial/index.html">
<meta property="og:site_name" content="Rennesong&#39;s blog">
<meta property="og:description" content="The Southbound REST Plug-in is used to send configuration from datastore down to network devices supporting a REST API (i.e. they have a configured REST URI). It supports POST&#x2F;PUT&#x2F;DELETE operations, w">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2019-03-29T15:33:10.000Z">
<meta property="article:modified_time" content="2019-06-11T03:15:25.000Z">
<meta property="article:author" content="rennsong">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://rennesong.com/2019/03/29/latest-sfc103demo-trial/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>latest-sfc103demo-trial | Rennesong's blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript><!-- hexo-inject:begin --><!-- hexo-inject:end -->

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Rennesong's blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Blog my life from now on!</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://rennesong.com/2019/03/29/latest-sfc103demo-trial/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="rennsong">
      <meta itemprop="description" content="Personal blog site, to note technique and life related articles">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Rennesong's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          latest-sfc103demo-trial
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-03-29 23:33:10" itemprop="dateCreated datePublished" datetime="2019-03-29T23:33:10+08:00">2019-03-29</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-06-11 11:15:25" itemprop="dateModified" datetime="2019-06-11T11:15:25+08:00">2019-06-11</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>The Southbound REST Plug-in is used to send configuration from datastore down to network devices supporting a REST API (i.e. they have a configured REST URI). It supports POST/PUT/DELETE operations, which are triggered accordingly by changes in the SFC data stores.</p>
<p>Network devices supporting REST API (provided by sfc-agent.py)</p>
<p>we developped a proof-of-concept (PoC) implementation for the proposed schema in the context of SFC environment. The key idea is to carry OMS signature into NSH header we describe the service chain in a high level policy language, let service orchestrator to instantiate the required service nodes and chain them by OpenDaylight SFC feature. To this end,</p>
<p>The difficulties we are faced with are: 1) how to initialize and distribute OMS parameters (such as publick key, secrete id, etc) for each involved service function on a chain; 2) how to carry and transport generated signature;</p>
<h1 id="network-topology">Network topology</h1>
<p>In our proof-of-work, we use Vagrant and Docker to create network topology illustrated in Fig.XX. Each node is instantiated as a container and configure to listen on a port. ODL serves as the SDN controller to stich these nodes together to construct a service function chain on leveraging SFC feature. ODL SFC provides a set of northbound RESTFul to receive high level SFC chaining and translate them into low level OVS instructions and concrete service function settings , which are further sent to create corresponding container to create classifers and service function forwarders and configuration setting to create corresponding service function.</p>
<p>The service function chain information is described by a JSON format file re</p>
<h1 id="ibe-pki">IBE PKI</h1>
<p>The proposed OMS is built on top of Identity Based Encrption, and thus requires an IBE Public key infrastructure. We developped such a PKI with PBC, PyPBC (a Python binding for PBC) and Python Flask web framework. In such a PKI, a master server listening an occupied TCP port is in charge of receiving service function chain information (identities of each involved service function, their connnection order) and cryptography setting (elliptic curve type, key size, etc.). Once that OMS related parameters, such as pairing function, public key, etc, verification parameters in Eq.(5.1), Eq.(5.2), Eq.(5.6), Eq.(5.7), Eq.(5.8). Once these information is ready, master server proactively send them to each involved service functions.</p>
<h1 id="design-of-nsh-and-oms-aware-service-function">Design of NSH and OMS aware service function</h1>
<p>The proposed idea requires service functions capable of parsing NSH header and inserting, updating and removing OMS signature into transmitted packet. SFC community provides an open source NSH-aware service function implementation provide service function types such as such as firewall, NAT, IDS, etc. The main difficulty to extend these service functions into NSH and OMS aware ones is how to put generated signature (according to the construction methodology in Sec.5.3) into packet. A intuitive solution is to carry the signature into metadata field of NSH header. Recall that NSH has two types: type 1 and type 2. Type 1 has a fixed length of 16 bytes, whose capactiy is not enough to carray secure signature. Athough NSH type 2 header provi a variable length, theoretically able to carray OMS signature, it is yet implemented. Moreever, the metadata is designed to carry some shared information by service function in data center.</p>
<p>We proposed to use NSH type 1 to carry signature. The idea is to insert signature between NSH header and the its orignal payload. The signature size is stored by each service function at the inital stage. The first signer of a given chain is in charge of generating and inserting this signature. The last service function on a chain, is in charge first do the last time signature generation, and then do the verification. To this end, each node should know if it is the first node or last node on a given chain (indicated by field SP and SI). The SI of first node and last node can be derived from JSON file describing service function chain. In our design, the workflow of an NSH and OMS aware service function is illustrated in Fig. XX.</p>
<h1 id="impl.">Impl.</h1>
<p>Recall that our proposal is aimed to check if the consistency of a given SFC chain is guaranteed. Once man-in-the-middle attacks happens, if any packet transmitted after the occurence of attack is sent alongside the SFP, the anormaly can be detected at receiver because the signature verification is failed. Thus, we don't need to sign and verify every packet over the given SFP. Instead, we can let NSH and OMS aware SF sign and verify the packet in a probabilisic way. Concretely, at the initialisation stage (i.e. establishment of SFC and key distribution), a threshold value <span class="math inline">\(p\)</span>, in range [0,1] will be sent to the evolved SF alongside with other OMS paramters. In the first SF, namely the first signer of a SFP, it randomly select a value in [0,1] according to uniform distribution and compare it with previously stored threshold, to determine if it should signer the received packet. This probabilistic schema avoid high signature related latency at the cost of some latency to detect the attack. How to efficently use the proposed schema, concretely speaking, how to rationaly choose threshold value, to get a trade off between lower transmission overhead and higher attack sensitivity, is left to a future work. How to choose the threshold value is the job of network administrator. For network service with intensive packet exchange, such as video streaming, big file download, this value can be set as small as 0.1%. For network service such as smart metering that may upload a message per hour even per day, this value can be set as 1.</p>
<h2 id="现阶段任务">现阶段任务：</h2>
<p>1） 创建一个 shell script, 这个script要可以杀掉container中的某个进程同时重新启动该进程 这脚本叫做 lite_run_demo.sh 2） 创建一个建议版本的setup_sfc.py</p>
<h1 id="重大喜讯">重大喜讯：</h1>
<p>之前发送HTTP request虽然会成功但是要等好久。这个问题在社区邮件的帮助下，终于被解决了！ 思路是需要关闭tx offload功能，做法是在容器<code>sf1</code>以及容器<code>sf2</code>里，分别输入: <figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">ethtool</span> --offload  eth<span class="number">0</span>  rx <span class="literal">off</span>  tx <span class="literal">off</span></span><br></pre></td></tr></table></figure> 在容器<code>sf2</code>中输入: 我在vagrant虚拟机也做了操作 <figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">ethtool</span> --offload docker<span class="number">0</span>  rx <span class="literal">off</span>  tx <span class="literal">off</span></span><br></pre></td></tr></table></figure> 目前不知道是，这两条指令一起作用，还是只需要在容器里操作就行。</p>
<h1 id="关于-sfc-py-的探索">关于 sfc-py 的探索</h1>
<h2 id="sfc-agent.py">sfc-agent.py</h2>
<p>这实际上是启动了一个 RESTFul server, 跟 HTTP server 及其相似，都是可以接受REST Request(put/get action), 区别在于 sfc-agent.py 启动的 server 监听的其实是 ODL相关的端口，默认是 5000.</p>
<h2 id="sfccommonservices.py">sfc/common/services.py</h2>
<p>接受，处理，转发 packet！！ 这个脚本里但凡有异常发生，就无法 HTTP client 就无法 联系到 HTTP server了！！！</p>
<h1 id="python3中-str-bytes-bytesarray-网络数据转换">python3中 str, bytes, bytesarray 网络数据转换</h1>
<p>从网络数据包中得到的数据其实是个 bytes. 长得很像是str, 但是并不是！！！ 看看这个帖子 https://learning-python.com/strings30.html</p>
<h1 id="ovs-push-nsh操作导致的checksum问题">ovs push-nsh操作导致的checksum问题</h1>
<p>问题描述: 在同一个主机内创建虚拟机以创建 service chain 的时候，虽然最终包会发送成功但是延时特比大，因为checksum问题</p>
<p>在实验开始之前 vagrant based VM 网卡的情况： <figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">vagrant</span>@odl:~$ ip addr</span><br><span class="line"><span class="attribute">1</span>: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu <span class="number">65536</span> qdisc noqueue state UNKNOWN group default qlen <span class="number">1</span></span><br><span class="line">    <span class="attribute">link</span>/loopback <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> brd <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span></span><br><span class="line">    <span class="attribute">inet</span> <span class="number">127.0.0.1</span>/<span class="number">8</span> scope host lo</span><br><span class="line">       <span class="attribute">valid_lft</span> forever preferred_lft forever</span><br><span class="line"><span class="attribute">2</span>: eth<span class="number">0</span>: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu <span class="number">1500</span> qdisc pfifo_fast state UP group default qlen <span class="number">1000</span></span><br><span class="line">    <span class="attribute">link</span>/ether <span class="number">08</span>:<span class="number">00</span>:<span class="number">27</span>:<span class="number">0</span>b:<span class="number">11</span>:<span class="number">28</span> brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    <span class="attribute">inet</span> <span class="number">10.0.2.15</span>/<span class="number">24</span> brd <span class="number">10.0.2.255</span> scope global eth<span class="number">0</span></span><br><span class="line">       <span class="attribute">valid_lft</span> forever preferred_lft forever</span><br><span class="line"><span class="attribute">3</span>: docker<span class="number">0</span>: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu <span class="number">1500</span> qdisc noqueue state DOWN group default</span><br><span class="line">    <span class="attribute">link</span>/ether <span class="number">02</span>:<span class="number">42</span>:<span class="number">2</span>a:a<span class="number">0</span>:ee:b<span class="number">6</span> brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    <span class="attribute">inet</span> <span class="number">172.17.0.1</span>/<span class="number">16</span> brd <span class="number">172.17.255.255</span> scope global docker<span class="number">0</span></span><br><span class="line">       <span class="attribute">valid_lft</span> forever preferred_lft forever</span><br></pre></td></tr></table></figure></p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">1</span>: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu <span class="number">65536</span> qdisc noqueue state UNKNOWN group default qlen <span class="number">1</span></span><br><span class="line">    <span class="attribute">link</span>/loopback <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> brd <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span></span><br><span class="line">    <span class="attribute">inet</span> <span class="number">127.0.0.1</span>/<span class="number">8</span> scope host lo</span><br><span class="line">       <span class="attribute">valid_lft</span> forever preferred_lft forever</span><br><span class="line"><span class="attribute">2</span>: eth<span class="number">0</span>: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu <span class="number">1500</span> qdisc pfifo_fast state UP group default qlen <span class="number">1000</span></span><br><span class="line">    <span class="attribute">link</span>/ether <span class="number">08</span>:<span class="number">00</span>:<span class="number">27</span>:<span class="number">0</span>b:<span class="number">11</span>:<span class="number">28</span> brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    <span class="attribute">inet</span> <span class="number">10.0.2.15</span>/<span class="number">24</span> brd <span class="number">10.0.2.255</span> scope global eth<span class="number">0</span></span><br><span class="line">       <span class="attribute">valid_lft</span> forever preferred_lft forever</span><br><span class="line"><span class="attribute">3</span>: docker<span class="number">0</span>: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu <span class="number">1500</span> qdisc noqueue state UP group default</span><br><span class="line">    <span class="attribute">link</span>/ether <span class="number">02</span>:<span class="number">42</span>:<span class="number">2</span>a:a<span class="number">0</span>:ee:b<span class="number">6</span> brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    <span class="attribute">inet</span> <span class="number">172.17.0.1</span>/<span class="number">16</span> brd <span class="number">172.17.255.255</span> scope global docker<span class="number">0</span></span><br><span class="line">       <span class="attribute">valid_lft</span> forever preferred_lft forever</span><br><span class="line"><span class="attribute">4</span>: ovs-gretap<span class="number">0</span>@NONE: &lt;BROADCAST,MULTICAST&gt; mtu <span class="number">1462</span> qdisc noop state DOWN group default qlen <span class="number">1000</span></span><br><span class="line">    <span class="attribute">link</span>/ether <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> brd ff:ff:ff:ff:ff:ff</span><br><span class="line"><span class="attribute">5</span>: erspan<span class="number">0</span>@NONE: &lt;BROADCAST,MULTICAST&gt; mtu <span class="number">1450</span> qdisc noop state DOWN group default qlen <span class="number">1000</span></span><br><span class="line">    <span class="attribute">link</span>/ether b<span class="number">2</span>:<span class="number">63</span>:<span class="number">44</span>:<span class="number">84</span>:<span class="number">64</span>:<span class="number">73</span> brd ff:ff:ff:ff:ff:ff</span><br><span class="line"><span class="attribute">6</span>: ovs-ip<span class="number">6</span>gre<span class="number">0</span>@NONE: &lt;NOARP&gt; mtu <span class="number">1448</span> qdisc noop state DOWN group default qlen <span class="number">1</span></span><br><span class="line">    <span class="attribute">link</span>/gre<span class="number">6</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> brd <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span></span><br><span class="line"><span class="attribute">7</span>: ovs-ip<span class="number">6</span>tnl<span class="number">0</span>@NONE: &lt;NOARP&gt; mtu <span class="number">1452</span> qdisc noop state DOWN group default qlen <span class="number">1</span></span><br><span class="line">    <span class="attribute">link</span>/tunnel<span class="number">6</span> :: brd ::</span><br><span class="line"><span class="attribute">9</span>: br-ff<span class="number">8</span>a<span class="number">34</span>d<span class="number">3</span>f<span class="number">77</span>c: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu <span class="number">1500</span> qdisc noqueue state DOWN group default</span><br><span class="line">    <span class="attribute">link</span>/ether <span class="number">02</span>:<span class="number">42</span>:<span class="number">7</span>a:b<span class="number">9</span>:<span class="number">11</span>:<span class="number">45</span> brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    <span class="attribute">inet</span> <span class="number">192.168.1.5</span>/<span class="number">24</span> brd <span class="number">192.168.1.255</span> scope global br-ff<span class="number">8</span>a<span class="number">34</span>d<span class="number">3</span>f<span class="number">77</span>c</span><br><span class="line">       <span class="attribute">valid_lft</span> forever preferred_lft forever</span><br><span class="line"><span class="attribute">11</span>: veth<span class="number">1</span>c<span class="number">0</span>a<span class="number">779</span>@if<span class="number">10</span>: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu <span class="number">1500</span> qdisc noqueue master docker<span class="number">0</span> state UP group default</span><br><span class="line">    <span class="attribute">link</span>/ether ce:<span class="number">71</span>:<span class="number">48</span>:f<span class="number">1</span>:<span class="number">7</span>f:e<span class="number">4</span> brd ff:ff:ff:ff:ff:ff link-netnsid <span class="number">0</span></span><br></pre></td></tr></table></figure>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">1</span>: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu <span class="number">65536</span> qdisc noqueue state UNKNOWN group default qlen <span class="number">1</span></span><br><span class="line">    <span class="attribute">link</span>/loopback <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> brd <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span></span><br><span class="line">    <span class="attribute">inet</span> <span class="number">127.0.0.1</span>/<span class="number">8</span> scope host lo</span><br><span class="line">       <span class="attribute">valid_lft</span> forever preferred_lft forever</span><br><span class="line"><span class="attribute">2</span>: eth<span class="number">0</span>: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu <span class="number">1500</span> qdisc pfifo_fast state UP group default qlen <span class="number">1000</span></span><br><span class="line">    <span class="attribute">link</span>/ether <span class="number">08</span>:<span class="number">00</span>:<span class="number">27</span>:<span class="number">0</span>b:<span class="number">11</span>:<span class="number">28</span> brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    <span class="attribute">inet</span> <span class="number">10.0.2.15</span>/<span class="number">24</span> brd <span class="number">10.0.2.255</span> scope global eth<span class="number">0</span></span><br><span class="line">       <span class="attribute">valid_lft</span> forever preferred_lft forever</span><br><span class="line"><span class="attribute">3</span>: docker<span class="number">0</span>: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu <span class="number">1500</span> qdisc noqueue state DOWN group default</span><br><span class="line">    <span class="attribute">link</span>/ether <span class="number">02</span>:<span class="number">42</span>:<span class="number">2</span>a:a<span class="number">0</span>:ee:b<span class="number">6</span> brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    <span class="attribute">inet</span> <span class="number">172.17.0.1</span>/<span class="number">16</span> brd <span class="number">172.17.255.255</span> scope global docker<span class="number">0</span></span><br><span class="line">       <span class="attribute">valid_lft</span> forever preferred_lft forever</span><br><span class="line"><span class="attribute">4</span>: ovs-gretap<span class="number">0</span>@NONE: &lt;BROADCAST,MULTICAST&gt; mtu <span class="number">1462</span> qdisc noop state DOWN group default qlen <span class="number">1000</span></span><br><span class="line">    <span class="attribute">link</span>/ether <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> brd ff:ff:ff:ff:ff:ff</span><br><span class="line"><span class="attribute">5</span>: erspan<span class="number">0</span>@NONE: &lt;BROADCAST,MULTICAST&gt; mtu <span class="number">1450</span> qdisc noop state DOWN group default qlen <span class="number">1000</span></span><br><span class="line">    <span class="attribute">link</span>/ether b<span class="number">2</span>:<span class="number">63</span>:<span class="number">44</span>:<span class="number">84</span>:<span class="number">64</span>:<span class="number">73</span> brd ff:ff:ff:ff:ff:ff</span><br><span class="line"><span class="attribute">6</span>: ovs-ip<span class="number">6</span>gre<span class="number">0</span>@NONE: &lt;NOARP&gt; mtu <span class="number">1448</span> qdisc noop state DOWN group default qlen <span class="number">1</span></span><br><span class="line">    <span class="attribute">link</span>/gre<span class="number">6</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> brd <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span></span><br><span class="line"><span class="attribute">7</span>: ovs-ip<span class="number">6</span>tnl<span class="number">0</span>@NONE: &lt;NOARP&gt; mtu <span class="number">1452</span> qdisc noop state DOWN group default qlen <span class="number">1</span></span><br><span class="line">    <span class="attribute">link</span>/tunnel<span class="number">6</span> :: brd ::</span><br><span class="line"><span class="attribute">9</span>: br-ff<span class="number">8</span>a<span class="number">34</span>d<span class="number">3</span>f<span class="number">77</span>c: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu <span class="number">1500</span> qdisc noqueue state UP group default</span><br><span class="line">    <span class="attribute">link</span>/ether <span class="number">02</span>:<span class="number">42</span>:<span class="number">7</span>a:b<span class="number">9</span>:<span class="number">11</span>:<span class="number">45</span> brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    <span class="attribute">inet</span> <span class="number">192.168.1.5</span>/<span class="number">24</span> brd <span class="number">192.168.1.255</span> scope global br-ff<span class="number">8</span>a<span class="number">34</span>d<span class="number">3</span>f<span class="number">77</span>c</span><br><span class="line">       <span class="attribute">valid_lft</span> forever preferred_lft forever</span><br><span class="line"><span class="attribute">15</span>: veth<span class="number">674</span>a<span class="number">731</span>@if<span class="number">14</span>: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu <span class="number">1500</span> qdisc noqueue master br-ff<span class="number">8</span>a<span class="number">34</span>d<span class="number">3</span>f<span class="number">77</span>c state UP group default</span><br><span class="line">    <span class="attribute">link</span>/ether <span class="number">96</span>:<span class="number">50</span>:<span class="number">59</span>:<span class="number">81</span>:<span class="number">9</span>e:<span class="number">1</span>a brd ff:ff:ff:ff:ff:ff link-netnsid <span class="number">2</span></span><br><span class="line"><span class="attribute">17</span>: veth<span class="number">6</span>d<span class="number">4196</span>c@if<span class="number">16</span>: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu <span class="number">1500</span> qdisc noqueue master br-ff<span class="number">8</span>a<span class="number">34</span>d<span class="number">3</span>f<span class="number">77</span>c state UP group default</span><br><span class="line">    <span class="attribute">link</span>/ether <span class="number">3</span>e:<span class="number">12</span>:<span class="number">4</span>a:<span class="number">9</span>f:b<span class="number">6</span>:d<span class="number">7</span> brd ff:ff:ff:ff:ff:ff link-netnsid <span class="number">4</span></span><br><span class="line"><span class="attribute">19</span>: vetha<span class="number">350</span>c<span class="number">67</span>@if<span class="number">18</span>: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu <span class="number">1500</span> qdisc noqueue master br-ff<span class="number">8</span>a<span class="number">34</span>d<span class="number">3</span>f<span class="number">77</span>c state UP group default</span><br><span class="line">    <span class="attribute">link</span>/ether c<span class="number">6</span>:df:c<span class="number">1</span>:f<span class="number">6</span>:<span class="number">5</span>d:<span class="number">09</span> brd ff:ff:ff:ff:ff:ff link-netnsid <span class="number">1</span></span><br><span class="line"><span class="attribute">21</span>: vethd<span class="number">84</span>d<span class="number">1</span>f<span class="number">8</span>@if<span class="number">20</span>: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu <span class="number">1500</span> qdisc noqueue master br-ff<span class="number">8</span>a<span class="number">34</span>d<span class="number">3</span>f<span class="number">77</span>c state UP group default</span><br><span class="line">    <span class="attribute">link</span>/ether d<span class="number">2</span>:<span class="number">7</span>a:f<span class="number">2</span>:<span class="number">6</span>e:<span class="number">7</span>b:<span class="number">67</span> brd ff:ff:ff:ff:ff:ff link-netnsid <span class="number">3</span></span><br><span class="line"><span class="attribute">23</span>: vethc<span class="number">20</span>c<span class="number">33</span>c@if<span class="number">22</span>: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu <span class="number">1500</span> qdisc noqueue master br-ff<span class="number">8</span>a<span class="number">34</span>d<span class="number">3</span>f<span class="number">77</span>c state UP group default</span><br><span class="line">    <span class="attribute">link</span>/ether e<span class="number">2</span>:bd:<span class="number">03</span>:<span class="number">8</span>b:c<span class="number">8</span>:<span class="number">1</span>f brd ff:ff:ff:ff:ff:ff link-netnsid <span class="number">5</span></span><br><span class="line"><span class="attribute">25</span>: veth<span class="number">58754</span>f<span class="number">3</span>@if<span class="number">24</span>: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu <span class="number">1500</span> qdisc noqueue master br-ff<span class="number">8</span>a<span class="number">34</span>d<span class="number">3</span>f<span class="number">77</span>c state UP group default</span><br><span class="line">    <span class="attribute">link</span>/ether ae:fc:e<span class="number">0</span>:<span class="number">04</span>:<span class="number">28</span>:<span class="number">46</span> brd ff:ff:ff:ff:ff:ff link-netnsid <span class="number">0</span></span><br></pre></td></tr></table></figure>
<p>在 docker-compos 之后，我们发现多了一个docker netwwork <code>vagrant_sfc103_mgmt</code> <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">vagrant<span class="variable">@odl</span>:<span class="operator">~</span>$ docker network ls</span><br><span class="line">NETWORK ID          NAME                  DRIVER              <span class="keyword">SCOPE</span></span><br><span class="line">b5886910b27e        bridge                bridge              <span class="keyword">local</span></span><br><span class="line"><span class="number">77</span>a1ac9dcff2        host                  host                <span class="keyword">local</span></span><br><span class="line"><span class="number">0950370</span>f3d6f        <span class="keyword">none</span>                  <span class="keyword">null</span>                <span class="keyword">local</span></span><br><span class="line">ff8a34d3f77c        vagrant_sfc103_mgmt   bridge              <span class="keyword">local</span></span><br></pre></td></tr></table></figure></p>
<h1 id="apt-get-update-stuck-at-0-percent">apt-get update stuck at 0 percent</h1>
<p>https://medium.com/<span class="citation" data-cites="lifez/solved-apt-get-update-stuck-connecting-to-security-ubuntu-com-dbe41eeb5a0b">@lifez/solved-apt-get-update-stuck-connecting-to-security-ubuntu-com-dbe41eeb5a0b</span></p>
<p>我不知道具体原因，但是一定是跟学校网络设置有关 <code>generic/ubuntu1604</code> 的源就是没有办法连接ubuntu 16.04的软件仓库</p>
<p>I tried to check the DNS configuration of my Ubuntu server, deployed within school's network.vagrant@odl:~$ <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> cat /etc/resolv.conf</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Dynamic resolv.conf(5) file <span class="keyword">for</span> glibc resolver(3) generated by resolvconf(8)</span></span><br><span class="line"><span class="meta">#</span><span class="bash">     DO NOT EDIT THIS FILE BY HAND -- YOUR CHANGES WILL BE OVERWRITTEN</span></span><br><span class="line">nameserver 4.2.2.1</span><br><span class="line">nameserver 4.2.2.2</span><br><span class="line">nameserver 208.67.220.220</span><br><span class="line">search imtld.local</span><br></pre></td></tr></table></figure></p>
<p>IP address such as <code>4.2.2.1</code> is reachable by ping command. However, I don't know why DNS function does not work. One thing I can make sure is, this error is due to the fact that my Ubuntu server works behind school's proxy, because within my home network, this error does not exist.</p>
<p>A working around I found is to add the following command in Vagrant file: <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;nameserver 10.0.2.3&quot; | sudo tee /etc/resolv.conf</span><br></pre></td></tr></table></figure> With this command, you will see the content of initial <code>/etc/resolv.conf</code> will be replaced by <code>nameserver 10.0.2.3</code>.</p>
<p>In NAT networking mode of Virtualbox, each VM is isolated. VM can access host, but host cannot access VM unless if you configure port forwarding.</p>
<ul>
<li>IP:10.0.2.15</li>
<li>Gateway：10.0.2.2</li>
<li>DNS server: 10.0.2.3</li>
</ul>
<h1 id="failed-to-fetch-ubuntukylin-in-host-ubuntu-environment">Failed to fetch ubuntukylin in host Ubuntu environment</h1>
<p>Failed to fetch http://archive.ubuntukylin.com:10006/ubuntukylin/dists/xenial/InRelease 因为 Host Ubuntu 16.04 安装了搜狗输入法，所以需要用到 ubuntukylin. 为了防止不必要的麻烦。 进入系统设置－软件更新－其他软件，找到ubuntukylin的项目，点击编辑，把precise改成trusty，把non-free改成main</p>
<h1 id="各种奇葩错误居然独独缺少了-classifier1">各种奇葩错误：居然独独缺少了 classifier1:</h1>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">vagrant</span>@odl:~$ docker container ls</span><br><span class="line"><span class="attribute">CONTAINER</span> ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line"><span class="attribute">a6c8b387fac4</span>        sfc-service-node    <span class="string">&quot;/app/start.sh&quot;</span>     <span class="number">47</span> seconds ago      Up <span class="number">45</span> seconds                           sff<span class="number">2</span></span><br><span class="line"><span class="attribute">fed2b6d2aab0</span>        sfc-service-node    <span class="string">&quot;/app/start.sh&quot;</span>     <span class="number">47</span> seconds ago      Up <span class="number">46</span> seconds                           classifier<span class="number">2</span></span><br><span class="line"><span class="attribute">e42ee4b0a36d</span>        sfc-service-node    <span class="string">&quot;/app/start.sh&quot;</span>     <span class="number">47</span> seconds ago      Up <span class="number">45</span> seconds                           sff<span class="number">1</span></span><br><span class="line"><span class="attribute">4bfb58d272e8</span>        sfc-service-node    <span class="string">&quot;/app/start.sh&quot;</span>     <span class="number">47</span> seconds ago      Up <span class="number">46</span> seconds                           sf<span class="number">1</span></span><br><span class="line"><span class="attribute">0166b549fa07</span>        sfc-service-node    <span class="string">&quot;/app/start.sh&quot;</span>     <span class="number">47</span> seconds ago      Up <span class="number">46</span> seconds                           sf<span class="number">2</span></span><br></pre></td></tr></table></figure>
<p>邪门了啊 为啥就是classifier1没有被创建！！从来没有发生过啊！！！ 但是换了 vagrant 的源就没有这种问题！！这都是什么奇葩事儿！！！</p>
<p>这应该还是跟 vagrant 创建的虚拟机无法正常使用 DNS 服务有关？？？</p>
<h1 id="操蛋了">操蛋了。</h1>
<p>sudo add-apt-repository ppa:webupd8team/java -y 这个java安装源居然出了问题。。。what's the fuck... 从2019年04月16号变得</p>
<p>试试Java11是否可以 https://www.linuxuprising.com/2018/10/how-to-install-oracle-java-11-in-ubuntu.html</p>
<h1 id="sf1sf2-容器居然无法启动">sf1,sf2 容器居然无法启动！！！</h1>
<p>This post saves me! https://www.matthewsetter.com/basic-docker-compose-debugging/</p>
<p>Thanks a lot. 即使我删了虚拟机，从头来过都不行！！！那这说明这应该跟镜像有关？？？ 网上搜到了下面这个命令: <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">vagrant@odl:/vagrant$ docker-compose ps</span><br><span class="line">   Name          Command      State    Ports</span><br><span class="line">--------------------------------------------</span><br><span class="line">classifier1   /app/start.sh   Up</span><br><span class="line">classifier2   /app/start.sh   Up</span><br><span class="line">sf1           /app/start.sh   Exit 1</span><br><span class="line">sf2           /app/start.sh   Exit 1</span><br><span class="line">sff1          /app/start.sh   Up</span><br><span class="line">sff2          /app/start.sh   Up</span><br></pre></td></tr></table></figure></p>
<p>然后输入如下命令 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">vagrant@odl:/vagrant$ docker-compose logs --follow sf1</span><br><span class="line">Attaching to sf1</span><br><span class="line">sf1            | ++ hostname</span><br><span class="line">sf1            | + host=sf1</span><br><span class="line">sf1            | + &#x27;[&#x27; sf1 == classifier1 &#x27;]&#x27;</span><br><span class="line">sf1            | + &#x27;[&#x27; sf1 == classifier2 &#x27;]&#x27;</span><br><span class="line">sf1            | + &#x27;[&#x27; sf1 == sff1 &#x27;]&#x27;</span><br><span class="line">sf1            | + &#x27;[&#x27; sf1 == sff2 &#x27;]&#x27;</span><br><span class="line">sf1            | + &#x27;[&#x27; sf1 == sf1 &#x27;]&#x27;</span><br><span class="line">sf1            | + cd /sfc/sfc-py</span><br><span class="line">sf1            | ++ cat /pbc/param/a_test.param</span><br><span class="line">sf1            | cat: /pbc/param/a_test.param: No such file or directory</span><br><span class="line">sf1            | + sec_param_str=</span><br><span class="line">sf1            | ++ hostname</span><br><span class="line">sf1            | + host=sf1</span><br><span class="line">sf1            | + &#x27;[&#x27; sf1 == classifier1 &#x27;]&#x27;</span><br><span class="line">sf1            | + &#x27;[&#x27; sf1 == classifier2 &#x27;]&#x27;</span><br><span class="line">sf1            | + &#x27;[&#x27; sf1 == sff1 &#x27;]&#x27;</span><br><span class="line">sf1            | + &#x27;[&#x27; sf1 == sff2 &#x27;]&#x27;</span><br><span class="line">sf1            | + &#x27;[&#x27; sf1 == sf1 &#x27;]&#x27;</span><br><span class="line">sf1            | + cd /sfc/sfc-py</span><br><span class="line">sf1            | ++ cat /pbc/param/a_test.param</span><br><span class="line">sf1            | cat: /pbc/param/a_test.param: No such file or directory</span><br><span class="line">sf1            | + sec_param_str=</span><br><span class="line">sf1 exited with code 1</span><br></pre></td></tr></table></figure> 某次代码问题，导致虚拟机crash之后，重新启动VM, 重新创建container又遇到了类似问题，这次的故障是: <figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">sf1            | <span class="type">++ hostname</span></span><br><span class="line">sf1            | <span class="type">+ host</span>=sf1</span><br><span class="line">sf1            | <span class="type">+ &#x27;[&#x27; sf1</span> == classifier1 &#x27;]&#x27;</span><br><span class="line">sf1            | <span class="type">+ &#x27;[&#x27; sf1</span> == classifier2 &#x27;]&#x27;</span><br><span class="line">sf1            | <span class="type">+ &#x27;[&#x27; sf1</span> == sff1 &#x27;]&#x27;</span><br><span class="line">sf1            | <span class="type">+ &#x27;[&#x27; sf1</span> == sff2 &#x27;]&#x27;</span><br><span class="line">sf1            | <span class="type">+ &#x27;[&#x27; sf1</span> == sff3 &#x27;]&#x27;</span><br><span class="line">sf1            | <span class="type">+ &#x27;[&#x27; sf1</span> == sff4 &#x27;]&#x27;</span><br><span class="line">sf1            | <span class="type">+ &#x27;[&#x27; sf1</span> == sf1 &#x27;]&#x27;</span><br><span class="line">sf1            | <span class="type">+ cd</span> /sfc/sfc-py</span><br><span class="line">sf1            | <span class="type">+ pip3</span> install -r requirements.txt</span><br><span class="line">sf1            | <span class="type">Collecting</span> ecdsa==<span class="number">0.13</span> (from -r requirements.txt (line <span class="number">1</span>))</span><br><span class="line">sf1            | <span class="type">Exception</span>:</span><br><span class="line">sf1            | <span class="type">Traceback</span> (most recent call last):</span><br><span class="line">sf1            |   <span class="type">File</span> <span class="string">&quot;/usr/share/python-wheels/urllib3-1.13.1-py2.py3-none-any.whl/urllib3/connection.py&quot;</span>, line <span class="number">137</span>, <span class="built_in">in</span> _new_conn</span><br><span class="line">sf1            |     <span class="type">(self</span>.host, self.port), self.<span class="built_in">timeout</span>, **extra_kw)</span><br><span class="line">sf1            |   <span class="type">File</span> <span class="string">&quot;/usr/share/python-wheels/urllib3-1.13.1-py2.py3-none-any.whl/urllib3/util/connection.py&quot;</span>, line <span class="number">67</span>, <span class="built_in">in</span> create_connection</span><br><span class="line">sf1            |     <span class="type">for</span> res <span class="built_in">in</span> socket.getaddrinfo(host, port, <span class="number">0</span>, socket.SOCK_STREAM):</span><br><span class="line">sf1            |   <span class="type">File</span> <span class="string">&quot;/usr/lib/python3.5/socket.py&quot;</span>, line <span class="number">732</span>, <span class="built_in">in</span> getaddrinfo</span><br><span class="line">sf1            |     <span class="type">for</span> res <span class="built_in">in</span> _socket.getaddrinfo(host, port, family, type, proto, flags):</span><br><span class="line">sf1            | <span class="type">socket</span>.gaierror: [Errno <span class="number">-3</span>] Temporary failure <span class="built_in">in</span> name resolution</span><br><span class="line">sf1            |</span><br><span class="line"><span class="type">sf1</span>            | <span class="type">During</span> handling of the above exception, another exception occurred:</span><br><span class="line">sf1            |</span><br><span class="line"><span class="type">sf1</span>            | <span class="type">Traceback</span> (most recent call last):</span><br><span class="line">sf1            |   <span class="type">File</span> <span class="string">&quot;/usr/share/python-wheels/urllib3-1.13.1-py2.py3-none-any.whl/urllib3/connectionpool.py&quot;</span>, line <span class="number">560</span>, <span class="built_in">in</span> urlopen</span><br><span class="line">sf1            |     <span class="type">body</span>=body, headers=headers)</span><br><span class="line">sf1            |   <span class="type">File</span> <span class="string">&quot;/usr/share/python-wheels/urllib3-1.13.1-py2.py3-none-any.whl/urllib3/connectionpool.py&quot;</span>, line <span class="number">346</span>, <span class="built_in">in</span> _make_request</span><br><span class="line">sf1            |     <span class="type">self</span>._validate_conn(conn)</span><br><span class="line">sf1            |   <span class="type">File</span> <span class="string">&quot;/usr/share/python-wheels/urllib3-1.13.1-py2.py3-none-any.whl/urllib3/connectionpool.py&quot;</span>, line <span class="number">787</span>, <span class="built_in">in</span> _validate_conn</span><br><span class="line">sf1            |     <span class="type">conn</span>.connect()</span><br><span class="line">sf1            |   <span class="type">File</span> <span class="string">&quot;/usr/share/python-wheels/urllib3-1.13.1-py2.py3-none-any.whl/urllib3/connection.py&quot;</span>, line <span class="number">217</span>, <span class="built_in">in</span> connect</span><br><span class="line">sf1            |     <span class="type">conn</span> = self._new_conn()</span><br><span class="line">sf1            |   <span class="type">File</span> <span class="string">&quot;/usr/share/python-wheels/urllib3-1.13.1-py2.py3-none-any.whl/urllib3/connection.py&quot;</span>, line <span class="number">146</span>, <span class="built_in">in</span> _new_conn</span><br><span class="line">sf1            |     <span class="type">self</span>, <span class="string">&quot;Failed to establish a new connection: %s&quot;</span> % e)</span><br><span class="line">sf1            | <span class="type">requests</span>.packages.urllib3.exceptions.NewConnectionError: &lt;requests.packages.urllib3.connection.VerifiedHTTPSConnection object <span class="built_in">at</span> <span class="number">0x7f5ffeef2668</span>&gt;: Failed to establish a new connection: [Errno <span class="number">-3</span>] Temporary failure <span class="built_in">in</span> name resolution</span><br></pre></td></tr></table></figure> 看起来像是网络问题啊。。。这都遇到的是啥奇葩事儿啊。。。原来原因还是跟VM的DNS server无法通过学校防火墙有关。/etc/resolv.conf 还是虚拟机模板之前的内容，我通过一个shell script改变为10.0.2.3并没生效</p>
<p>因为vagrant relaod (=vagrant halt + vagrant up) 默认并不是执行provisioner，而我改变/etc/resolv.conf的内容恰恰是通过shell script来做的。</p>
<h1 id="classifier1-cannot-be-correctly-launched">classifier1 cannot be correctly launched</h1>
<p>因为需要对 HTTP request (下载文件) 延时进行测试，所以需要通过编译源码安装 <code>httping</code> utility. 下载地址: https://github.com/flok99/httping 执行<code>make</code>命令时候，发现以下错误: <figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">classifier1    | # Oh, blatant plu<span class="variable">g:</span> http://www.vanheusden.<span class="keyword">com</span>/wishlist.php</span><br><span class="line">classifier1    | msgfmt -<span class="keyword">o</span> nl.mo nl.<span class="keyword">po</span></span><br><span class="line">classifier1    | <span class="keyword">make</span>: msgfm<span class="variable">t:</span> Command not found</span><br><span class="line">classifier1    | Makefile:<span class="number">135</span>: recipe <span class="keyword">for</span> target <span class="string">&#x27;nl.mo&#x27;</span> failed</span><br><span class="line">classifier1    | <span class="keyword">make</span>: *** [nl.mo] Error <span class="number">127</span></span><br><span class="line">classifier1 exited with code <span class="number">2</span></span><br></pre></td></tr></table></figure> https://stackoverflow.com/questions/9500898/compiler-error-msgfmt-command-not-found</p>
<p>发现原因是 <code>gettext</code>包的缺失。</p>

    </div>

    
    
    

      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2019/03/28/opnfv-sfc-tuto/" rel="prev" title="OPNFV SFC 实验笔记">
      <i class="fa fa-chevron-left"></i> OPNFV SFC 实验笔记
    </a></div>
      <div class="post-nav-item">
    <a href="/2019/04/01/vagrant-virtualbox-install/" rel="next" title="How to install VirtualBox and Vagrant under ubuntu 16.04">
      How to install VirtualBox and Vagrant under ubuntu 16.04 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#network-topology"><span class="nav-number">1.</span> <span class="nav-text">Network topology</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#ibe-pki"><span class="nav-number">2.</span> <span class="nav-text">IBE PKI</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#design-of-nsh-and-oms-aware-service-function"><span class="nav-number">3.</span> <span class="nav-text">Design of NSH and OMS aware service function</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#impl."><span class="nav-number">4.</span> <span class="nav-text">Impl.</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%8E%B0%E9%98%B6%E6%AE%B5%E4%BB%BB%E5%8A%A1"><span class="nav-number">4.1.</span> <span class="nav-text">现阶段任务：</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%87%8D%E5%A4%A7%E5%96%9C%E8%AE%AF"><span class="nav-number">5.</span> <span class="nav-text">重大喜讯：</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%85%B3%E4%BA%8E-sfc-py-%E7%9A%84%E6%8E%A2%E7%B4%A2"><span class="nav-number">6.</span> <span class="nav-text">关于 sfc-py 的探索</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#sfc-agent.py"><span class="nav-number">6.1.</span> <span class="nav-text">sfc-agent.py</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#sfccommonservices.py"><span class="nav-number">6.2.</span> <span class="nav-text">sfc&#x2F;common&#x2F;services.py</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#python3%E4%B8%AD-str-bytes-bytesarray-%E7%BD%91%E7%BB%9C%E6%95%B0%E6%8D%AE%E8%BD%AC%E6%8D%A2"><span class="nav-number">7.</span> <span class="nav-text">python3中 str, bytes, bytesarray 网络数据转换</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#ovs-push-nsh%E6%93%8D%E4%BD%9C%E5%AF%BC%E8%87%B4%E7%9A%84checksum%E9%97%AE%E9%A2%98"><span class="nav-number">8.</span> <span class="nav-text">ovs push-nsh操作导致的checksum问题</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#apt-get-update-stuck-at-0-percent"><span class="nav-number">9.</span> <span class="nav-text">apt-get update stuck at 0 percent</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#failed-to-fetch-ubuntukylin-in-host-ubuntu-environment"><span class="nav-number">10.</span> <span class="nav-text">Failed to fetch ubuntukylin in host Ubuntu environment</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%90%84%E7%A7%8D%E5%A5%87%E8%91%A9%E9%94%99%E8%AF%AF%E5%B1%85%E7%84%B6%E7%8B%AC%E7%8B%AC%E7%BC%BA%E5%B0%91%E4%BA%86-classifier1"><span class="nav-number">11.</span> <span class="nav-text">各种奇葩错误：居然独独缺少了 classifier1:</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%93%8D%E8%9B%8B%E4%BA%86"><span class="nav-number">12.</span> <span class="nav-text">操蛋了。</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#sf1sf2-%E5%AE%B9%E5%99%A8%E5%B1%85%E7%84%B6%E6%97%A0%E6%B3%95%E5%90%AF%E5%8A%A8"><span class="nav-number">13.</span> <span class="nav-text">sf1,sf2 容器居然无法启动！！！</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#classifier1-cannot-be-correctly-launched"><span class="nav-number">14.</span> <span class="nav-text">classifier1 cannot be correctly launched</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">rennsong</p>
  <div class="site-description" itemprop="description">Personal blog site, to note technique and life related articles</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">77</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">18</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">24</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">rennsong</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->




  















  

  

</body>
</html>
