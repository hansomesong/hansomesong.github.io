<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"rennesong.com","root":"/","scheme":"Mist","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Personal blog site, to note technique and life related articles">
<meta property="og:type" content="website">
<meta property="og:title" content="Rennesong&#39;s blog">
<meta property="og:url" content="http://rennesong.com/page/6/index.html">
<meta property="og:site_name" content="Rennesong&#39;s blog">
<meta property="og:description" content="Personal blog site, to note technique and life related articles">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="rennsong">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://rennesong.com/page/6/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>Rennesong's blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Rennesong's blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Blog my life from now on!</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://rennesong.com/2019/03/25/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="rennsong">
      <meta itemprop="description" content="Personal blog site, to note technique and life related articles">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Rennesong's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/03/25/hello-world/" class="post-title-link" itemprop="url">Hexo 安装，配置，使用以及更新基本命令以及 Markdown 基本语法</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-03-25 18:27:10" itemprop="dateCreated datePublished" datetime="2019-03-25T18:27:10+08:00">2019-03-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-06-09 22:14:49" itemprop="dateModified" datetime="2020-06-09T22:14:49+08:00">2020-06-09</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="hexo-4.2.1-安装">Hexo 4.2.1 安装</h1>
<h2 id="安装node.js">安装Node.js</h2>
<h1 id="the-must-to-know-command-of-hexo">The must-to-know command of Hexo</h1>
<h2 id="create-a-new-post">Create a new post</h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br><span class="line">$ hexo server</span><br><span class="line">$ hexo generate</span><br><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>Please refer to <a href="http://hexo.io/docs/writing.html" target="_blank" rel="noopener">hexo official webiste</a> for more information.</p>
<h1 id="latex-format-mathmatical-equations-in-hexo">LaTeX format mathmatical equations in Hexo</h1>
<p>This present personal blog is powered by <a href="https://theme-next.org/" target="_blank" rel="noopener"><code>next</code> theme</a>. Next has a good support for <code>Mathjax</code>.参考<a href="https://github.com/theme-next/hexo-theme-next/blob/master/docs/MATH.md" target="_blank" rel="noopener">链接</a>以获取更多信息(比如方程的编号问题)</p>
<h2 id="基础配置">基础配置</h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install eslint@4.x babel-eslint@8 --save</span><br></pre></td></tr></table></figure>
<p>同时对于添加脚注也是一样的，一开始不管怎么 <code>hexo clean &amp;&amp; hexo g</code> 都不工作，后来咋就突然好了呢？ 为了强制浏览器更新资源文件，可以采用’Ctrl+F5’来刷新。</p>
<h3 id="如何让插入图片居中">如何让插入图片居中？</h3>
<p>Markdown 没有提供居中图片或者文字的命令，但是 Markdown 支持嵌入的 HTML/CSS 语句。 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div style&#x3D;&quot;text-align:center&quot; markdown&#x3D;&quot;1&quot;&gt;</span><br><span class="line">![Alt Text](&#x2F;path&#x2F;to&#x2F;image &quot;Caption&quot;)</span><br><span class="line">&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure></p>
<h3 id="如何给插入的图片居中并且添加caption">如何给插入的图片居中并且添加caption?</h3>
<p>参加帖子: http://fantding.coding.me/2019/06/12/hexo%E4%B8%BA%E5%9B%BE%E7%89%87%E6%B7%BB%E5%8A%A0caption/</p>
<p>https://luodian.ink/2018-03-08/Next%E4%B8%BB%E9%A2%98%E4%B8%8B%E5%A6%82%E4%BD%95%E8%AE%A9%E5%9B%BE%E7%89%87%E8%87%AA%E5%8A%A8%E5%B1%85%E4%B8%AD/ 我只参考了博文中的第二点，就实现了图片居中的设置。</p>
<h2 id="hexo博客如何添加脚注footnote">Hexo博客如何添加脚注(footnote)?</h2>
<p>删除 Hexo 默认安装的 hexo-renderer-marked 模块， <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm un hexo-renderer-marked --save</span><br></pre></td></tr></table></figure> 安装 <code>hexo-renderer-markdown-it</code> 模块 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i hexo-renderer-markdown-it --save</span><br></pre></td></tr></table></figure> The following code snippet is one example: basic footnote<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a> here is an inline footnote[^2] (inline footnote) and another one<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a> and another one<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a></p>
<p>source:http://www.icms.org.uk/downloads/stocpro/Blaszczyszyn_2.pdf source:http://www.chriskrycho.com/2015/academic-markdown-and-citations.html, Academic Markdown and Citations</p>
<section class="footnotes">
<hr />
<ol>
<li id="fn1"><p>basic footnote content<a href="#fnref1" class="footnote-back">↩</a></p></li>
<li id="fn2"><p>paragraph<a href="#fnref2" class="footnote-back">↩</a></p></li>
<li id="fn3"><p>footnote content with some <a href="https://en.wikipedia.org/wiki/Markdown" target="_blank" rel="noopener">markdown</a><a href="#fnref3" class="footnote-back">↩</a></p></li>
</ol>
</section>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://rennesong.com/2019/03/25/docker-tuto/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="rennsong">
      <meta itemprop="description" content="Personal blog site, to note technique and life related articles">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Rennesong's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/03/25/docker-tuto/" class="post-title-link" itemprop="url">A brief and concise Docker tutorial</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-03-25 11:21:48" itemprop="dateCreated datePublished" datetime="2019-03-25T11:21:48+08:00">2019-03-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-06-09 21:39:37" itemprop="dateModified" datetime="2020-06-09T21:39:37+08:00">2020-06-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/docker/" itemprop="url" rel="index"><span itemprop="name">docker</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="docker-以及容器">Docker 以及容器</h1>
<p>我们往往会把容器和docker这两个词混为一谈。仔细说来，容器其实指的更多是 Linux container (LXC)技术，LXC 核心的技术是 namespace以及Cgroups。Docker是一家专注于在LXC技术基础上推出更容易管理使用容器技术的公司，Docker同时也是该公司推出的容器引擎。</p>
<p>说到容器技术，也不是什么新技术，只是非常的小众。然而, 随着2013年3月 dotcloud 公司推出了一项新的容器技术 Docker。Docker的出现，降低了容器技术使用的门槛，带来了无可比拟的优势，所以迅速在IT行业内普及。</p>
<p>docker教程整理:https://www.jianshu.com/p/4b808c2341bd</p>
<p>Docker 是基于容器技术的轻量级虚拟化技术。其虚拟化技术是基于内核的Cgroup以及Namespace技术。处理逻辑与内核深度融合，所以在很多方面，性能与物理机非常接近。通信上，Docker并不会直接和内核交互，它是通过一个更底层的工具libcontainer与内核交互的。Libcontainer是真正意义上的容器引擎。它通过clone系统调用直接创建容器，通过<code>pivot_root</code> system call 进入容器，且通过直接操作<code>cgroupfs</code>文件实现对资源的管控，而docker本身则侧重于处理更上层的业务。</p>
<h1 id="层级镜像的概念">层级镜像的概念</h1>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -ti -v $PWD:&#x2F;traces --net container:classifier1 nicolaka&#x2F;netshoot tcpdump –i eth0 -w &#x2F;traces&#x2F;sfc103demo.pcap</span><br></pre></td></tr></table></figure>
<p>一些说明: * <code>-v $PWD:/traces</code>: mount current working directory on host machine as <code>traces</code> folder under root directory of target container. Please refer to <a href="https://docs.docker.com/storage/volumes/" target="_blank" rel="noopener">Docker’s guide to Volumes</a> for more information. It is also possible specify volume mount without specifying location of source folder in host machine by syntax such as <code>-v /traces</code>. Command <code>docker inspect &lt;container_name&gt;</code> allows to check the source file in host machine corresponding to volume mounted in container. * <code>--net container:classifier1</code>: monitor a certain container. Rememer to replace <code>classifier1</code> with regard to your need. * <code>nicolaka/netshoot</code> is a very powerful network troubleshooting docker image. Refer to <a href="https://github.com/nicolaka/netshoot" target="_blank" rel="noopener">nicolaka/netshoot</a> for more details. * <code>tcpdump –i eth0 -w /traces/sfc103demo.pcap</code> is actually how to use tcpdump command: - <code>–i eth0</code>: listen for interface <code>eth0</code> - <code>-w /traces/sfc103demo.pcap</code>: output monitored traffic to a PCAP file.</p>
<p><a href="https://medium.com/the-code-review/top-10-docker-run-command-options-you-cant-live-without-a-reference-d256834e86c1" target="_blank" rel="noopener">Top 10 options for docker run</a> # Volume in container Container 内部数据持久化的问题 =&gt; 解决之道: data volume 机制 3 options are available in docker: * bind mount * volume * tmpfs mount</p>
<p>Among them,volumes are the preferred mechanism for persisting data generated by and used by Docker containers. While bind mounts are dependent on the directory structure of the host machine, volumes are completely managed by Docker. Volumes have several advantages over bind mounts</p>
<h1 id="run-script-within-a-dockerfile">Run script within a Dockerfile</h1>
<p>A short but nice explanation: https://stackoverflow.com/questions/34549859/run-a-script-in-dockerfile</p>
<h1 id="kill-all-containers-in-a-command-line">Kill all containers in a command line</h1>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker container ls | awk &#39;&#123;if (NR&gt;1) print $1&#125;&#39; | xargs docker kill</span><br></pre></td></tr></table></figure>
<h1 id="rootless-docker-usage">Rootless docker usage</h1>
<p>今天发现一个很奇怪的现象：通过创建用户组<code>docker</code>并添加自己账户之后， 通过SSH链接的qsong账户，可以无sudo执行docker命令，然而通过teamviewer访问(等同于直接在host上操作)，却依然要求sudo. 这个问题困扰了我许久，下午突然灵光一现，想到了原因：通过创建用户组<code>docker</code>并添加自己账户之后，需要退出重新登录. 我在host上并没有执行log out then log in的操作。</p>
<h1 id="docker无法使用本地dns服务">Docker无法使用本地DNS服务</h1>
<p>参考： 1. https://medium.com/<span class="citation" data-cites="faithfulanere/solved-docker-build-could-not-resolve-archive-ubuntu-com-apt-get-fails-to-install-anything-9ea4dfdcdcf2">@faithfulanere/solved-docker-build-could-not-resolve-archive-ubuntu-com-apt-get-fails-to-install-anything-9ea4dfdcdcf2</span> 2. https://github.com/moby/moby/issues/23910 3. https://stackoverflow.com/questions/39400886/docker-cannot-resolve-dns-on-private-network</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker run busybox nslookup www.google.com</span><br><span class="line">;; connection timed out; no servers could be reached</span><br></pre></td></tr></table></figure>
<p>出现这种现象的原因是：当docker进程检测到主机使用的DNS服务器地址为本机环路地址，即（<code>127.0.0.1</code>）,它会转而使用谷歌的公共DNS服务，即<code>8.8.8.8</code>. 然而不幸的是，有些公司/学校是禁止使用外部公共DNS服务的. 所以，最终<code>docker</code>无法使用DNS服务，导致出现一系列问题。</p>
<p>解决办法：</p>
<ul>
<li>Adding a <code>/etc/docker/daemon.json</code> that passed in the docker0 bridge IP as a DNS server =&gt; 应该是把host实际使用的DNS地址存放进去, 而且如果要设定的机器需要经常性地</li>
<li>Adding a /etc/NetworkManager/dnsmasq.d/docker-bridge.conf file that directs the NM-managed DNS cache to listen to the docker0 bridge IP as well as <code>127.0.1.1</code></li>
<li>docker build --network=host -t my-image-name 运行容器的时候，采用和host一样的网络协议栈，但是缺乏足够的隔离性，有安全隐患</li>
</ul>
<p>Now container DNS lookups go through your local dnsmasq instance, so DNS in the container should work just as well as DNS on the host.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cat &#x2F;etc&#x2F;resolv.conf</span><br><span class="line"># Dynamic resolv.conf(5) file for glibc resolver(3) generated by resolvconf(8)</span><br><span class="line">#     DO NOT EDIT THIS FILE BY HAND -- YOUR CHANGES WILL BE OVERWRITTEN</span><br><span class="line">nameserver 127.0.1.1</span><br><span class="line">search imtld.local</span><br></pre></td></tr></table></figure>
<p>我们会发现dns服务器为<code>127.0.1.1</code>，记住不是<code>127.0.0.1</code>!好奇葩的一个地址. 原来ubuntu下有一个本地的dns服务叫做<code>dnsmasq</code>，它是由<code>NetworkManager</code>控制的. 它监听的本地地址，<code>--listen-address=127.0.1.1</code> (ubuntu12.04及之前的版本是 127.0.0.1), 这个地址是一个本地回环地址,而你真实的dns服务器地址，是被这个服务管理维护着的 由一张图表示就是： <code>local process -&gt; local dnsmasq -&gt; router -&gt; ISP dns</code> 问题是：为什么<code>dnsmasq</code>不接受来自container的请求呢？</p>
<p>我们发现，在学校内网中，即使显示地要求docker采用谷歌提供的DNS服务器地址，DNS请求依然无法被解析。 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker run --dns 8.8.8.8  busybox nslookup www.google.com</span><br><span class="line">;; connection timed out; no servers could be reached</span><br></pre></td></tr></table></figure> 我之后试着<code>ping 8.8.8.8</code>，发现有回复，这说明，虽然我可以ping通谷歌公共DNS服务器，然而学校的网络配置却禁止我使用外部DNS，为什么呢？</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$:nmcli dev show | grep IP4.DNS</span><br><span class="line">IP4.DNS[1]:                             10.59.130.129</span><br><span class="line">IP4.DNS[2]:                             10.59.130.130</span><br></pre></td></tr></table></figure>
<p>注意：<code>nmcli</code> only applies to systems running <code>NetworkManager</code>, there is not an equivalent for other setups.</p>
<p><a href="https://docs.docker.com/storage/volumes/" target="_blank" rel="noopener">Docker’s guide to Volumes</a> <a href="http://goinbigdata.com/docker-run-vs-cmd-vs-entrypoint/" target="_blank" rel="noopener">Docker RUN vs CMD vs ENTRYPOINT</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://rennesong.com/2019/03/25/hexo-sublime-blog-writting/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="rennsong">
      <meta itemprop="description" content="Personal blog site, to note technique and life related articles">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Rennesong's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/03/25/hexo-sublime-blog-writting/" class="post-title-link" itemprop="url">How to gracefully write blog with Sublime Text and Hexo (without command line)</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-03-25 10:49:59" itemprop="dateCreated datePublished" datetime="2019-03-25T10:49:59+08:00">2019-03-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-03-27 21:52:01" itemprop="dateModified" datetime="2019-03-27T21:52:01+08:00">2019-03-27</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Productivity-tools/" itemprop="url" rel="index"><span itemprop="name">Productivity tools</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Sublime is a powerful, easy-to-use, lightweight and elegent text editor. Hexo is a light but powerful static personal blog framework. This post focuses on how to combine sublime and hexo allowing us to write and deploy blogs without any command line.</p>
<h1 id="build-system-of-sublime-text">Build system of Sublime Text</h1>
<h2 id="build-system-script-for-hexo-new-command">Build system script for &quot;hexo new command&quot;</h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"shell_cmd"</span>: <span class="string">"title=\\<span class="variable">$(date +%H%M%S)</span> &amp;&amp; hexo new \\<span class="variable">$title</span> &amp;&amp; subl /Users/mac/Documents/blog/source/_posts/\\<span class="variable">$title</span>.md"</span>,</span><br><span class="line">    <span class="string">"working_dir"</span>: <span class="string">"/Users/mac/Documents/blog/"</span>,</span><br><span class="line">    <span class="string">"path"</span>: <span class="string">"/Applications/Sublime Text.app/Contents/SharedSupport/bin:<span class="variable">$PATH</span>"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Note: *<strong>remember to adapt shell_cmd and working_dir with your own computer</strong></p>
<p>Just click File&gt;&gt;Save and use default save location to save as &quot;hexo-new-blog.sublime-build&quot;. In Mac OSX, the default build system scripts path is:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~/Library/Application Support/Sublime Text 3/Packages/User</span><br></pre></td></tr></table></figure>
<p>On Linux, the path should be: <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/home/&lt;username&gt;/.config/sublime-text-3/Packages/User</span><br></pre></td></tr></table></figure></p>
<h2 id="build-system-script-for-hexo-server">Build system script for &quot;hexo server&quot;</h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"shell_cmd"</span>: <span class="string">"ps -ef|grep hexo|grep -v grep|awk '&#123;print \"kill -9 \"\\<span class="variable">$2</span>&#125;'|sh &amp;&amp; hexo clean &amp;&amp; hexo server --debug"</span>,</span><br><span class="line">    <span class="string">"working_dir"</span>: <span class="string">"/Users/mac/Documents/blog/"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Then save as &quot;hexo-start.sublime-build&quot;</p>
<h2 id="build-system-script-for-hexo-deploy">Build system script for &quot;hexo deploy&quot;</h2>
<p>Click Sublime&gt;&gt;Tools&gt;&gt;Build System&gt;&gt;New Build System…，put the following contents： <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"shell_cmd"</span>: <span class="string">"hexo clean &amp;&amp; hexo g -d"</span>,</span><br><span class="line">    <span class="string">"working_dir"</span>: <span class="string">"/Users/mac/Documents/blog/"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://rennesong.com/2019/03/25/israel-visa/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="rennsong">
      <meta itemprop="description" content="Personal blog site, to note technique and life related articles">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Rennesong's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/03/25/israel-visa/" class="post-title-link" itemprop="url">2019年巴黎申请以色列旅游签证</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-03-25 01:19:32" itemprop="dateCreated datePublished" datetime="2019-03-25T01:19:32+08:00">2019-03-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-04-06 21:15:40" itemprop="dateModified" datetime="2019-04-06T21:15:40+08:00">2019-04-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AD%BE%E8%AF%81/" itemprop="url" rel="index"><span itemprop="name">签证</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="需要的材料">需要的材料</h1>
<ul>
<li>Une demande de visa d’entrée en Israël, remplie et signée</li>
<li>Passeport en cours de validité au minimum dans les six mois suivants la date de retour d’Israël(<strong><em>这个是硬性指标，必须满足</em></strong>)</li>
<li>Carte de séjour ou Visa Schengen en cours de validité au minimum dans les six mois suivants la date de retour d’Israël(<strong><em>我的长居实际上是6月30日到期，最后签证官并没有因为这个为难我</em></strong>)</li>
<li>Deux photos de passeport format de 5cms/5cms (<strong><em>注意照片的尺寸不是办理法国长居的那种照片规格(即35mmX45mm), <a href="http://www.photomaton.fr/produit/photos-identite-visa-etats-unis/" target="_blank" rel="noopener">Photomaton官网链接</a>支持查询哪些Photomaton机器支持拍摄5cmX5cm尺寸的照片</em></strong>)</li>
<li>Justificatif de domicile (contrat de location ou autre)</li>
<li>Contrat de travail</li>
<li>Une lettre de l'employeur confirmant que le demandeur retrouve son emploi à la fin duséjour</li>
<li>Les trois derniers bulletins de salaire (<strong><em>我是今年二月才入职，所有只能提供2月以及去年十月十一月的工资单，签证官没有为难我</em></strong>)</li>
<li>Les trois derniers relevés de banque</li>
<li>Programme détaillé des visites et excursions en Israël : lieux, adresses et numéros de téléphone</li>
<li>Attestation de réservation de vols et hôtels</li>
<li>Attestation de souscription à l'assurance annulation et rapatriement</li>
</ul>
<p>Aucun visa ne sera délivré sans présentation de l’ensemble des documents exigés. D'autres documents peuvent être nécessaires dans certainscas.Laprésence à l'Ambassade lors de la demande de visa est OBLIGATOIRE.</p>
<h1 id="巴黎递签">巴黎递签</h1>
<p>似乎是从2017年之后，办理以色列签证需要在线(<a href="https://consulate-secure-form-01.itor.co.il/Apt.aspx?clh=bf1u1707-2014-8ufv-gumq-a6f3g2b2Paris" target="_blank" rel="noopener">预约链接</a>)预约RDV递签</p>
<p>以色列驻巴黎大使馆安检极为严格，虽然是受邀的学术访问，但是在门口也被盘问了6，7分钟左右。进入大厅之后，等待时间倒是不久，很快就在H-5窗口办理，只是签证官态度不是很好。因为我们是受邀学术访问，之后其他什么都没有问就让我缴费，然后下周三来取了。周四上午办理，最早下周三来取，看来从递签到拿到签证至少5个工作日。</p>
<h1 id="行程安排">行程安排</h1>
<h2 id="巴黎取回带签证护照">03-28: 巴黎取回带签证护照</h2>
<p>可以取签证的时间为周一到周四的15:00-16:30, 和递签一样，在门口排队，交上递签那天发给你的缴费凭证，在门口耐心等待大约20分钟左右，有个大叔会帮你把护照取出来。</p>
<p><img src="/.com//meteo_15jours.png" alt="以色列未来两周天气"><span class="image-caption">以色列未来两周天气</span> ## 准备衣物： * T恤 (从巴黎带回来一件) * Olygan polo 衫 * 换洗内衣，袜子 * 蓝色冲锋服 * 匡威鞋子 还是 NB透气鞋 * 牙膏+牙刷 * 洁面摩斯</p>
<h2 id="随身物品">随身物品</h2>
<ul>
<li>护照+长居+家里钥匙+随身书包</li>
<li>剃须刀 (出发前充满电，不带充电线了)</li>
<li>电脑/手机，配属充电器，屏幕转接器</li>
<li>耳机 (在书包里)</li>
<li>新秀丽小登机箱</li>
<li>备用眼镜一副 (有总比没有好)</li>
<li>戒指</li>
</ul>
<h2 id="安息日前往机场">安息日前往机场</h2>
<p><img src="/.com//485-timetable.png" alt="485路公交车时刻表"><span class="image-caption">485路公交车时刻表</span> 2019年4月5日是以色列安息日，485最后一班车的时间是下午5点</p>
<p><img src="/.com//485-getin-place.png" alt="485路公交车上车地点"><span class="image-caption">485路公交车上车地点</span> 如上图所以，上车地点在 central station 附近</p>
<p>最后我们坐的是阿拉伯人的大巴车，一人67块谢克尔，到机场大约只用了50分钟不到。</p>
<h2 id="kosher-食物">Kosher 食物</h2>
<p>犹太人吃饭规则超多。犹太人给他们吃饭的规矩，还创造了一个专有的名词，叫做<code>kosher</code>，国内把它翻译成犹太洁食。如果你不了解“kosher”，你就不能真正了解犹太人。<code>kosher</code> 说白了就是一种饮食禁忌，习惯多多，但都是来源于宗教。虔诚的犹太教徒，对于不kohser的食物是不能吃。对于食物的<code>koseher</code>与否，犹太教有一部《膳食法令》专门做了说明。大体的原则就是动物必须是反刍并且蹄分四瓣的才可以吃，唯一能吃的牛羊后部的某些筋健不能吃，海里的东西没有鳞片和腮不能吃。动物的血液不能吃；自死的动物不能吃。另外由于圣经记载，吃了母羊的奶，就不能吃她的孩子，慢慢演化成了，奶和肉也不能同食。肉和奶不可同食。</p>
<p>有网友反映，以色列的物价特别高，随便路边小店里吃个简餐，人均也要100谢克尔左右（近200元人民币）。就是在路边吃个最简单的三明治、披萨一个人也要50谢克尔。我这次的感觉并不是这样。午餐我一般都要个 falfel，加一瓶可乐基本上不到25-40谢克尔之间吧。晚餐如果要去餐馆的话，可能却是需要50块以上。</p>
<h2 id="圣殿山">圣殿山</h2>
<p>圣殿山是以色列方面的称呼。公元前973年，所罗门在这座山上修建了规模宏大的圣殿，用以朝拜和祭奠犹太教的主神，并保存约柜。公元前586年，耶路撒冷被巴比伦人占领，圣殿被夷为平地。公元前1世纪，希律王重建圣殿，但在公元70年被罗马人再次摧毁。只留下的遗存，就是现在位于圣殿山西南侧的哭墙。</p>
<p>圣殿山有两个清真寺，分别是金色圆顶清真寺和阿克萨清真寺。金顶清真寺，建于公元691年，这座八角形的蓝色清真寺，是为了纪念穆罕默德从一块巨石上登天，聆听真主的启示而建造的。</p>
<p>圣殿山只在周日到周四白天的两段时间开放（4-9月：7:30-11:00, 13:30-14:30；10月-次年3月：7:30-10:00,12:30-13:30）。所有游客必须经过长时间细致的盘问和安检，通过特殊栈道上山。</p>
<h1 id="关于退税">关于退税</h1>
<p>进入T3航站楼，很容易就可以发现标识为<code>VAT</code>的柜台，就是退税处，在那儿需要出具商家给出的退税单，进入以色列拿到的蓝色入境卡</p>
<p>当打印完登机牌，托运行李，过完安检，就会来到机场的免税商品区，很容易找到一个退税点，拿着刚进入机场(过安检之前的区域)退税单，这个退税点会要求填写一个退税确认单，如下图所示： <img src="/.com//vat-refund-form.png" alt="退税单填写"><span class="image-caption">退税单填写</span> 不得不说以色列的退税还是有些坑，退税居然还有再交出去一笔手续费，号称是<code>17%</code>的退税率，但是实际上拿到手的钱除以当时消费总额，实际退税率只有<code>10%</code>左右。</p>
<h1 id="兑换以色列本地货币">兑换以色列本地货币</h1>
<p>第一选择就是到达以色列的时候，在机场直接通过ATM机取钱，我取了700谢克尔，回来之后查看了下银行账户扣掉了176.16欧，汇率相当于是3.97</p>
<p>第二种选择就是直接在法国取好欧元在耶路撒冷旧城区兑换点换钱，我看有些网点可以给出4.04的汇率。以我取现700谢克尔的情况来看，可以省下来将近3欧吧</p>
<p>如果有多于的谢克尔，目前来看也还是在耶路撒冷旧城兑换回欧元较为划算</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://rennesong.com/2019/03/24/ovs-tuto/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="rennsong">
      <meta itemprop="description" content="Personal blog site, to note technique and life related articles">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Rennesong's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/03/24/ovs-tuto/" class="post-title-link" itemprop="url">Open vSwitch 详细介绍</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-03-24 17:57:49" itemprop="dateCreated datePublished" datetime="2019-03-24T17:57:49+08:00">2019-03-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-04-11 04:41:09" itemprop="dateModified" datetime="2019-04-11T04:41:09+08:00">2019-04-11</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/linux-networking/" itemprop="url" rel="index"><span itemprop="name">linux networking</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="ovs">OVS</h1>
<h2 id="ovs-实现中的主要模块">OVS 实现中的主要模块</h2>
<p>OVS 实现中，主要模块如下图所示: <img src="/.com//ovs-main-components.png" alt="OVS main components"><span class="image-caption">OVS main components</span> 最新代码包主要包括以下模块和特性： * ovs-vswitchd: 核心模块，实现交换功能的守护程序（daemon），和 Linux 内核模块一起，实现基于流的交换； * ovsdb-server ：提供轻量级数据库查询服务。其保存了整个OVS的配置信息，包括接口，流表，VLAN等。ovs-vswitchd从其查询配置信息； * ovsdb-tool: 不通过ovs-server就能直接操控数据库 * ovsdb-client: 直接通过ovs-server数据库操作 * ovs-brcompatd：让 ovs-vswitch 替换 Linux bridge，包括获取 bridge ioctls 的 Linux 内核模块； * ovs-dpctl：dapapath control.  用来配置 switch 内核模块，可以控制转发规则； * ovs-vsctl: 获取或者更改ovs-vswitchd的配置信息，此工具操作的时候会更新ovsdb-server数据库； * ovs-appctl：openvswitch apply control, 发送命令来运行相关 daemon(很少使用)； * ovsdbmonitor: GUI 工具，用于显示 OVS 数据库中的相关数据。</p>
<p>此外， OVS 也提供了支持 OpenFlow 的特性实现，包括: * ovs-openflowd：一个简单的 OpenFlow 交换机； * ovs-controller：一个简单的 OpenFlow 控制器； * ovs-ofctl :openvswitch openflow control, 用来控制OVS作为OpenFlow交换机工作时的流表内容； * ovs-pki：OpenFlow 交换机创建和管理公钥框架； * ovs-tcpundump：实现类似tcpdump 的抓包分析功能</p>
<p>既然ovs-vswitchd是Open vSwitch的核心模块，咱们就来深入研究下它 vswitchd 模块主要包括 bridge、ofproto 等模块。作为主模块，负责解析和执行其他各个 ovs 命令。vswitchd 的主要功能就是不断检测并调用所有 bridge 上的 ofproto，执行其上的处理函数。 ovs-vswitchd.c 中有 main 函数，分析 vswitchd 可以从这里开始，这里包含以下头文件，其中大部分都是与业务无关的代码，其中与业务有关的也就 bridge.h、dpif.h、netdev.h、openflow/openflow.h、ovsdb-idl.h、vconn.h、lib/vswitch-idl.h。以下代码注释来自<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a>: <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">#include &quot;bridge.h&quot; &#x2F;&#x2F;the bridge module,需要访问ovsdb-server获取配置信息，与ofprotos和ofproto-dpif也有些关系。</span><br><span class="line">#include &quot;command-line.h&quot;</span><br><span class="line">#include &quot;compiler.h&quot;</span><br><span class="line">#include &quot;daemon.h&quot; &#x2F;&#x2F;守护进程管理模块</span><br><span class="line">#include &quot;dirs.h&quot; &#x2F;&#x2F;目录管理模块</span><br><span class="line">#include &quot;dpif.h&quot; &#x2F;&#x2F;dpif, the DataPath InterFace.ovs-vswitchd使用这个接口与内核模块通信，ovs-dpctl也会使用</span><br><span class="line">#include &quot;dummy.h&quot;</span><br><span class="line">#include &quot;memory.h&quot;</span><br><span class="line">#include &quot;netdev.h&quot; &#x2F;&#x2F;Generic interface to network devices (&quot;netdev&quot;s).用来管理网络设备的模块</span><br><span class="line">#include &quot;openflow&#x2F;openflow.h&quot; &#x2F;&#x2F;openflow协议规格定义</span><br><span class="line">#include &quot;ovsdb-idl.h&quot; &#x2F;&#x2F;Open vSwitch Database Interface Definition Language (OVSDB IDL).应该是访问ovsdb-server进程的接口</span><br><span class="line">#include &quot;poll-loop.h&quot; &#x2F;&#x2F;High-level wrapper around the &quot;poll&quot; system call.poll系统调用的封装模块</span><br><span class="line">#include &quot;process.h&quot; &#x2F;&#x2F;Starting and monitoring subprocesses.进程监控模块</span><br><span class="line">#include &quot;signals.h&quot; &#x2F;&#x2F;signals系统调用的封装模块</span><br><span class="line">#include &quot;simap.h&quot; &#x2F;&#x2F;数据结构定义和hash map的封装操作接口模块</span><br><span class="line">#include &quot;stream-ssl.h&quot; &#x2F;&#x2F;SSL安全网络通信封装模块接口</span><br><span class="line">#include &quot;stream.h&quot; &#x2F;&#x2F;网络通信封装模块接口</span><br><span class="line">#include &quot;svec.h&quot; &#x2F;&#x2F;SVEC数据结构操作模块，SVEC是什么？</span><br><span class="line">#include &quot;timeval.h&quot; &#x2F;&#x2F;计时相关系统接口封装模块</span><br><span class="line">#include &quot;unixctl.h&quot; &#x2F;&#x2F;Unix domain socket control connection.UNIX相关网络通信模块</span><br><span class="line">#include &quot;util.h&quot;</span><br><span class="line">#include &quot;vconn.h&quot; &#x2F;&#x2F;virtual connections to OpenFlow devices.</span><br><span class="line">#include &quot;vlog.h&quot;</span><br><span class="line">#include &quot;lib&#x2F;vswitch-idl.h&quot; &#x2F;&#x2F;自动生成的文件，应该是Open vSwitch Interface Definition Language，可能是openflow协议的具体内容实现</span><br></pre></td></tr></table></figure> ## OVS 中基本概念<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a> ### 1.Packet 网络转发的最小数据单元。每个包都来自某个端口，最终会被发往一个或多个目标端口，转发数据包的过程就是网络的唯一功能 ### 2.Bridge Open vSwitch中的一个网桥就是一台以太网交换机。这里交换机不限于二层转发 ### 3.Port 端口是收发数据包的单元，和物理以太网交换机的端口概念类似. Open vSwitch中，每个端口都属于一个特定的网桥。端口收到的数据包会经过流规则的处理，发往其他端口；也会把其他端口来的数据包发送出去。Open vSwitch支持的端口有以下几种： - Normal port: 用户可以把操作系统中的网卡绑定到Open vSwitch上，Open vSwitch会生成一个普通端口处理这块网卡进出的数据包。 - Internal port: 当设置端口类型为internal，Open vSwitch会创建一快虚拟网卡，此端口收到的所有数据包都会交给这块网卡，网卡发出的包会通过这个端口交给Open vSwitch。 当Open vSwitch创建一个新网桥时，默认会创建一个与网桥同名的Internal Port - Patch port: 当机器中有多个Open vSwitch网桥时，可以使用Patch Port把两个网桥连起来。Patch Port总是成对出现，分别连接在两个网桥上，在两个网桥之间交换数据。 - Tunnel port: 隧道端口是一种虚拟端口，支持使用 GRE 或 VxLAN 等隧道技术与位于网络上其他位置的远程端口通讯。</p>
<h3 id="interfaceiface接口">4.Interface(iface/接口)</h3>
<p>它是连接到 Port 的网络接口设备。Open vSwitch 通过 Interface 与外部交换数据包。在通常情况下，Port 和 Interface 是一对一的关系, 只有在配置 Port 为 bond 模式后，Port 和 Interface 才是一对多的关系。一个接口就是操作系统的一块网卡，这块网卡可能是 Open vSwitch生成的虚拟网卡，也可能是物理网卡挂载在Open vSwitch上，也可能是操作系统的虚拟网卡（TUN/TAP）挂载在 Open vSwitch 上。</p>
<h3 id="datapath">5.Datapath</h3>
<p>由于流可能非常复杂，对每个进来的数据包都去尝试匹配所有流，效率会非常低，所以有了datapath。Datapath 对流进行缓存，把流的执行结果保存起来，当下次遇到匹配到同一条流的数据包，直接通过 datapath 处理。考虑到转发效率，datapath 完全是在内核态实现的，并且默认的超时时间非常短，好像是3秒。</p>
<blockquote>
<p>再重新看一下上面的模块图，datapath是不是可以视作一个交换机，或者说一个桥的实体模块？ 因为传统交换机缓存MAC地址并根据MAC地址进行数据包的转发，而Datapath缓存Flow（流）并根据流进行数据包的转发。 A datapath is a collection of physical or virtual ports that are exposed over OpenFlow as a single switch. Datapaths and the collections of ports that they contain may be fixed or dynamic.</p>
</blockquote>
<h3 id="flow-table">6.Flow table</h3>
<p>每个 datapath 都和一个&quot;flow table&quot;关联，当 datapath 接收到数据之后， OVS 会在 flow table 中查找可以匹配的 flow，执行对应的操作, 例如转发数据到另外的端口。</p>
<h2 id="端口镜像设置6">端口镜像设置<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a></h2>
<p>设置镜像端口的主要作用就是利用tcpdump进行抓包。 首先要添加 <strong>虚拟网络适配器 <code>dumm0</code></strong> 并启用 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ip link add name dumm0 type dummy</span><br><span class="line">ip link set dev dumm0 up</span><br></pre></td></tr></table></figure> ### 1. 监听指定网桥的特定端口数据包 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 将虚拟网络适配器`dumm0` 连接到需要监视的网桥<span class="built_in">test</span>-bridge上</span></span><br><span class="line">ovs-vsctl add-port test-bridge dumm0</span><br><span class="line"><span class="meta">#</span><span class="bash"> 创建名为 `mirrors` 的镜像端口, <span class="built_in">test</span>-port 是OVS上之前添加的端口</span></span><br><span class="line">ovs-vsctl -- set Bridge br-sfc mirrors=@m \</span><br><span class="line">-- --id=@dumm0 get Port dumm0  \</span><br><span class="line">-- --id=@sff0-dpl get Port sff0-dpl \</span><br><span class="line">-- --id=@m create Mirror name=ovsMirror \</span><br><span class="line">select-dst-port=@sff0-dpl \</span><br><span class="line">select-src-port=@sff0-dpl \</span><br><span class="line">output-port=@dumm0 select_all=1</span><br></pre></td></tr></table></figure></p>
<p>查看镜像端口 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># ovs-vsctl list Mirror</span><br></pre></td></tr></table></figure> 删除镜像端口 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ovs-vsctl clear bridge br-sfc mirrors</span><br></pre></td></tr></table></figure></p>
<h3 id="监听整个网桥镜像">2. 监听整个网桥镜像</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ovs-vsctl -- --id=@m create mirror name=ovsMirror \</span><br><span class="line">  -- add bridge br-sfc mirrors @m \</span><br><span class="line">  -- --id=@dumm0 get port dumm0 \</span><br><span class="line">  -- set mirror ovsMirror select_all=true output-port=@dumm0</span><br></pre></td></tr></table></figure>
<p>没有时间来得及细看这个教程 https://arthurchiao.github.io/blog/trafic-mirror-with-ovs/ 看样子也不是不错的！</p>
<h1 id="docker-network-troubleshooting">docker network troubleshooting</h1>
<h2 id="tcpdump-in-docker-container-7">tcpdump in docker container <a href="#fn4" class="footnote-ref" id="fnref4"><sup>4</sup></a></h2>
<p>overlay network traffic in swarm does not go thru docker0 or docker_gwbridge. There are 2 options: ### option 1: Go inside container and do tcpdump: nicolaka/netshoot is container with all network debug tools. <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker run -ti --net container: &lt;container name&#x2F;id&gt; nicolaka&#x2F;netshoot</span><br><span class="line">tcpdump -i &lt;eth0&gt;</span><br></pre></td></tr></table></figure></p>
<h3 id="option-2">Option 2:</h3>
<p>Go inside network namespace of overlay network and do tcpdump: First find overlay network id with docker network inspect Start debug container mounting network namespace: <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -it --rm -v &#x2F;var&#x2F;run&#x2F;docker&#x2F;netns:&#x2F;var&#x2F;run&#x2F;docker&#x2F;netns --privileged&#x3D;true nicolaka&#x2F;netshoot</span><br></pre></td></tr></table></figure> All namespaces are listed under: <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;var&#x2F;run&#x2F;docker&#x2F;netns</span><br></pre></td></tr></table></figure> Find your swarm overlay network namespace matching with overlay networkid of previous command. Then nsenter into network namespace: <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nsenter --net&#x3D;&#x2F;var&#x2F;run&#x2F;docker&#x2F;netns&#x2F; sh</span><br><span class="line">tcpdump -i vxlan0</span><br></pre></td></tr></table></figure></p>
<h2 id="case-study-opendaylight-项目中的-demo-sfc103">case study: OpenDayLight 项目中的 demo: sfc103</h2>
<p>OVS is more powerful bridge than linux bridge, but since it is still a L2 bridge, some general bridge conventions it has to conform to<a href="#fn5" class="footnote-ref" id="fnref5"><sup>5</sup></a>. <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function ovs_start &#123;</span><br><span class="line">    service openvswitch-switch start</span><br><span class="line">    # In the passive mode, OVS connects to an ODL instance </span><br><span class="line">    # (6640 is the IANA registered port for ovsdb)</span><br><span class="line">    ovs-vsctl set-manager tcp:192.168.1.5:6640</span><br><span class="line">    ovs-vsctl add-br br-sfc</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h1 id="如何理解这段代码">如何理解这段代码</h1>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">function ovs_add_app_veth-br &#123;</span><br><span class="line">    # 创建名为 &#39;app&#39; 的 Linux 网络命名空间(network name space)</span><br><span class="line">    ip netns add app </span><br><span class="line">    # 增加一对 veth 虚拟网卡, 名字分别为: veth-app 以及 veth-br</span><br><span class="line">    # 我知道了 因为在sfc103这个demo中，发送http请求的client和classfier1</span><br><span class="line">    # 处于同一个容器中, 作者想把他们隔离开来</span><br><span class="line">    ip link add veth-app type veth peer name veth-br</span><br><span class="line">    ovs-vsctl add-port br-sfc veth-br</span><br><span class="line">    # dev 指的是 device 的意思</span><br><span class="line">    ip link set dev veth-br up</span><br><span class="line">    # 将 veth-app 添加到 app 虚拟网络环境</span><br><span class="line">    # 注意: 从此 ip link show type veth 将看不到 veth-app</span><br><span class="line">    # 只有在命名空间 app 中才看得到 </span><br><span class="line">    ip link set veth-app netns app</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>network namespace 是实现网络虚拟化的重要功能，它能创建多个隔离的网络空间，它们有独自的网络栈信息。不管是虚拟机还是容器，运行的时候仿佛自己就在独立的网络中。 Initially everything is in the global namespace 对于每个 network namespace。 来说，它会有自己独立的网卡、路由表、ARP 表、iptables 等和网络相关的资源。</p>
<h1 id="ovs-使用命令">ovs 使用命令</h1>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 测试flow 匹配执行情况，但并不发送真的packet</span><br><span class="line">ovs-appctl ofproto&#x2F;trace br-sfc in_port&#x3D;1,tcp,nw_src&#x3D;192.168.2.1,nw_dst&#x3D;192.168.2.2,nw_ttl&#x3D;64,tcp_dst&#x3D;80,tcp_flags&#x3D;syn -generate</span><br></pre></td></tr></table></figure>
<h1 id="how-can-i-figure-out-the-openflow-port-number-for-a-given-port-you-can-print-the-entire-mapping-with">How can I figure out the OpenFlow port number for a given port? you can print the entire mapping with</h1>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ovs-vsctl -- --columns=name, ofport list Interface</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 添加一条flow</span></span><br><span class="line">ovs-ofctl add-flow -OOpenFlow13 br-sfc "table=0,tcp,priority=1002,in_port=1,nw_src=192.168.2.0/24,nw_dst=192.168.2.0/24,tp_dst=80,actions=encap(nsh),set_field:0x49-&gt;nsh_spi,set_field:255-&gt;nsh_si,set_field:0x1-&gt;nsh_c1,set_field:0x2-&gt;nsh_c2,set_field:0x3-&gt;nsh_c3,set_field:0x4-&gt;nsh_c4, encap(ethernet),load:0xc0a80114-&gt;NXM_NX_TUN_IPV4_DST[],output:2"</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 添加一条flow, 最后将修改过的packet输出至多个端口</span></span><br><span class="line">ovs-ofctl add-flow -OOpenFlow13 br-sfc "table=0,tcp,priority=1002,in_port=1,nw_src=192.168.2.0/24,nw_dst=192.168.2.0/24,tp_dst=80,actions=encap(nsh),set_field:0x49-&gt;nsh_spi,set_field:255-&gt;nsh_si,set_field:0x1-&gt;nsh_c1,set_field:0x2-&gt;nsh_c2,set_field:0x3-&gt;nsh_c3,set_field:0x4-&gt;nsh_c4, encap(ethernet),load:0xc0a80114-&gt;NXM_NX_TUN_IPV4_DST[],output:2,output:3"</span><br></pre></td></tr></table></figure>
<h1 id="prerequisite-knowledge">prerequisite knowledge</h1>
<h2 id="network-namespace-之间通信">network namespace 之间通信</h2>
<p>默认情况下，network namespace 是不能和主机网络，或者其他 network namespace 通信的。</p>
<p>有了不同 network namespace 之后，也就有了网络的隔离，但是如果它们之间没有办法通信，也没有实际用处。要把两个网络连接起来，linux 提供了<code>veth pair</code> 。可以把 <code>veth pair</code>当做是双向的 pipe（管道），从一个方向发送的网络数据，可以直接被另外一端接收到；或者也可以想象成两个 namespace 直接通过一个特殊的虚拟网卡连接起来，可以直接通信。</p>
<p>我们可以使用 ip link add type veth 来创建一对 veth pair 出来，需要记住的是 veth pair 无法单独存在，删除其中一个，另一个也会自动消失。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">ip netns exec app ifconfig veth-app 192.168.2.1&#x2F;24 up</span><br><span class="line"># 配置 veth-app 网卡 MAC 地址</span><br><span class="line">ip netns exec app ip link set dev veth-app  addr 00:00:11:11:11:11</span><br><span class="line"># 选项s: 设置主机 IP 地址和 MAC 的静态映射</span><br><span class="line"># 选项i: 后跟接口, 指定要操作 arp 缓冲区的网络接口 veth-app 是本地接口</span><br><span class="line">ip netns exec app arp -s 192.168.2.2 00:00:22:22:22:22 -i veth-app</span><br><span class="line">ip netns exec app ip link set dev veth-app up</span><br><span class="line"># 为何要把 loopback 设备也开启呢？网上好多例子都是这样</span><br><span class="line">ip netns exec app ip link set dev lo up</span><br><span class="line">ip netns exec app ifconfig veth-app mtu 1400</span><br><span class="line">ovs-vsctl show</span><br></pre></td></tr></table></figure>
<p>A veth device pair is a virtual ethernet cable, packets sent on one end come out the other (and vice versa of course) <a href="#fn6" class="footnote-ref" id="fnref6"><sup>6</sup></a>.</p>
<h1 id="create-tunnel-devices-using-rtnetlink-interface">create tunnel devices using rtnetlink interface</h1>
<p>Developers of network layer protocol handlers can use RTNETLINK to modify and monitor different components of networking, such as the routing table and network interfaces<a href="#fn7" class="footnote-ref" id="fnref7"><sup>7</sup></a>. =&gt; 这个功能是否可以帮助我实现 Montida's paper 的实现？</p>
<p>It helps reduce the complexity of the kernel code if you implement these protocols in user space.</p>
<p>rtnetlink就是一组操作rtnetlink消息的宏<a href="#fn8" class="footnote-ref" id="fnref8"><sup>8</sup></a>。</p>
<p>rtnetlink是基于netlink机制的一个内核和协议栈相关操作的机制。其允许用户程序对内核的路由表进行读写。这个功能非常重要，在很多基础的工具中的使用也非常广泛。但是很少资料直接对 rtnetlink 的具体使用进行讲解，中文的资料只有一些对 <a href="http://man7.org/linux/man-pages/man7/rtnetlink.7.html" target="_blank" rel="noopener" title="RTNETLINK(7)">Manual</a> 的翻译和补充。Linux Journal<a href="#fn9" class="footnote-ref" id="fnref9"><sup>9</sup></a> 有非常详细的一篇框架文章，但是对具体过程解释不详细。另一方面，由于现实的应用中，对路由表等的处理较为复杂，没有比较简单直接的例子。并且其 <a href="http://man7.org/linux/man-pages/man7/rtnetlink.7.html" target="_blank" rel="noopener" title="RTNETLINK(7)">Manual</a> 中说到这个是 Linux IPv4 的路由 socket，但是其支持 Ipv6，应该是 <a href="http://man7.org/linux/man-pages/man7/rtnetlink.7.html" target="_blank" rel="noopener" title="RTNETLINK(7)">Manual</a> 太久没更新的缘故。 因此，这篇文章并不对rtnetlink的数据结构或<a href="http://man7.org/linux/man-pages/man7/rtnetlink.7.html" target="_blank" rel="noopener" title="RTNETLINK(7)">Manual</a>进行详细的解释，而是解释其使用方式，并且举一个具体的使用样例。对一些操作和数据结构的构成有疑惑，可以直接看 <a href="http://man7.org/linux/man-pages/man7/rtnetlink.7.html" target="_blank" rel="noopener" title="RTNETLINK(7)">Manual</a>。</p>
<h1 id="基于-vxlan-的-nsh-封装sdn-lab">基于 VxLAN 的 NSH 封装<a href="#fn10" class="footnote-ref" id="fnref10"><sup>10</sup></a></h1>
<section class="footnotes">
<hr>
<ol>
<li id="fn1"><p>https://blog.csdn.net/zhengmx100/article/details/54729272<a href="#fnref1" class="footnote-back">↩</a></p></li>
<li id="fn2"><p>https://blog.csdn.net/zhengmx100/article/details/54729272<a href="#fnref2" class="footnote-back">↩</a></p></li>
<li id="fn3"><p>http://blog.kompaz.win/2017/03/19/OpenVSwitch%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/#%E7%89%B9%E5%AE%9A%E7%AB%AF%E5%8F%A3%E9%95%9C%E5%83%8F%E8%AE%BE%E7%BD%AE<a href="#fnref3" class="footnote-back">↩</a></p></li>
<li id="fn4"><p>https://forums.docker.com/t/how-to-tcpdump-inter-service-traffic/23463/4<a href="#fnref4" class="footnote-back">↩</a></p></li>
<li id="fn5"><p>https://arthurchiao.github.io/blog/ovs-deep-dive-6-internal-port/<a href="#fnref5" class="footnote-back">↩</a></p></li>
<li id="fn6"><p>https://matthewarcus.wordpress.com/2018/02/04/veth-devices-network-namespaces-and-open-vswitch/<a href="#fnref6" class="footnote-back">↩</a></p></li>
<li id="fn7"><p>https://www.linuxjournal.com/article/8498<a href="#fnref7" class="footnote-back">↩</a></p></li>
<li id="fn8"><p>https://blog.csdn.net/iteye_18932/article/details/82139564<a href="#fnref8" class="footnote-back">↩</a></p></li>
<li id="fn9"><p>https://www.linuxjournal.com/article/8498<a href="#fnref9" class="footnote-back">↩</a></p></li>
<li id="fn10"><p>https://www.sdnlab.com/16610.html<a href="#fnref10" class="footnote-back">↩</a></p></li>
</ol>
</section>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://rennesong.com/2016/10/23/french-useful-phrases/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="rennsong">
      <meta itemprop="description" content="Personal blog site, to note technique and life related articles">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Rennesong's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2016/10/23/french-useful-phrases/" class="post-title-link" itemprop="url">法语积累</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2016-10-23 00:21:48" itemprop="dateCreated datePublished" datetime="2016-10-23T00:21:48+08:00">2016-10-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-10-23 17:00:38" itemprop="dateModified" datetime="2019-10-23T17:00:38+08:00">2019-10-23</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%A4%96%E8%AF%AD/" itemprop="url" rel="index"><span itemprop="name">外语</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Ce qui m'effare... 让我惊讶的是... formellement ce ne fait que penser qu'a ca magouille 勾心斗角 menopause 更年期 apres confirmation de votre part, la carte bancaire qui a servi au paiment sera creditee du montant a rembourser. Ton discours te rend nerveux？ ca prouve que tu es pas detache！ fringue 俗语衣服 quelles chaussures je mets？ 我穿哪双鞋子? je fais ton numero par d'erreur. Tu m'as planque tous mes fringues. Tu aimerais vraiment avaler ca？你真得想吃下去？ Ca me rappelle mon enfance. 这让我想起了我小时候 une fille tartinee avec configure. Le francais procede du latin. cette maniere de faire nuit a sa reputation.这种做法损害了他的声望。 homme de parole. 守信用 On trouve en lui du pedant. 我们在他身上看到了学究气. Tout ca ne me regarde pas. 所有的一切都与我无关 sereinement defaite Je porte tous les resposabilites. 我承担一切责任. Je n'ai qu'un seul bras valide. rend-moi service. 帮帮忙 tu n'as pas ete retenu. La voiture recule pour mieux braquer. 车子为了拐弯忘往后倒开 Je m'apercois dans la glace. 我在照镜子 il pleut. il neige. il gele. il tonne il est temps que vous pensiez a votre avenir. si on vient a rencontrer. 万一我们碰到的话 regrouper par famille. post-it tout vient a l'esprit. les allemands aurrait-ils atteint leur point de ras-le-bol？ une allemangne desireuse de reprendre en main son destin. mettre en lumiere les effets deleteres de cette construction baroque. il faut gratter les fonds de tiroir. 搜集抽屉里的钱 faire preuve de..显示出 si la grece sort de l'euro, c'est l'allemagne trinque. 德国倒霉 effondrement 倒塌崩溃 plan d'austerite. 紧缩政策 il a cru deroger en faisant ce metier.他过去认为干这一行有失身份 vent favorable 顺风 par coutume 按惯例 Point d'exclamation 感叹号 vous pouvez etre bien cale dans votre fauteuil Vous ne sentez pas à l'aise. Je viens d'avoir Gillaume au téléphone. 我刚刚接了Gillaume的电话 A noter que tous les postes sont a pouvoir rapidement. 注意 所以职位近期即将履新 vulgarisation scientifique 科普 glaner des renseignements 收集信息</p>
<p>claquage: claquage du a la tenaion intetcaler: en anglais, intercalate fusible mise aux encheres C'est une explication plausible. 这倒是个说的过去的解释。 Il faut voir le bon cote des choses. 要往好的方面看。。 il fait une chute. Ne vous tracassez pas. 你就别操心了。 J'ai eleve deux filles en vain. pourquoi vous torturer ici？ C'est son testament. 这是他的遗书。 et puis apres？ Fait attention à ta sante. Cela me fait de peine. Je vous demande une faveur. C'est tres injuste pour toi. 这对你也太不公平了。 promet-le-moi.答应我。 Je me plie à mon destine. 我认命。 N'a rien a voir avec lui. 和他没有关系。 Je viens t'apporter une noubelle exceptionnelle. retablir sa sante. 恢复健康 Quand je suis retabli, 当我康复的时候。。 Ca saute aux yeux. 明摆着么。 Je laisse la famille à tes soins. 家就交给你了。 Je te confie mon parent. 我父母就拜托给你了。 Les japonais sont capitule. 日本人投降了。 Ce rire jaune me fait peur. 他的苦笑让我感觉害怕。 J'ai confiance en toi. 我相信你。 ecarte le main. 松手。 tout sera eclairci. 一切都会真想大白。 n'agis pas a la legere. 不要鲁莽行事。 sous alimentation 营养不良。 Faire rebondir la conservation. 使谈话重新活跃起来 voisins de palier 同一楼层的邻居 la syntaxe d'utilisation d'un composant dans une discription est la suivante. quand je l'ai vu, j'étais hypnotise et fasciné Je déverse toute ma haine sur une personne. Toute fois, une erreur s'est glissé dans le jugement puisque le tribunal a estimé à tort que ce poste était occupé par lui. epidemie de grippe. J'ai traversé la rue pour rejoindre ma voiture . Debrouillez vous! 你自己想法应付吧！ Elle est geniable de ce truc! Je les emmène pour interroger. Malgré les sanctions prises par la communauté internationale contre Damas et l'interdiction de vente de l'arme a la Serie, ce vente de ces technologies n 'est pas proscrite. Aux pays bas, votre voiture est confisqué. La France a un double langage: lors qu'il y a des émeutes en France, son gouvernement est trop dur, mais quand il se passe en chine, les émeutiers sont des héros. On a débordé. 我们超时了。 Il m'a plaqué parce que je le refuserais. j'ai un service a vous demander. 我想请你帮个忙 de quels droits doit-t-il beneficier？ je voulais creer des situations de communication authentique pour eux, malheusement, les eleves etaient tres peu engages！ si un élève s'intéresse à peine à l'école ,pourquoi s'intéresserait il à lire un blog publié par une classe à propos de leur école ? de corpulence. 身材胖 Le dock dw gauche est affreux avec des icones de styles differents. accolade 大括号 crochet 方括号 parentheses 小括号 le déclic devrait se faire. quand elle eternuait...当她打喷嚏时 J'ai du mal à avaler.我难以置信。 autopsie 验尸 L'affaire a raté de peu. 工亏一亏 Je ne sais pas si c'est pertinent de le dire. 我不知道这么说是否合适。 prix usuraire 高利贷 il est très grossier.他很粗鲁 percée = breakthrough. Président sortant 任满的总统 postgres est a psql ce que root est a Ubuntu.</p>
<p>Pour l’instant, sa grossesse se passe bien et elle devrait accoucher dans 10 jours. 目前来说，她身体状况良好估计在10天以后分娩。</p>
<p>Linux Mint <strong><em>se décline en</em></strong> deux versions: l'une est basée sur Ubuntu et l'autre est basée sur Debian testing.</p>
<p>Il nous faut maintenant en tirer le meilleur parti possible = We have to make the best of it and to make optimum use of it.</p>
<p>A l’heure où les données deviennent une source de valeur essentielle pour l’entreprise, leur sauvegarde est un facteur de pérennité pour l’activité de l’entreprise. 时值数据正成为企业最重要的价值来源，数据的存储成了企业生产活动永恒的因素。</p>
<p>L’ARCEP(Autorité de Régulation des Communications Electroniques et des Postes)met en consultation publique (公开听众会) les modalités d’attribution et les obligations pour les candidats à la 5G sur la bande de 3.4 GHz à 3.8 GHz. 300 MHz de bandes seront mis en enchère (拍卖) en automne 2019.</p>
<p>Je m'incline au nom de toute la nation entiere devant le douleur des familles</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://rennesong.com/2016/10/22/tuto-magie-file-system/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="rennsong">
      <meta itemprop="description" content="Personal blog site, to note technique and life related articles">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Rennesong's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2016/10/22/tuto-magie-file-system/" class="post-title-link" itemprop="url">tuto_magie_file_system</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2016-10-22 01:50:29" itemprop="dateCreated datePublished" datetime="2016-10-22T01:50:29+08:00">2016-10-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-03-25 18:27:10" itemprop="dateModified" datetime="2019-03-25T18:27:10+08:00">2019-03-25</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="文件系统最初的由来">文件系统最初的由来</h1>
<p>文件系统最开始不过是个简单的 *** 磁盘管理器 ***</p>
<p>操作系统中，所有需要进行读写操作的进程都必须通过这个模块才能对磁盘进行读写。如此一来， 不同进程占用不同的磁盘分区就可以有条不紊地进行。</p>
<p>为了在磁盘中定位文件，文件夹的概念得以引入。至此，数据了有了树状结构。 # 所谓的 虚拟文件系统 文件系统的概念获得了巨大的成功。后来我们将文件系统的概念进行了扩展。以至于我们常说：“一切皆文件”。</p>
<p>树状表示很好，为什么我们不用来表示除磁盘数据之外的东西呢？比如，用 PID 命名的文件夹里 管理正在执行中的进程的信息。这就是挂载在挂载点 /proc 之下的文件系统的功能。</p>
<p>对于连接在电脑上的外设，我们也采用同样的思路：挂载在挂载点 /dev 之下。</p>
<p>同样的思路，为什么我们不可以在内存空间(而不是磁盘空间)中开辟一块空间，来管理一些临时文件呢？这样大大加速一些程序的执行。这就是 tmpfs 的使命。</p>
<p>这样的例子，在计算机中，不胜枚举。</p>
<p>对于这样的例子，我们一定要明白，我们始终贯彻的是“一切皆文件”的理念。</p>
<p>开发基于 FUSE 的文件系统的好处是：不需要动内核。但代价是性能的下降。但是：为啥我们需要这么一个文件系统呢？</p>
<p>Live CD 最大的难点在于：如何在只读载体上，比如CD上，创造出来一个允许我们读写的文件系统？</p>
<p>文章出处：La Magie des Filesystems: 1-Tour d'Horizon, Linux Magazine, 2014, Fevrier</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://rennesong.com/2016/10/22/TP-IPv6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="rennsong">
      <meta itemprop="description" content="Personal blog site, to note technique and life related articles">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Rennesong's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2016/10/22/TP-IPv6/" class="post-title-link" itemprop="url">IPv6 实验课准备以及遇到的问题</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2016-10-22 01:04:42" itemprop="dateCreated datePublished" datetime="2016-10-22T01:04:42+08:00">2016-10-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-03-25 18:27:10" itemprop="dateModified" datetime="2019-03-25T18:27:10+08:00">2019-03-25</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>需要熟练记忆的命令 实验室网络拓扑结构图：</p>
<ul>
<li>在privileged mode下
<ul>
<li>show ipv6 interface brief</li>
<li>show ipv6 route</li>
</ul></li>
<li>在configuration mode下 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Routeur# configure terminal</span><br><span class="line">Routeur(config)# interface FastEthernet0&#x2F;1.101</span><br><span class="line">Routeur(config-if)# ipv6 address 2001:660:7301:27_1::&#x2F;64 eui-64</span><br><span class="line">Routeur(config-if)# exit</span><br><span class="line">Routeur(config)# exit</span><br><span class="line">Routeur#</span><br></pre></td></tr></table></figure> 以上代码块用来配置面向内网的那块以太网卡的 IPV6 地址的 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Routeur# configure terminal</span><br><span class="line">Routeur(config)# interface FastEthernet0&#x2F;0</span><br><span class="line">Routeur(config-if)# no shutdown</span><br><span class="line">Routeur(config-if)# ipv6 address 2001:660:7301:2700::_&#x2F;64</span><br><span class="line">Routeur(config-if)# ipv6 enable</span><br><span class="line">Routeur(config-if)# exit</span><br><span class="line">Routeur(config)#</span><br></pre></td></tr></table></figure> 以上代码块是用来配置面向 Reseau d’Interconnextion 的那块儿以太网卡的IPv6的地址。</li>
</ul>
<p>配置路由器接口 IPv6 的方法其实有两种，第一种是：直接给出完完整的IPv6地址，第二种是，只告诉这块网卡的网络前缀，然后指定 EUI-64 模式，然后根据该接口的MAC地址，自己生成IPv6地址。</p>
<p>还没有搞清楚的问题： 在配置模式下，命令ipv6 unicast-routing 是什么意思？ 思科路由器的virtual interface的概念 问题是 在配置模式下，为什么 命令 interface fastethernet 0/1.101 可以直接通过呢？是不是0/1.501之类的命令也可以通过呢？ 路由器属于哪些multicast group里，这个有什么用？ 其实一直没有闹明白，思科路由器下面的 redistribute connected 究竟是个什么意思呢？ 为什么 RA一下子要 3连发呢？ 什么又是 MLD sol???</p>
<p>no shutdown 其实相当于 开启了 路由器的某一块儿网卡，</p>
<p>通过本次试验我们可以知道，配置了IPv6的路由器，是不会提供 DNS 服务的</p>
<p>其实要是想完全搞懂，还得懂DHCP IPV4 是怎么搞的</p>
<p>昨天配置完 DNS 服务之后，ping6 serveur.tp 一直无法工作，一直很困惑，Bruno的提示说，通过查看 /var/log/syslog 的内容，才发现问题所在，其实就是少了一个小数点，经验就是 bind9 这个服务，不管你的配置文件正确不正确，都会正常开启的，需要 debug 的时候，注意看 /var/log/syslog 的内容。不过一个新的问题就是，命令 dmesg又显示的是哪个文件的内容呢？</p>
<p>Solicited-node multicast address 是IPv6体系之下一种layer3类型地址，在Neighbour Discovery过程之中的，是用来获取目标硬件的 layer-2，也即是 MAC地址的时候，使用的 IPV6地址，我们一般用ARP协议与之类比。</p>
<p>NDP (Neighbour Discovery Protocol) 的基础是 Neighbour Advertisement 信息，所有的 IPv6-enable的机器都会 周期性的 向谁？to other hosts present on the same network (那我怀疑这里的目的地址应该是：ff02::1 了) 发送 包含自己 link-local 的地址，以便其他人在做 ND的时候可以发现你。</p>
<p>IPv6 DAD or Duplicate Address Detection is a neighbor solicitations function.</p>
<p>这个教程讲 IPv6真是不错：http://howdoesinternetwork.com/2012/ndp-ipv6-neighbor-discovery-protocol</p>
<p>本次TP中，有组学生非常认真，他们仔细对了课本上讲的知识以及他们实际观察到的traces是否一致，有个地方问住了我（因为我也确实不熟悉），就是为什么 Host想router所在的组(ff02::2)发送了Neighbour Solicitation 请求，但是router一直没有回复呢？ 猛一下把我问住了，因为对DAD机制不熟悉，所以不敢造次，后来才知道，其实没有回复就是最好的回复。因为只有真的有其他机器跟自己使用了一样的Global address，它才会看到有人回复自己。</p>
<p>需要使用 DHCPv6 的机器，是不会自己自动发起请求，要求分配一个 IPv6 地址的，需要在客户端有个软件发起请求。</p>
<p>DHCPV6的工作流程大致可以分为 Solicite, advertise, request, reply. 在solicite的时候，目的地址应该是 FF02::1:3 还是 FF02::1:2?(因为poly上写的可是FF02::1:2啊，为啥我们的答案里写的确实FF02::1:3呢？）=》在PC2发出SOLICITE message 的时候，目的地址确实为多播类型（FF02::1:2）, 而思科路由器在做Relay的时候，目的地址是FF02::1:3, 因为后者代表的是所有的 DHCPv6 server.</p>
<p>今天有学生问的问题还是很犀利的： 问题是：为什么使用了DHCPv6了，我们还是需要发送这些 RA 之类的信息？ 我无法作答。</p>
<p>另一个问题是：有一组学生做DHCP的时候，非常奇怪，他们观察到了 client给relais(routor)发送的 solicte, 也确实看到了，router给DHCP serveur 转发的 soliste, DHCP serveur 看起来也确实是给 router 发送 transmit advertise了，但是workflow就卡在了这一步。。。后来进一步试验发现，在 DHCP server 上我们没有办法 ping6 通 router 的 virtual interface 0/1.101 反之却可以！使用什么命令？没想到这Cisco路由器里，即使是ping一个IPv6的地址，依然用的是ping命令。可能不同的Router型号，最后使用的命令不同的</p>
<p>后来学生们自己发现了问题，就是eth1接口在一开始的时候就被配置上了 global ip v6 的地址，所以ping router的时候，貌似使用的是这个地址！所以无法工作！！</p>
<p>他们后来删除了给 eth1 配置的 IPv6地址，一切工作正常。</p>
<p>有组学生比较懒，在Banc4上没有删除之前学生的工作，方便了他们但是给我造成了很大的麻烦！！！ 比如不知道为什么，他们的 PC du serveur 上 eth1 被分配了 公共IPv6的地址，但是 eth0 却一直没有自动生成 Global IPv6 address, 最后我的解决方案是：让他们先把两个网卡都关掉，然后只开启 eth0, 然后等待 20 秒左右，之后果然 eth0 被分配了 IPv6 地址，然后再开启 eth1, 并且删除掉其上的 <span class="citation" data-cites="IP">@IP</span>，因为 eth1 上的 <span class="citation" data-cites="IP">@IP</span> 会影响之后的实验。那么，我困惑的是，eth1所在的端口明明被配置成了 monitoring, 并且在 VLAN1 上？为什么会被配置一个 IPv6的地址？</p>
<p>在本次TP中，我们使用如下命令来禁止一些 IPv6的功能（在eth1上），我们使用如下命令: echo 0 &gt; /proc/sys/net/ipv6/conf/eth1/accept_ra</p>
<p>首先需要知道accept_ra是个啥，这个链接解释了此变量的作用： http://www.tldp.org/HOWTO/Linux+IPv6-HOWTO/proc-sys-net-ipv6..html 我概括一下，这个变量的是一个布尔类型的，如果被设置为真，则会接受 Router 发送的 RA 信心，并且据此来配置自己的 Global IPv6 地址。如果设置为假（即数值0），此接口不再接受 来自 routor 的RA。也就没有办法采用自动模式配置 IPv6 的地址了。</p>
<p>有一个问题：A quel groups multicast est abonne le routeur？ 答案是：FF02::1 FF02::2 FF02::XXXX::XXXX (Multicast solicite) 什么是 Multicast solicite？为什么要有这种多播地址？</p>
<p>有一组学生遇到了个我无法解决的问题：PC1（作为DHCPv6 server）配置正常，工作正常，PC2（作为DHCPv6 client）配置正常，工作正常。但是Wireshark中观察到了 PC2向Cisco Router发出的 SOLICIT message, 但是奇怪的是，并没有观察到 Router relay的 SOLICIT message（to PC1）啊，但是查看了下 Router的配置，显示一切正常啊。</p>
<p>=&gt; Google is your teacher. 再我准备放弃的时候，突然想到，不如最后google一下，看看有木有什么解决方案。在这个帖子[https://supportforums.cisco.com/document/118551/stateful-dhcpv6-relay-configuration-example]中, 终于找到了线索。貌似Router没有被指明Relay的地址是哪里啊？也是啊，管理员如果不明确说明relay的地址，那么Router在接到SOLICIT message的时候，它又如何知道这个SOLICIT message该转发至何处呢？</p>
<p>还有学生问我：在思科路由器配置完毕，PC1上的 DHCPv6的 server 已经运转起来，为啥进行PC1上的 server里的output停在 skip the blabla...上了呢？ 答案是：不要忘记了运行 PC2上的DHCPv6的client软件啊。。。即使在IPv6下，DHCP request可是不会自己自主进行的。。。</p>
<p>passion process vs uniform distribution.</p>
<p>mais en cadre...</p>
<p>ratasuk date rate paler citation... limitation de vitesse....</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://rennesong.com/2016/10/22/TP-Ethernet-md/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="rennsong">
      <meta itemprop="description" content="Personal blog site, to note technique and life related articles">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Rennesong's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2016/10/22/TP-Ethernet-md/" class="post-title-link" itemprop="url">Ethernet 交换实验准备工作</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2016-10-22 00:52:33" itemprop="dateCreated datePublished" datetime="2016-10-22T00:52:33+08:00">2016-10-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-03-25 18:27:10" itemprop="dateModified" datetime="2019-03-25T18:27:10+08:00">2019-03-25</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="生成树算法">生成树算法</h1>
<p>介绍下，计算机科学中的经典算法。理论部分</p>
<h1 id="交换机中生成树算法工作原理">交换机中生成树算法工作原理</h1>
<p>概括来讲，STP的工作流程可以分为三个阶段： * Root Brideg 选举 * Root Port (for non-root bridge) 选举 * Designated Port 选举 - 【http://www.omnisecu.com/cisco-certified-network-associate-ccna/how-spanning-tree-protocol-stp-select-designated-port.php】 - 这个帖子对Designated Port的选举给出了非常详细的解释</p>
<p>以下帖子对STP原理部分 给出了非常 【https://www.pluralsight.com/blog/software-development/spanning-tree-protocol-tutorial】</p>
<p>以后最好 保留一些 STP 的traces，用以展示STP协议发送的packet的内容，比如有没有IP层？ 无图无真相。 For the election of the Root Bridge (bridge is equivalent to Switch), the one that will be the initial point of reference, switches manipulate and analyze the Root Bridge ID and Sender Bridge ID fields. Both of these fields consist of a six byte MAC address header and a two byte Bridge Priority header. The switch with the smallest Bridge Priority is automatically elected as the Root Bridge. If Bridge Priority is the same on all switches then the switch with the smaller MAC address is elected as the Root Bridge.</p>
<p>在 交换机 默认配置下，据说只有ARP diffusion 通过，那么发出请求的机器是如何知道 对应IP地址的MAC地址的呢？</p>
<p>对这句话也不是很理解，</p>
<p>il est en full duplex, donc le protocole CSMA/CD est désactivé. 我想那是因为 full duplex 是因为 发送还有接受方，走的是不同的channel(比如不同的频率)，所以根本不需要运行 CSMA/CD 协议 il est en half duplex, donc le protocole CSMA/CD est activé. 因为采用的是半双工，所以 发送以及接受，占用的都是同样的channel. 那么当然需要一些 冲突避免机制。</p>
<p>在命令行模式下 show interfaces status 注意比较这俩命令的区别： show interfaces status show interfaces show interface 端口名字 一个是以列表形式把所有interfaces的信息汇集起来显示出来，一个是把每个interface的信息详细地显示出来， 而show interface 端口名字 则是只详细显示一个端口的信息</p>
<h1 id="tp-中遇到的问题">TP 中遇到的问题</h1>
<h2 id="路由器-and-mac">路由器 and MAC</h2>
<p>实际上，一个交换机并不一定只具有一个 MAC 地址。比如为了支持 Spanning Tree Protocol (STP)，交换机的每个接口就需要有一个专属的M AC 地址。我们以 Telecom Bretagne 实验室的配置情况为例：该实验采用的是 Cisco Catalyst 3560 交换机。该交换机配备有8个 FastEthernet端口以及1个 GigaEthernet 端口。我们可以通过如下命令查看下， 这9个端口的MAC地址： <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">Switch#show mac-address-table</span><br><span class="line">          Mac Address Table</span><br><span class="line">-------------------------------------------</span><br><span class="line"></span><br><span class="line">Vlan    Mac Address       Type        Ports</span><br><span class="line">----    -----------       --------    -----</span><br><span class="line"> All    0100.0ccc.cccc    STATIC      CPU</span><br><span class="line"> All    0100.0ccc.cccd    STATIC      CPU</span><br><span class="line"> All    0180.c200.0000    STATIC      CPU</span><br><span class="line"> All    0180.c200.0001    STATIC      CPU</span><br><span class="line"> All    0180.c200.0002    STATIC      CPU</span><br><span class="line"> All    0180.c200.0003    STATIC      CPU</span><br><span class="line"> All    0180.c200.0004    STATIC      CPU</span><br><span class="line"> All    0180.c200.0005    STATIC      CPU</span><br><span class="line"> All    0180.c200.0006    STATIC      CPU</span><br><span class="line"> All    0180.c200.0007    STATIC      CPU</span><br><span class="line"> All    0180.c200.0008    STATIC      CPU</span><br><span class="line"> All    0180.c200.0009    STATIC      CPU</span><br><span class="line"> All    0180.c200.000a    STATIC      CPU</span><br><span class="line"> All    0180.c200.000b    STATIC      CPU</span><br><span class="line"> All    0180.c200.000c    STATIC      CPU</span><br><span class="line"> All    0180.c200.000d    STATIC      CPU</span><br><span class="line"> All    0180.c200.000e    STATIC      CPU</span><br><span class="line"> All    0180.c200.000f    STATIC      CPU</span><br><span class="line"> All    0180.c200.0010    STATIC      CPU</span><br><span class="line"> All    ffff.ffff.ffff    STATIC      CPU</span><br><span class="line">   1    0008.e3ff.fc28    DYNAMIC     Gi0&#x2F;1</span><br><span class="line">   1    000a.5e3f.61b0    DYNAMIC     Gi0&#x2F;1</span><br><span class="line">   1    000a.f716.45f6    DYNAMIC     Gi0&#x2F;1</span><br><span class="line">   1    0021.1cb9.8981    DYNAMIC     Gi0&#x2F;1</span><br><span class="line">   1    0021.566a.0001    DYNAMIC     Gi0&#x2F;1</span><br><span class="line">   1    0800.27c6.3745    DYNAMIC     Gi0&#x2F;1</span><br><span class="line">   1    f029.2973.fd17    DYNAMIC     Gi0&#x2F;1</span><br><span class="line">Total Mac Addresses for this criterion: 27</span><br></pre></td></tr></table></figure></p>
<p>STP的第一步是选择 Root Bridge, 选择标准是选择 Priority 最小的那个，如果所有的交换机的 Priority 的值都一样，那么选择 MAC 地址最小的那个。这里面，参与比较的 MAC 地址是交换机本身的 MAC 地址，而不是某个端口的 MAC 地址 （这一点，我有待确认，应该是这样的）。 所以我们可以通过命令 show spanning-tree 来查看 STP 有关的数据（其中必然其本身的 MAC 地址以及 Root Bridge MAC 地址）： <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">Switch#show spanning-tree</span><br><span class="line">VLAN0001</span><br><span class="line">  Spanning tree enabled protocol ieee</span><br><span class="line">  Root ID    Priority    32769</span><br><span class="line">             Address     0021.1cb6.9880</span><br><span class="line">             This bridge is the root</span><br><span class="line">             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec</span><br><span class="line"></span><br><span class="line">  Bridge ID  Priority    32769  (priority 32768 sys-id-ext 1)</span><br><span class="line">             Address     0021.1cb6.9880</span><br><span class="line">             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec</span><br><span class="line">             Aging Time 300</span><br><span class="line"></span><br><span class="line">Interface        Role Sts Cost      Prio.Nbr Type</span><br><span class="line">---------------- ---- --- --------- -------- --------------------------------</span><br><span class="line">Gi0&#x2F;1            Desg FWD 19        128.1    Shr</span><br><span class="line">Fa0&#x2F;1            Desg FWD 19        128.2    P2p</span><br><span class="line">Fa0&#x2F;2            Desg FWD 19        128.3    P2p</span><br><span class="line">Fa0&#x2F;4            Desg FWD 19        128.5    P2p</span><br></pre></td></tr></table></figure></p>
<p>通过 命令 show interface Fa0/1，其输出如下： <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">Switch#show interface Fa0&#x2F;1</span><br><span class="line">FastEthernet0&#x2F;1 is up, line protocol is up (connected)</span><br><span class="line">  Hardware is Fast Ethernet, address is 0021.1cb6.9882 (bia 0021.1cb6.9882)</span><br><span class="line">  MTU 1500 bytes, BW 100000 Kbit, DLY 100 usec,</span><br><span class="line">     reliability 255&#x2F;255, txload 1&#x2F;255, rxload 1&#x2F;255</span><br><span class="line">  Encapsulation ARPA, loopback not set</span><br><span class="line">  Keepalive set (10 sec)</span><br><span class="line">  Full-duplex, 100Mb&#x2F;s, media type is 10&#x2F;100BaseTX</span><br><span class="line">  input flow-control is off, output flow-control is unsupported</span><br><span class="line">  ARP type: ARPA, ARP Timeout 04:00:00</span><br><span class="line">  Last input never, output 00:00:00, output hang never</span><br><span class="line">  Last clearing of &quot;show interface&quot; counters never</span><br><span class="line">  Input queue: 0&#x2F;75&#x2F;0&#x2F;0 (size&#x2F;max&#x2F;drops&#x2F;flushes); Total output drops: 0</span><br><span class="line">  Queueing strategy: fifo</span><br><span class="line">  Output queue: 0&#x2F;40 (size&#x2F;max)</span><br><span class="line">  5 minute input rate 0 bits&#x2F;sec, 0 packets&#x2F;sec</span><br><span class="line">  5 minute output rate 0 bits&#x2F;sec, 0 packets&#x2F;sec</span><br><span class="line">     53 packets input, 4450 bytes, 0 no buffer</span><br><span class="line">     Received 29 broadcasts (0 multicasts)</span><br><span class="line">     0 runts, 0 giants, 0 throttles</span><br><span class="line">     0 input errors, 0 CRC, 0 frame, 0 overrun, 0 ignored</span><br><span class="line">     0 watchdog, 4 multicast, 0 pause input</span><br><span class="line">     0 input packets with dribble condition detected</span><br><span class="line">     2169 packets output, 191447 bytes, 0 underruns</span><br><span class="line">     0 output errors, 0 collisions, 1 interface resets</span><br><span class="line">     0 babbles, 0 late collision, 0 deferred</span><br><span class="line">     0 lost carrier, 0 no carrier, 0 PAUSE output</span><br><span class="line">     0 output buffer failures, 0 output buffers swapped out</span><br></pre></td></tr></table></figure></p>
<p>我们不妨再看一看, show interface Ga0/1 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">Switch#show interface GigabitEthernet0&#x2F;1</span><br><span class="line">GigabitEthernet0&#x2F;1 is up, line protocol is up (connected)</span><br><span class="line">  Hardware is Gigabit Ethernet, address is 0021.1cb6.9881 (bia 0021.1cb6.9881)</span><br><span class="line">  MTU 1500 bytes, BW 100000 Kbit, DLY 100 usec,</span><br><span class="line">     reliability 255&#x2F;255, txload 1&#x2F;255, rxload 1&#x2F;255</span><br><span class="line">  Encapsulation ARPA, loopback not set</span><br><span class="line">  Keepalive not set</span><br><span class="line">  Half-duplex, 100Mb&#x2F;s, link type is auto, media type is 10&#x2F;100&#x2F;1000BaseTX</span><br><span class="line">  input flow-control is off, output flow-control is unsupported</span><br><span class="line">  ARP type: ARPA, ARP Timeout 04:00:00</span><br><span class="line">  Last input 00:00:20, output 00:00:01, output hang never</span><br><span class="line">  Last clearing of &quot;show interface&quot; counters never</span><br><span class="line">  Input queue: 0&#x2F;75&#x2F;0&#x2F;0 (size&#x2F;max&#x2F;drops&#x2F;flushes); Total output drops: 0</span><br><span class="line">  Queueing strategy: fifo</span><br><span class="line">  Output queue: 0&#x2F;40 (size&#x2F;max)</span><br><span class="line">  5 minute input rate 0 bits&#x2F;sec, 0 packets&#x2F;sec</span><br><span class="line">  5 minute output rate 0 bits&#x2F;sec, 0 packets&#x2F;sec</span><br><span class="line">     1057 packets input, 155540 bytes, 0 no buffer</span><br><span class="line">     Received 508 broadcasts (0 multicasts)</span><br><span class="line">     0 runts, 0 giants, 0 throttles</span><br><span class="line">     0 input errors, 0 CRC, 0 frame, 0 overrun, 0 ignored</span><br><span class="line">     0 watchdog, 481 multicast, 0 pause input</span><br><span class="line">     0 input packets with dribble condition detected</span><br><span class="line">     1652 packets output, 128172 bytes, 0 underruns</span><br><span class="line">     0 output errors, 0 collisions, 1 interface resets</span><br><span class="line">     0 babbles, 0 late collision, 0 deferred</span><br><span class="line">     0 lost carrier, 0 no carrier, 0 PAUSE output</span><br><span class="line">     0 output buffer failures, 0 output buffers swapped out</span><br></pre></td></tr></table></figure> 其实，命令 show version 返回的信息之中，也是包含有 switch 的 MAC 地址的，比如如下输出：</p>
<p>（需要补充。。。）</p>
<p>在配置模式下, 输入如下命令： <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">conf t</span><br><span class="line">monitor session 1 source plan 1</span><br><span class="line">monitor session 1 destination interface Fa0&#x2F;3</span><br><span class="line">exit</span><br></pre></td></tr></table></figure> 在命令行模式下，继续输入：write</p>
<p>为了完成本次TP，还需要熟悉工具 Iperf 的用法</p>
<h2 id="stp-收敛问题">STP 收敛问题</h2>
<p>虽然采用 STP 可以有效避免 交换机环路问题，但是 STP 协议的收敛时间 通常为 40-50 秒。这 STP 收敛时间期间， 所有的交换机是无法进行数据转发的，对于大型网络来说，也许拓扑结构的改变是时有发生的（比如插拔网线），如果每次STP都需要40-50秒的时间来处理这种改变，那么带来的延时对用户来说是无法忍受的。所以，在什么网络中，什么情况下使用 STP 需要慎重考虑。</p>
<h2 id="关于如何删除更改-vlan">关于如何删除/更改 VLAN</h2>
<p>有些学生在 TP 开始的时候，忘记了初始化switch，尤其在制造 Loopback 观察 STP如何关闭port的时候。有可能会因为因为不同的端口位于不同的VLAN上导致看不到预想的情况。这种情况下，我们需要知道，如何在 switch 更改/删除 VLAN。 以下命令，可以更改VLAN <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">interface range gigabitEThernet 1&#x2F;0&#x2F;3-6</span><br><span class="line">switchport access vlan 1</span><br><span class="line">exit</span><br></pre></td></tr></table></figure> 以下命令，可以删除VLAN <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">no vlan 192</span><br></pre></td></tr></table></figure></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://rennesong.com/2015/08/19/LTE-Basics/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="rennsong">
      <meta itemprop="description" content="Personal blog site, to note technique and life related articles">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Rennesong's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2015/08/19/LTE-Basics/" class="post-title-link" itemprop="url">LTE-Basics</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2015-08-19 18:32:09" itemprop="dateCreated datePublished" datetime="2015-08-19T18:32:09+08:00">2015-08-19</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-03-25 18:27:10" itemprop="dateModified" datetime="2019-03-25T18:27:10+08:00">2019-03-25</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>此贴是一个草稿性质的帖子，目的是记录下我对LTE的基础知识的理解和总结，若干时间后，此贴必将是一个宝贵的财富。</p>
<p>When a UE has packets to transmit, it performs random access (RA) during an allowable time slot. This timeslot is called an Access Grant Time Interval(ACGI) or RA opportunity (i.e., RA-slot).</p>
<p>The minimum resource scheduling unit for downlink and uplink transmission is referred to as an RB. One RB consists of 12 subcarriers (180 kHz) in the frequency domain and one subframe (1 ms) in the time domain. Details of the LTE-A physical layer is provided in [3GPP TS 36.300 V11.2.0, “Evolved Universal Terrestrial Radio Access (E-UTRA) and Evolved Universal Terrestrial Radio Access Network (EUTRAN), Overall Description,” June 2012., Sec. 5], and a brief review of M2M scheduling and signaling over LTE-A is provided in [4]. RA allows MTC devices to request a connection initialization. The RA-slots have bandwidth corresponding to six RBs (1.08 MHz) in the frequency domain, and the basic duration of an RA-slot is 1 ms in the time domain.</p>
<p>In LTE-Advanced networks, radio resources are usually divided into resource blocks (RBs) along the frequency domain per time slot, which is also referred to as subchannels in radio resource allocation.</p>
<p>In the LTE-A, RA can be used for initial access to establish a radio link, resource request when no uplink radio resource has been allocated, scheduling request if no dedicated scheduling request has been configured (i.e., no dedicated physical uplink control channel [PUCCH] is available), and re-establishing a radio link after failure.</p>
<p>在物理层方面 ： In order to meet the requirements of LTE- Advanced such as peak data rates of up to 1 Gb/s, more spectrum bands are needed. Besides the existing carriers for 3G networks, spectrum bands located at 450–470 MHz, 698–790 MHz, 2.3–2.4 GHz, and 3.4–3.6 GHz can be used for the deployment of LTE and LTE-Advanced networks. Moreover, LTE-Advanced has been defined to support scalable carrier bandwidth exceeding 20 MHz, potentially up to 100 MHz, in a variety of carriers for deployments.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/5/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><span class="page-number current">6</span><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/7/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">rennsong</p>
  <div class="site-description" itemprop="description">Personal blog site, to note technique and life related articles</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">69</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">20</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">22</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/hansomesong" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;hansomesong" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">rennsong</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://mist.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  

</body>
</html>
