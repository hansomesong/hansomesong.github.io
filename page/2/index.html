<!DOCTYPE html>












  


<html class="theme-next mist use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
























<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=7.0.1">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.0.1">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.0.1">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.0.1">


  <link rel="mask-icon" href="/images/logo.svg?v=7.0.1" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '7.0.1',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="Personal blog site, to note technique and life related articles">
<meta property="og:type" content="website">
<meta property="og:title" content="Rennesong&#39;s blog">
<meta property="og:url" content="http://rennesong.com/page/2/index.html">
<meta property="og:site_name" content="Rennesong&#39;s blog">
<meta property="og:description" content="Personal blog site, to note technique and life related articles">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Rennesong&#39;s blog">
<meta name="twitter:description" content="Personal blog site, to note technique and life related articles">



  <link rel="alternate" href="/atom.xml" title="Rennesong's blog" type="application/atom+xml">




  <link rel="canonical" href="http://rennesong.com/page/2/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>Rennesong's blog</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Rennesong's blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">Blog my life from now on!</p>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
    
      
    

    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>关于</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>

      
      
    </ul>
  

  
    

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rennesong.com/2016/10/22/TP-Ethernet-md/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="rennsong">
      <meta itemprop="description" content="Personal blog site, to note technique and life related articles">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Rennesong's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/10/22/TP-Ethernet-md/" class="post-title-link" itemprop="url">Ethernet 交换实验准备工作</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2016-10-22 00:52:33" itemprop="dateCreated datePublished" datetime="2016-10-22T00:52:33+02:00">2016-10-22</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-03-25 11:27:10" itemprop="dateModified" datetime="2019-03-25T11:27:10+01:00">2019-03-25</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1>生成树算法</h1>
<p>介绍下，计算机科学中的经典算法。理论部分</p>
<h1>交换机中生成树算法工作原理</h1>
<p>概括来讲，STP的工作流程可以分为三个阶段：</p>
<ul>
<li>Root Brideg 选举</li>
<li>Root Port (for non-root bridge) 选举</li>
<li>Designated Port 选举</li>
</ul>
<ul>
<li>【<a href="http://www.omnisecu.com/cisco-certified-network-associate-ccna/how-spanning-tree-protocol-stp-select-designated-port.php%E3%80%91" target="_blank" rel="noopener">http://www.omnisecu.com/cisco-certified-network-associate-ccna/how-spanning-tree-protocol-stp-select-designated-port.php】</a></li>
<li>这个帖子对Designated Port的选举给出了非常详细的解释</li>
</ul>
<p>以下帖子对STP原理部分 给出了非常<br>
【<a href="https://www.pluralsight.com/blog/software-development/spanning-tree-protocol-tutorial%E3%80%91" target="_blank" rel="noopener">https://www.pluralsight.com/blog/software-development/spanning-tree-protocol-tutorial】</a></p>
<p>以后最好 保留一些 STP 的traces，用以展示STP协议发送的packet的内容，比如有没有IP层？<br>
无图无真相。<br>
For the election of the Root Bridge (bridge is equivalent to Switch), the one that will be the initial point of reference, switches manipulate and analyze the Root Bridge ID and Sender Bridge ID fields. Both of these fields consist of a six byte MAC address header and a two byte Bridge Priority header. The switch with the smallest Bridge Priority is automatically elected as the Root Bridge. If Bridge Priority is the same on all switches then the switch with the smaller MAC address is elected as the Root Bridge.</p>
<p>在 交换机 默认配置下，据说只有ARP diffusion 通过，那么发出请求的机器是如何知道 对应IP地址的MAC地址的呢？</p>
<p>对这句话也不是很理解，</p>
<p>il est en full duplex, donc le protocole CSMA/CD est désactivé.<br>
我想那是因为 full duplex 是因为 发送还有接受方，走的是不同的channel(比如不同的频率)，所以根本不需要运行 CSMA/CD 协议<br>
il est en half duplex, donc le protocole CSMA/CD est activé.<br>
因为采用的是半双工，所以 发送以及接受，占用的都是同样的channel. 那么当然需要一些 冲突避免机制。</p>
<p>在命令行模式下<br>
show interfaces status<br>
注意比较这俩命令的区别：<br>
show interfaces status<br>
show interfaces<br>
show interface 端口名字<br>
一个是以列表形式把所有interfaces的信息汇集起来显示出来，一个是把每个interface的信息详细地显示出来，<br>
而show interface 端口名字 则是只详细显示一个端口的信息</p>
<h1>TP 中遇到的问题</h1>
<h2 id="路由器-and-mac"><a class="header-anchor" href="#路由器-and-mac">null</a>路由器 and MAC</h2>
<p>实际上，一个交换机并不一定只具有一个 MAC 地址。比如为了支持 Spanning Tree Protocol (STP)，交换机的每个接口就需要有一个专属的M AC 地址。我们以 Telecom Bretagne 实验室的配置情况为例：该实验采用的是 Cisco Catalyst 3560 交换机。该交换机配备有8个 FastEthernet端口以及1个 GigaEthernet 端口。我们可以通过如下命令查看下， 这9个端口的MAC地址：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">Switch#show mac-address-table</span><br><span class="line">          Mac Address Table</span><br><span class="line">-------------------------------------------</span><br><span class="line"></span><br><span class="line">Vlan    Mac Address       Type        Ports</span><br><span class="line">----    -----------       --------    -----</span><br><span class="line"> All    0100.0ccc.cccc    STATIC      CPU</span><br><span class="line"> All    0100.0ccc.cccd    STATIC      CPU</span><br><span class="line"> All    0180.c200.0000    STATIC      CPU</span><br><span class="line"> All    0180.c200.0001    STATIC      CPU</span><br><span class="line"> All    0180.c200.0002    STATIC      CPU</span><br><span class="line"> All    0180.c200.0003    STATIC      CPU</span><br><span class="line"> All    0180.c200.0004    STATIC      CPU</span><br><span class="line"> All    0180.c200.0005    STATIC      CPU</span><br><span class="line"> All    0180.c200.0006    STATIC      CPU</span><br><span class="line"> All    0180.c200.0007    STATIC      CPU</span><br><span class="line"> All    0180.c200.0008    STATIC      CPU</span><br><span class="line"> All    0180.c200.0009    STATIC      CPU</span><br><span class="line"> All    0180.c200.000a    STATIC      CPU</span><br><span class="line"> All    0180.c200.000b    STATIC      CPU</span><br><span class="line"> All    0180.c200.000c    STATIC      CPU</span><br><span class="line"> All    0180.c200.000d    STATIC      CPU</span><br><span class="line"> All    0180.c200.000e    STATIC      CPU</span><br><span class="line"> All    0180.c200.000f    STATIC      CPU</span><br><span class="line"> All    0180.c200.0010    STATIC      CPU</span><br><span class="line"> All    ffff.ffff.ffff    STATIC      CPU</span><br><span class="line">   1    0008.e3ff.fc28    DYNAMIC     Gi0/1</span><br><span class="line">   1    000a.5e3f.61b0    DYNAMIC     Gi0/1</span><br><span class="line">   1    000a.f716.45f6    DYNAMIC     Gi0/1</span><br><span class="line">   1    0021.1cb9.8981    DYNAMIC     Gi0/1</span><br><span class="line">   1    0021.566a.0001    DYNAMIC     Gi0/1</span><br><span class="line">   1    0800.27c6.3745    DYNAMIC     Gi0/1</span><br><span class="line">   1    f029.2973.fd17    DYNAMIC     Gi0/1</span><br><span class="line">Total Mac Addresses for this criterion: 27</span><br></pre></td></tr></table></figure>
<p>STP的第一步是选择 Root Bridge, 选择标准是选择 Priority 最小的那个，如果所有的交换机的 Priority 的值都一样，那么选择 MAC 地址最小的那个。这里面，参与比较的 MAC 地址是交换机本身的 MAC 地址，而不是某个端口的 MAC 地址 （这一点，我有待确认，应该是这样的）。<br>
所以我们可以通过命令 show spanning-tree 来查看 STP 有关的数据（其中必然其本身的 MAC 地址以及 Root Bridge MAC 地址）：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">Switch#show spanning-tree</span><br><span class="line">VLAN0001</span><br><span class="line">  Spanning tree enabled protocol ieee</span><br><span class="line">  Root ID    Priority    32769</span><br><span class="line">             Address     0021.1cb6.9880</span><br><span class="line">             This bridge is the root</span><br><span class="line">             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec</span><br><span class="line"></span><br><span class="line">  Bridge ID  Priority    32769  (priority 32768 sys-id-ext 1)</span><br><span class="line">             Address     0021.1cb6.9880</span><br><span class="line">             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec</span><br><span class="line">             Aging Time 300</span><br><span class="line"></span><br><span class="line">Interface        Role Sts Cost      Prio.Nbr Type</span><br><span class="line">---------------- ---- --- --------- -------- --------------------------------</span><br><span class="line">Gi0/1            Desg FWD 19        128.1    Shr</span><br><span class="line">Fa0/1            Desg FWD 19        128.2    P2p</span><br><span class="line">Fa0/2            Desg FWD 19        128.3    P2p</span><br><span class="line">Fa0/4            Desg FWD 19        128.5    P2p</span><br></pre></td></tr></table></figure>
<p>通过 命令 show interface Fa0/1，其输出如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">Switch#show interface Fa0/1</span><br><span class="line">FastEthernet0/1 is up, line protocol is up (connected)</span><br><span class="line">  Hardware is Fast Ethernet, address is 0021.1cb6.9882 (bia 0021.1cb6.9882)</span><br><span class="line">  MTU 1500 bytes, BW 100000 Kbit, DLY 100 usec,</span><br><span class="line">     reliability 255/255, txload 1/255, rxload 1/255</span><br><span class="line">  Encapsulation ARPA, loopback not set</span><br><span class="line">  Keepalive set (10 sec)</span><br><span class="line">  Full-duplex, 100Mb/s, media type is 10/100BaseTX</span><br><span class="line">  input flow-control is off, output flow-control is unsupported</span><br><span class="line">  ARP type: ARPA, ARP Timeout 04:00:00</span><br><span class="line">  Last input never, output 00:00:00, output hang never</span><br><span class="line">  Last clearing of &quot;show interface&quot; counters never</span><br><span class="line">  Input queue: 0/75/0/0 (size/max/drops/flushes); Total output drops: 0</span><br><span class="line">  Queueing strategy: fifo</span><br><span class="line">  Output queue: 0/40 (size/max)</span><br><span class="line">  5 minute input rate 0 bits/sec, 0 packets/sec</span><br><span class="line">  5 minute output rate 0 bits/sec, 0 packets/sec</span><br><span class="line">     53 packets input, 4450 bytes, 0 no buffer</span><br><span class="line">     Received 29 broadcasts (0 multicasts)</span><br><span class="line">     0 runts, 0 giants, 0 throttles</span><br><span class="line">     0 input errors, 0 CRC, 0 frame, 0 overrun, 0 ignored</span><br><span class="line">     0 watchdog, 4 multicast, 0 pause input</span><br><span class="line">     0 input packets with dribble condition detected</span><br><span class="line">     2169 packets output, 191447 bytes, 0 underruns</span><br><span class="line">     0 output errors, 0 collisions, 1 interface resets</span><br><span class="line">     0 babbles, 0 late collision, 0 deferred</span><br><span class="line">     0 lost carrier, 0 no carrier, 0 PAUSE output</span><br><span class="line">     0 output buffer failures, 0 output buffers swapped out</span><br></pre></td></tr></table></figure>
<p>我们不妨再看一看, show interface Ga0/1</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">Switch#show interface GigabitEthernet0/1</span><br><span class="line">GigabitEthernet0/1 is up, line protocol is up (connected)</span><br><span class="line">  Hardware is Gigabit Ethernet, address is 0021.1cb6.9881 (bia 0021.1cb6.9881)</span><br><span class="line">  MTU 1500 bytes, BW 100000 Kbit, DLY 100 usec,</span><br><span class="line">     reliability 255/255, txload 1/255, rxload 1/255</span><br><span class="line">  Encapsulation ARPA, loopback not set</span><br><span class="line">  Keepalive not set</span><br><span class="line">  Half-duplex, 100Mb/s, link type is auto, media type is 10/100/1000BaseTX</span><br><span class="line">  input flow-control is off, output flow-control is unsupported</span><br><span class="line">  ARP type: ARPA, ARP Timeout 04:00:00</span><br><span class="line">  Last input 00:00:20, output 00:00:01, output hang never</span><br><span class="line">  Last clearing of &quot;show interface&quot; counters never</span><br><span class="line">  Input queue: 0/75/0/0 (size/max/drops/flushes); Total output drops: 0</span><br><span class="line">  Queueing strategy: fifo</span><br><span class="line">  Output queue: 0/40 (size/max)</span><br><span class="line">  5 minute input rate 0 bits/sec, 0 packets/sec</span><br><span class="line">  5 minute output rate 0 bits/sec, 0 packets/sec</span><br><span class="line">     1057 packets input, 155540 bytes, 0 no buffer</span><br><span class="line">     Received 508 broadcasts (0 multicasts)</span><br><span class="line">     0 runts, 0 giants, 0 throttles</span><br><span class="line">     0 input errors, 0 CRC, 0 frame, 0 overrun, 0 ignored</span><br><span class="line">     0 watchdog, 481 multicast, 0 pause input</span><br><span class="line">     0 input packets with dribble condition detected</span><br><span class="line">     1652 packets output, 128172 bytes, 0 underruns</span><br><span class="line">     0 output errors, 0 collisions, 1 interface resets</span><br><span class="line">     0 babbles, 0 late collision, 0 deferred</span><br><span class="line">     0 lost carrier, 0 no carrier, 0 PAUSE output</span><br><span class="line">     0 output buffer failures, 0 output buffers swapped out</span><br></pre></td></tr></table></figure>
<p>其实，命令 show version 返回的信息之中，也是包含有 switch 的 MAC 地址的，比如如下输出：</p>
<p>（需要补充。。。）</p>
<p>在配置模式下, 输入如下命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">conf t</span><br><span class="line">monitor session 1 source plan 1</span><br><span class="line">monitor session 1 destination interface Fa0/3</span><br><span class="line">exit</span><br></pre></td></tr></table></figure>
<p>在命令行模式下，继续输入：write</p>
<p>为了完成本次TP，还需要熟悉工具 Iperf 的用法</p>
<h2 id="stp-收敛问题"><a class="header-anchor" href="#stp-收敛问题">null</a>STP 收敛问题</h2>
<p>虽然采用 STP 可以有效避免 交换机环路问题，但是 STP 协议的收敛时间 通常为 40-50 秒。这 STP 收敛时间期间， 所有的交换机是无法进行数据转发的，对于大型网络来说，也许拓扑结构的改变是时有发生的（比如插拔网线），如果每次STP都需要40-50秒的时间来处理这种改变，那么带来的延时对用户来说是无法忍受的。所以，在什么网络中，什么情况下使用 STP 需要慎重考虑。</p>
<h2 id="关于如何删除-更改-vlan"><a class="header-anchor" href="#关于如何删除-更改-vlan">null</a>关于如何删除/更改 VLAN</h2>
<p>有些学生在 TP 开始的时候，忘记了初始化switch，尤其在制造 Loopback 观察 STP如何关闭port的时候。有可能会因为因为不同的端口位于不同的VLAN上导致看不到预想的情况。这种情况下，我们需要知道，如何在 switch 更改/删除 VLAN。<br>
以下命令，可以更改VLAN</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">interface range gigabitEThernet 1/0/3-6</span><br><span class="line">switchport access vlan 1</span><br><span class="line">exit</span><br></pre></td></tr></table></figure>
<p>以下命令，可以删除VLAN</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">no vlan 192</span><br></pre></td></tr></table></figure>
          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rennesong.com/2016/10/22/tech-spider-md/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="rennsong">
      <meta itemprop="description" content="Personal blog site, to note technique and life related articles">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Rennesong's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/10/22/tech-spider-md/" class="post-title-link" itemprop="url">一直神奇的蜘蛛</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2016-10-22 00:21:19" itemprop="dateCreated datePublished" datetime="2016-10-22T00:21:19+02:00">2016-10-22</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-03-25 11:27:10" itemprop="dateModified" datetime="2019-03-25T11:27:10+01:00">2019-03-25</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>和雷恩的一帮博士小伙伴一起弄了一个微信公众号: 科技蜘蛛。<br>
希望大家关注。</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rennesong.com/2015/08/19/LTE-Basics/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="rennsong">
      <meta itemprop="description" content="Personal blog site, to note technique and life related articles">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Rennesong's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2015/08/19/LTE-Basics/" class="post-title-link" itemprop="url">LTE-Basics</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2015-08-19 18:32:09" itemprop="dateCreated datePublished" datetime="2015-08-19T18:32:09+02:00">2015-08-19</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-03-25 11:27:10" itemprop="dateModified" datetime="2019-03-25T11:27:10+01:00">2019-03-25</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>此贴是一个草稿性质的帖子，目的是记录下我对LTE的基础知识的理解和总结，若干时间后，此贴必将是一个宝贵的财富。</p>
<p>When a UE has packets to transmit, it performs random access (RA) during an allowable time slot. This timeslot is called an Access Grant Time Interval(ACGI) or RA opportunity (i.e., RA-slot).</p>
<p>The minimum resource scheduling unit for downlink and uplink transmission is referred to as an RB. One RB consists of 12 subcarriers (180 kHz) in the frequency domain and one subframe (1 ms) in the time domain. Details of the LTE-A physical layer is provided in [3GPP TS 36.300 V11.2.0, “Evolved Universal Terrestrial Radio Access (E-UTRA) and Evolved Universal Terrestrial Radio Access Network (EUTRAN), Overall Description,” June 2012., Sec. 5], and a brief review of M2M scheduling and signaling over LTE-A is provided in [4].<br>
RA allows MTC devices to request a connection initialization. The RA-slots have bandwidth corresponding to six RBs (1.08 MHz) in the frequency domain, and the basic duration of an RA-slot is 1 ms in the time domain.</p>
<p>In LTE-Advanced networks, radio resources are usually divided into resource blocks (RBs) along the frequency domain per time slot, which is also referred to as subchannels in radio resource allocation.</p>
<p>In the LTE-A, RA can be used for initial access to establish a radio link, resource request when no uplink radio resource has been allocated, scheduling request if no dedicated scheduling request has been configured (i.e., no dedicated physical uplink control channel [PUCCH] is available), and re-establishing a radio link after failure.</p>
<p>在物理层方面 \cite{KanZheng12}：<br>
In order to meet the requirements of LTE- Advanced such as peak data rates of up to 1 Gb/s, more spectrum bands are needed. Besides the existing carriers for 3G networks, spectrum bands located at 450–470 MHz, 698–790 MHz, 2.3–2.4 GHz, and 3.4–3.6 GHz can be used for the deployment of LTE and LTE-Advanced networks. Moreover, LTE-Advanced has been defined to support scalable carrier bandwidth exceeding 20 MHz, potentially up to 100 MHz, in a variety of carriers for deployments.</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rennesong.com/2015/08/02/how-to-establish-a-ssh-connection-between-two-PCs-behind-NAT/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="rennsong">
      <meta itemprop="description" content="Personal blog site, to note technique and life related articles">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Rennesong's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2015/08/02/how-to-establish-a-ssh-connection-between-two-PCs-behind-NAT/" class="post-title-link" itemprop="url">how to establish a ssh connection between two PCs behind NAT</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2015-08-02 14:22:43" itemprop="dateCreated datePublished" datetime="2015-08-02T14:22:43+02:00">2015-08-02</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-03-25 11:27:10" itemprop="dateModified" datetime="2019-03-25T11:27:10+01:00">2019-03-25</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>我想在家里通过SSH访问位于办公室里的电脑。不幸的是，从我家里的电脑到办公室里的电脑至少要通过两个NAT。还在学校专门提供了一台机器提供SSH中转。</p>
<p>电脑的名字叫做：<a href="http://ssh.rennes.telecom-bretagne.eu" target="_blank" rel="noopener">ssh.rennes.telecom-bretagne.eu</a>, 只是我忘记了，给ssh开发的端口号是哪个了。所以第一步需要通过nmap看看目标主机上哪些端口是开放的。</p>
<p>Smart Grid Traffic Behaviour Discussion， 2010，April<br>
这篇文章属于讨论性质的文章，最大的亮点在于为学术界定义了 Smart grid 的 Traffic Characteristics。当然文章里也提到了一句：</p>
<blockquote>
<p>Overload control has been prioritized for work in Rel-10 time frame together with several other functinalities.</p>
</blockquote>
<p>当然文章还指出了，我们可以做改进的apsects:</p>
<ul>
<li>Radio resource overload control</li>
<li>MME overload control</li>
</ul>
<h1>Reliable reporting for Massive M2M communications with periodic resource pooling, 2014, August</h1>
<p>关注的case: periodic reporting<br>
问题： massive M2M devices, 保证report被在给定的dealine之前以比如99%的可靠性被发送<br>
方法：a M2M-dedicated resource pool, 作者论证了这个资源池的规模至少要多大。<br>
分析简述：首先一个 M2M device 在上述的资源池里要发送的transmission number是随机变量，因为：1）自last reporting至current reporting之间的arrived reports的数目是随机的。2）retransmission mechanism 这么一个事实 使得 问题变得较为复杂了。(不然，我们可以提前周期性的给这些设备分配资源了)<br>
a massive number of devices 使得 中心极限定理 可以使用了。</p>
<p>对于确定的 资源池，在保证一定的 reliability level的前提下，最多可以服务多少 M2M device 呢？</p>
<p>System model:<br>
Reporting Interval (RI), 可以被 视为 Poisson process 亦可以被视为 Uniform distribution。作者只考虑 Poisson process 的情况，但同时也是，他们推导的结论，亦适用于 Uniform distribution 的情况。<br>
Time-frequency 资源被分作两个资源池：一个给M2M，另一个给non-M2M。并且指出了这种 seperation 是常用手段。接下来，M2M-dedicated resource pool 也被分为两部分：preallocated and common pool。</p>
<p>我比较好奇，上文中提到的LTE simulator究竟是何方神圣？</p>
<p>#Radio Resource Allocation in LTE-Advanced Cellular Networks with M2M Communications<br>
作者认为，M2M的特性有：group-based communications, low or no mobility, time-controlled, time-tolerant, small data transmission, secure connection, MTC monitoring, priority alarm messages, extra low power consumption, etc.<br>
提出 group-based communications 的特性，蛮有意思的。<br>
作者也指出了(不知是否为首创)MTCD-related transmission有三种情景：Direct transmission, Multiple-hop transmisison, peer-to-peer transmission(实际上就是D2D)<br>
。<br>
作者在本文中对network applications进行了分类：Class1 Elastic applications, Class2 Hard Real-time appliation, Class3 Delay adaptivea applications, Class4 Rata-adaptive applications。<br>
作者提出了user utility的指标来优化，作者认为：simple QoS indicator是不足以<br>
“the user utility of a service is a measurement of its QoS performance based on the provided network services such as the bandwidth, transmission delay, and loss ratio.” “With the control of the eNB, radio resources can be efficiently shared between the eNB-to-UE and eNB-to-MTCD links by using the utility-based scheduling scheme.” 貌似Utility这个函数值在0，1之间，可是具体究竟是什么就无从得知了。</p>
<p>总得来说，这篇文章虽然不是致力于 Energy-saving/efficiency 的，它主要是讨论在M2M参与的情况下，如何在Cellular network中进行RRA，以减少 Co-channel inteference和提高network efficiency。(不就是提高服务用户数么)它给我们定义了一个很好的分析模型框架使得日后的许多研究都可以这个框架进行。</p>
<p>这篇文章中关于 Architectual enhancement 的部分(比如各类名词的引入，比如MTCG功能的介绍)可以吸收整合进我的SOTA。另外 “On the assumption of half-duplex MTCGs” 的描述，是本文作者之首创还是真的有文献如此论述过呢？作者并未回答，鉴于MTCG 这种新型网络节点并非此文作者引入，我倾向于某个3GPP文档里，有关于 MTCG 双工模式的探讨。“To avoid self-inteference and reduce implementation complexity, half-duplex MTCGs are preferred for deployement in the networks.”</p>
<p>作者最后也做了 system-level simulation，但是用的究竟是 什么工具呢？</p>
<h1>Energy-efficent Uplink Resource Allocation in LTE network with M2M/H2H co-existence under statistical QoS guarantees</h1>
<p>作者试图从 Resource allocation 的角度研究 LTE 上行信道 能量效率问题。突然有一个疑问：为什么 Radio Resource Allocation 会对能量消耗有影响？<br>
我的理解是：Radio Resource Allocation 实际上决定了跟 UE 分配多少个 RBs 的问题，实际上就是分给了 UE 多少 Bandwidth, 而根据香浓公式(不过要注意，这是极限情况)。速度一定的情况下，带宽B是可以可以决定信噪比SNR的，而信噪比SNR是可以影响误码率的，通信的正常进行是以保证误码率BER在一定水平之内为前提的。为了达到一定的信噪比，则对 UE 的发射功率P 提出了要求，在 time slot 长度一定的时候，单位 slot 消耗的能量就是确定的。由此可见，RRM(RRA)是可以影响到能量效率 Energy efficiency 的。<br>
所以这篇文章中，作者将 Energy efficiency 问题转换成了一个 optimization 的问题，并且用数学方法求出了极值。虽然其中涉及的数学知识，至今都不是很明白，但个人感觉，这篇文章，相当完美。</p>
<h1>On radio resource allocation in LTE networks with machine-to-machine communications</h1>
<p>依然是 Aijaz 的作品，采用了 heuristic 算法 来解决 energy-efficient resource allocation 问题。</p>
<h1>A Tractable Model of the LTE Access Reservation Procedure for Machine-Type Communications</h1>
<p>作者认为：The number of served devices in a single LTE cell is not determined by the available aggregate rate, but rather by the limitations of the LTE access reservation protoco. 故而提出了一个 数学模型 研究现行 LTE接入机制 上行信道可以容纳多少 M2M 设备。我比较喜欢此文中的数学推导，马尔科夫链。</p>
<h1>Machine Type Communications in 3GPP Networks: Potential, Challenges, and Solutions</h1>
<p>作者认为：</p>
<blockquote>
<p>This explains the focus of 3GPP on finding efficient mechanisms to handle congestion at mainly the control plane of EPS that may happen due to nearly simultaneous signaling messages issued by a significant number of mobile devices. Thanks to the wide bandwidth of LTE and other emerging radio technologies (e.g., LTE-advanced), congestion due to user data packets is, for the time being, of less impor- tance.</p>
</blockquote>
<p>因为作者提出：</p>
<blockquote>
<p>One aspect which is missing so far in MTC signaling congestion control consists in the lack of a mechanism that handles a bulk of similar signaling messages from MTCs in a single shot (i.e. bulk MTC signaling handling).</p>
</blockquote>
<p>我们是不是可虑构造一个表格，这个表格里面，我们详细对比 跟Energy(甚至是M2M)有关的proposal。</p>
<p>经常看到 Utility function 这样的表述，其为何意？</p>
<h1>Modeling and Characterization of Transmission Energy Consumption in Machine-to-Machine Networks</h1>
<p>作者认为：A key step in building energy-efficient protocols for large-scale M2M communications is to assess, model or characterize a network energy consumption profile. 可见作者之最终目的为：build energy-efficient protocol。所用知识为随机几何。</p>
<blockquote>
<p>We borrowed tools from stochastic geometry and Poisson point process to model and study energy consumption in large-scale M2M communications by deriving the cumula- tive distribution function (CDF) of energy consumption.</p>
</blockquote>
<h1>Energy-saving massive access control and resource allocation schemes for M2M communications in OFDMA cellular networks</h1>
<p>作者之侧重点在于：Energy-based access control and resource allocation，缺点在乎于 a single cell。</p>
<p>Green Communications: Principles, Concepts and Practice 这本书是2015年新出的书，可以考虑。</p>
<p>D2D communication is a feature that has been introduced in the 3GPP Release 12.</p>
<p>5G考虑使用 毫米波波段</p>
<p>64QAM貌似适合在离基站比较近的地方用，QPSK适合在比较远的地方用。我猜测64QAM速度高但抗干扰能力差，反之，QPSK速率低，但是可以恢复出信号。</p>
<p>LTE-M 的 活动 我没有考虑过啊。。。这个可以加到 SOTA 之中<br>
在 Design of an improved energy efficient clustering in M2M communication 中，作者的描述：long term evolution for machine type communication (LTE-M) network, which comes under LTE network. 感觉LTE-M是 EXALTED 项目的一部分。</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rennesong.com/2015/08/01/how-to-install-ns-3-in-Ubuntu-15-04/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="rennsong">
      <meta itemprop="description" content="Personal blog site, to note technique and life related articles">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Rennesong's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2015/08/01/how-to-install-ns-3-in-Ubuntu-15-04/" class="post-title-link" itemprop="url">Ubuntu 15.04下安装NS-3</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2015-08-01 20:00:41" itemprop="dateCreated datePublished" datetime="2015-08-01T20:00:41+02:00">2015-08-01</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-03-25 11:27:10" itemprop="dateModified" datetime="2019-03-25T11:27:10+01:00">2019-03-25</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>官方教程</p>
<h1>Prerequists</h1>
<p>关于Ubuntu下的Prerequistes，[1]中有很详细的解释。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 版本管理软件</span></span><br><span class="line">sudo apt-get install git cvs mercurial</span><br><span class="line"><span class="meta">#</span><span class="bash"></span></span><br><span class="line">sudo apt-get install gcc g++ python python-dev qt4-dev-tools bzr cmake libc6-dev libc6-dev-i386 g++-multilib gdb valgrind gsl-bin libgsl0-dev libgsl0ldbl flex bison libfl-dev sqlite sqlite3 libsqlite3-dev libxml2 libxml2-dev libgtk2.0-0 libgtk2.0-dev vtun lxc uncrustify doxygen graphviz imagemagick python-sphinx dia python-pygraphviz python-kiwi python-pygoocanvas libgoocanvas-dev libboost-signals-dev libboost-filesystem-dev openmpi-bin openmpi-common openmpi-doc libopenmpi-dev p7zip-full rar unrar autoconf </span><br><span class="line">sudo apt-get install python-pygccxml</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">Note: Sphinx version &gt;= 1.12 required <span class="keyword">for</span> ns-3.15. To check your version, <span class="built_in">type</span> <span class="string">"sphinx-build"</span>. To fetch this package alone, outside of the Ubuntu package system, try <span class="string">"sudo easy_install -U Sphinx"</span>.</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">跟Tex有关的包，由于体积交大，所以最后再安装</span></span><br><span class="line">sudo apt-get install texlive texlive-extra-utils texlive-latex-extra</span><br></pre></td></tr></table></figure>
<h1>安装</h1>
<p>安装方式有好多种，我们选择Bake方法</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkdir repos &amp;&amp; cd repos</span><br><span class="line">hg clone http://code.nsnam.org/bake</span><br><span class="line">export PATH=$PATH:$BAKE_HOME</span><br><span class="line">export PYTHONPATH=$PYTHONPATH:$BAKE_HOME</span><br></pre></td></tr></table></figure>
<p>执行./bake.py check, 输出为：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">qsong@sony:~/Documents/repos/bake$ ./bake.py check</span><br><span class="line"><span class="meta"> &gt;</span><span class="bash"> Python - OK</span></span><br><span class="line"><span class="meta"> &gt;</span><span class="bash"> GNU C++ compiler - OK</span></span><br><span class="line"><span class="meta"> &gt;</span><span class="bash"> Mercurial - OK</span></span><br><span class="line"><span class="meta"> &gt;</span><span class="bash"> CVS - OK</span></span><br><span class="line"><span class="meta"> &gt;</span><span class="bash"> GIT - OK</span></span><br><span class="line"><span class="meta"> &gt;</span><span class="bash"> Bazaar - OK</span></span><br><span class="line"><span class="meta"> &gt;</span><span class="bash"> Tar tool - OK</span></span><br><span class="line"><span class="meta"> &gt;</span><span class="bash"> Unzip tool - OK</span></span><br><span class="line"><span class="meta"> &gt;</span><span class="bash"> Unrar tool - OK</span></span><br><span class="line"><span class="meta"> &gt;</span><span class="bash"> 7z  data compression utility - OK</span></span><br><span class="line"><span class="meta"> &gt;</span><span class="bash"> XZ data compression utility - OK</span></span><br><span class="line"><span class="meta"> &gt;</span><span class="bash"> Make - OK</span></span><br><span class="line"><span class="meta"> &gt;</span><span class="bash"> cMake - OK</span></span><br><span class="line"><span class="meta"> &gt;</span><span class="bash"> patch tool - OK</span></span><br><span class="line"><span class="meta"> &gt;</span><span class="bash"> autoreconf tool - OK</span></span><br><span class="line"><span class="meta"> &gt;</span><span class="bash"> Path searched <span class="keyword">for</span> tools: /usr/<span class="built_in">local</span>/sbin /usr/<span class="built_in">local</span>/bin /usr/sbin /usr/bin /sbin /bin /usr/games /usr/<span class="built_in">local</span>/games </span></span><br><span class="line"> /home/qsong/Documents/repos/bake/bake </span><br><span class="line"> /home/qsong/Documents/repos/bake/bake bin  </span><br><span class="line"> /home/qsong/Documents/repos/bake/bake</span><br></pre></td></tr></table></figure>
<p>上面的输出表明：一切就绪，可以安装NS-3了。首先需要告诉bake我们需要下载代码，build的版本是 3.23.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">./bake.py configure -e ns-3.23</span><br><span class="line">./bake.py show</span><br><span class="line">module: pybindgen-0.17.0.886 (enabled)</span><br><span class="line">  No dependencies!</span><br><span class="line">module: g++ (enabled)</span><br><span class="line">  No dependencies!</span><br><span class="line">module: qt4 (enabled)</span><br><span class="line">  No dependencies!</span><br><span class="line">module: python-dev (enabled)</span><br><span class="line">  No dependencies!</span><br><span class="line">module: pygraphviz (enabled)</span><br><span class="line">  No dependencies!</span><br><span class="line">module: pygoocanvas (enabled)</span><br><span class="line">  No dependencies!</span><br><span class="line">module: netanim-3.106 (enabled)</span><br><span class="line">  depends on:</span><br><span class="line">     qt4 (optional:False)</span><br><span class="line">     g++ (optional:False)</span><br><span class="line">module: pyviz-prerequisites (enabled)</span><br><span class="line">  depends on:</span><br><span class="line">     python-dev (optional:True)</span><br><span class="line">     pygraphviz (optional:True)</span><br><span class="line">     pygoocanvas (optional:True)</span><br><span class="line">module: ns-3.23 (enabled)</span><br><span class="line">  depends on:</span><br><span class="line">     netanim-3.106 (optional:True)</span><br><span class="line">     pybindgen-0.17.0.886 (optional:True)</span><br><span class="line">     pyviz-prerequisites (optional:True)</span><br><span class="line"></span><br><span class="line">-- System Dependencies --</span><br><span class="line"><span class="meta"> &gt;</span><span class="bash"> g++ - OK</span></span><br><span class="line"><span class="meta"> &gt;</span><span class="bash"> pygoocanvas - OK</span></span><br><span class="line"><span class="meta"> &gt;</span><span class="bash"> pygraphviz - OK</span></span><br><span class="line"><span class="meta"> &gt;</span><span class="bash"> python-dev - OK</span></span><br><span class="line"><span class="meta"> &gt;</span><span class="bash"> qt4 - OK</span></span><br></pre></td></tr></table></figure>
<p>一切就绪，可以开始Download代码，并且编译(build)</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">qsong@sony:~/Documents/repos/bake$ ./bake.py download</span><br><span class="line"><span class="meta"> &gt;</span><span class="bash">&gt; Downloading pybindgen-0.17.0.886 - OK</span></span><br><span class="line"><span class="meta"> &gt;</span><span class="bash">&gt; Searching <span class="keyword">for</span> system dependency g++ - OK</span></span><br><span class="line"><span class="meta"> &gt;</span><span class="bash">&gt; Searching <span class="keyword">for</span> system dependency qt4 - OK</span></span><br><span class="line"><span class="meta"> &gt;</span><span class="bash">&gt; Searching <span class="keyword">for</span> system dependency python-dev - OK</span></span><br><span class="line"><span class="meta"> &gt;</span><span class="bash">&gt; Searching <span class="keyword">for</span> system dependency pygraphviz - OK</span></span><br><span class="line"><span class="meta"> &gt;</span><span class="bash">&gt; Searching <span class="keyword">for</span> system dependency pygoocanvas - OK</span></span><br><span class="line"><span class="meta"> &gt;</span><span class="bash">&gt; Downloading netanim-3.106 - OK</span></span><br><span class="line"><span class="meta"> &gt;</span><span class="bash">&gt; Downloading ns-3.23 - OK</span></span><br></pre></td></tr></table></figure>
<p>教程里没有提的是，我们需要进入pybindgen-0.17.0.886，执行：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo python setup.py install</span><br></pre></td></tr></table></figure>
<p>否则接下来的编译阶段会报错的(其实即使做了上一步还是会有错，出乎意料了，google无果。)</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">qsong@sony:~/Documents/repos/bake$ ./bake.py build</span><br></pre></td></tr></table></figure>
<p>那不如试试用waf来配置编译吧</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> change into the <span class="built_in">source</span> directory of ns-3.23</span></span><br><span class="line">cd source/ns-3.23</span><br><span class="line"><span class="meta">#</span><span class="bash"> 清楚之前编译配置而生成的文件</span></span><br><span class="line">./waf clean</span><br><span class="line"><span class="meta">#</span><span class="bash"> 采用debug的profile来配置</span></span><br><span class="line">./waf --build-profile=debug --enable-examples --enable-tests configure</span><br><span class="line"><span class="meta">#</span><span class="bash"> 编译, 不需要打 build 命令</span></span><br><span class="line">./waf</span><br><span class="line"><span class="meta">#</span><span class="bash"> 输出结果</span></span><br><span class="line">Modules built:</span><br><span class="line">antenna                   aodv                      applications</span><br><span class="line">bridge                    buildings                 config-store</span><br><span class="line">core                      csma                      csma-layout</span><br><span class="line">dsdv                      dsr                       energy</span><br><span class="line">fd-net-device             flow-monitor              internet</span><br><span class="line">lr-wpan                   lte                       mesh</span><br><span class="line">mobility                  mpi                       netanim (no Python)</span><br><span class="line">network                   nix-vector-routing        olsr</span><br><span class="line">point-to-point            point-to-point-layout     propagation</span><br><span class="line">sixlowpan                 spectrum                  stats</span><br><span class="line">tap-bridge                test (no Python)          topology-read</span><br><span class="line">uan                       virtual-net-device        visualizer</span><br><span class="line">wave                      wifi                      wimax</span><br><span class="line"></span><br><span class="line">Modules not built (see ns-3 tutorial for explanation):</span><br><span class="line">brite                     click                     openflow</span><br></pre></td></tr></table></figure>
<p>既然执行test中例子，看是否都可以通过</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">qsong@sony:~/Documents/repos/bake/source/ns-3.23$ ./test.py -c core</span><br><span class="line"><span class="meta">#</span><span class="bash"> 由于输出过程，这里我只贴出部分输出，其他以省略号代替</span></span><br><span class="line">...</span><br><span class="line">PASS: TestSuite lr-wpan-spectrum-value-helper</span><br><span class="line">PASS: TestSuite lte-cqi-generation</span><br><span class="line">PASS: TestSuite lte-x2-handover-measures</span><br><span class="line">PASS: TestSuite lte-frequency-reuse</span><br><span class="line">...</span><br><span class="line">201 of 204 tests passed (201 passed, 3 skipped, 0 failed, 0 crashed, 0 valgrind errors)</span><br><span class="line">List of SKIPped tests: ns3-tcp-cwnd</span><br><span class="line">    ns3-tcp-interoperability</span><br><span class="line">    nsc-tcp-loss</span><br></pre></td></tr></table></figure>
<p>结果满意！</p>
<p>CTTC(加泰罗尼亚理工)对NS-3d的贡献(<a href="http://networks.cttc.es/mobile-networks/software-tools/ns-3/" target="_blank" rel="noopener">http://networks.cttc.es/mobile-networks/software-tools/ns-3/</a>)</p>
<h1>参考资料</h1>
<p>[1]<a href="https://www.nsnam.org/wiki/Installation" target="_blank" rel="noopener">NS-3官方Wiki安装文档</a><br>
<a href="http://askubuntu.com/questions/162391/how-do-i-fix-my-locale-issue" target="_blank" rel="noopener">How do I fix my locale issue?</a></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rennesong.com/2015/08/01/win10-ubuntun-dual-boot-system/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="rennsong">
      <meta itemprop="description" content="Personal blog site, to note technique and life related articles">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Rennesong's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2015/08/01/win10-ubuntun-dual-boot-system/" class="post-title-link" itemprop="url">Windows 10 和 Ubuntu 15.04 dual-boot 系统安装全攻略</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2015-08-01 16:33:47" itemprop="dateCreated datePublished" datetime="2015-08-01T16:33:47+02:00">2015-08-01</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-03-25 11:27:10" itemprop="dateModified" datetime="2019-03-25T11:27:10+01:00">2019-03-25</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>2015年7月末，微软终于发布了新一代操作系统Windows 10。据说相对于Windows 8有了非常大的改进，加上利用学校的邮箱可以免费下载到MSNAA的ISO镜像并且附送激活码，更重要的是，现在手里有一台购于2013年西天，型号为SVE141CCW的SONY电脑闲置。所以，我决定抽出一两天的时间，在这台PC上搭建一个 Windows 10&amp;Ubuntu 15.04 双系统：像文字处理，游戏之类的可以在 windows 平台下处理；开发编程Geek相关的东西可以在 Linux(Ubuntu)下来处理。完美！</p>
<h1>安装 Windows 10</h1>
<h2 id="下载-windows-10镜像"><a class="header-anchor" href="#下载-windows-10镜像">null</a>下载 Windows 10镜像</h2>
<p>国外上学的孩子比较幸福的一点儿就是，可以通过学校的邮箱来免费使用微软收费的软件，比如各种操作系统。现在Windows发布了，我当然不能错过这样的机会了。登陆我的MSNAA账号，发现与以往不同，对于Windows 10 有好多版本，不知所云。<br>
<img src="http://7xkqa9.com1.z0.glb.clouddn.com/available-win10-version.png" alt="Available windows 10 version proposed by DreamSpark"></p>
<p>来看看<a href="http://www.reddit.com/r/Windows10/comments/3f14bg/win10_just_popped_up_in_my_dreamspark_premium_but/," title="reddit" target="_blank" rel="noopener">Reddit讨论帖</a>里面大家是怎么说吧</p>
<blockquote>
<p>Windows 10 EDU and Windows 10 Multiple versions are probably the only ones of interest to you.<br>
Windows 10 EDU is a educational version which is similar in feature set to Windows 10 enterprise<br>
Windows 10 (Multiple Editions) will give you the option to install Windows 10 home or professional.<br>
The N versions are identical but do not include media software such as windows media player or dvd playback software. These versions are provided as I believe it is a law for the EU to have an option that gives users choice for what software to use rather than the Microsoft default.<br>
The Features on demand only contains the core basic components of Windows and others can be chosen to be installed.<br>
The IoT versions are stripped down version meant to be used on low power hardware like a Raspberry Pi.<br>
The language packs I believe are just provide options for localising Windows in to different languages.<br>
The debug checked and symbols versions are versions which are more suitable for development and debugging of OS like features. They do not use as much compiler optimisation so identifying and diagnosing operating-system-level problems are easier. So stuff like drivers would be developed on these versions.</p>
</blockquote>
<p>关于下载镜像，还有一个插曲：最开始我是通过Mac来下载ISO的，家里网速较慢没有下载完我就去睡觉了，第二天醒来发现下载的ISO文件只有不到3G，当时就很奇怪：不是说 windows 10的安装镜像是3 G多么？为啥我的只有2.3G呢？我想莫非学生优惠版的确实就是小么？后来用这个镜像刻录出来的U盘是无法启动的！再后来我在 Windows 平台又下载同样的文件，显示是3.8G 这才是Win10镜像的正常大小！而且下载速度也是快的多。可惜微软没有提供这些镜像的哈希值，我们也无从校验我们下载的东西是否完整，通过这个事儿，第一次感觉到，下载完大文件之后，核对下哈希值还是很有必要的。</p>
<h2 id="制作-windows-10-usb-bootable-安装盘"><a class="header-anchor" href="#制作-windows-10-usb-bootable-安装盘">null</a>制作 Windows 10 USB-bootable 安装盘</h2>
<p>现在最流行的操作系统安装方式便是通过制作 USB-bootable 启动盘了。我是用的制作工具是：<a href="https://rufus.akeo.ie/" target="_blank" rel="noopener">Rufus</a>。下面是我当时查看的教程<a href="http://www.groovypost.com/howto/create-windows-10-bootable-usb-flash-drive/" target="_blank" rel="noopener">Create a Windows 10 USB Bootable Flash Drive (Updated)</a>。后来才意思到这其实做的是不支持UEFI的安装盘，其实这也给我带来了些许困扰。因为下面我要说的 Ubuntu 15.04 的安装盘确实支持 UEFI的。虽然我勾选了: MBR partition scheme for BIOS or UEFI computers。写这篇文章的时候才发现还可以通过Rufus来制作 UEFI-supported 的安装盘。请看教程<a href="http://news.mydrivers.com/1/440/440478.htm" target="_blank" rel="noopener">教你制作支持UEFI PC的Win10安装U盘</a></p>
<h2 id="uefi-vs-legacy-mode"><a class="header-anchor" href="#uefi-vs-legacy-mode">null</a>UEFI vs Legacy mode</h2>
<p>帖子<a href="http://ubuntuforums.org/showthread.php?t=2248301" target="_blank" rel="noopener">Can i install windows 10 tech preview along ubuntu 14.04?</a>中指出，windows installer 会把 Windows boot loader 安装在每一个硬盘分区上。这意味着，如果我们的PC如果之前就安装有 Ubuntu 的话，安装 Windows 之后，我们将没有办法直接登录 Ubuntu 了，需要使用 <a href="https://help.ubuntu.com/community/Boot-Repair" target="_blank" rel="noopener">Boot Repair</a>来做一些修复。</p>
<p>这个UEFI实在是太折磨人了，感觉完全颠覆了我之前的安装系统的习惯啊<br>
用U盘刻录了一个USB-installer，使用Assist-&gt;F11(用光盘/USB启动)，结果发现显示opertation system not found。给我郁闷了，好在这是一个常见问题，视频<a href="https://www.youtube.com/watch?v=65Kb3meWeDs" target="_blank" rel="noopener">How To Fix Operating System Not Found Error In Sony Vaio</a>给我解答了我的问题。总结一下思路就是：进入BIOS设置，将Boot mode由 UEFI转换为Legacy, 并且External Bootable device由 disable变为 enable。这个时候就可以使用 win10-usb-installer了。</p>
<p><a href="https://help.ubuntu.com/community/UEFI" target="_blank" rel="noopener">UEFI</a><br>
目前主流的启动模式为：UEFI mode 以及 BIOS mode。BISO mode我们都比较熟悉了，这里不做介绍。如今预装win8的机器都采用的UEFI模式。</p>
<h2 id="开始安装"><a class="header-anchor" href="#开始安装">null</a>开始安装</h2>
<p>因为一个星期前，我才刚把这台可怜的电脑上的 Windows 8 彻底格式化安装了 Ubuntu, 现在我又需要把后者再格式掉，全硬盘安装 Windows 10(可惜了我刚安装好的NS-3)。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Windows cannot be installed to this disk. The selected disk is of the GPT partition style. Windows cannot be installed to this hard disk space. Windows must be installed to a partition formatted as NTFS. Windows cannot be installed to this hard disk space. The partition is of an unrecognized type.</span><br></pre></td></tr></table></figure>
<p>在把所有 Windows installer 无法识别的分区都删除掉之后，我们看到有一个将近700 G的未分配空间，如下图所示。<br>
<img src="http://7xkqa9.com1.z0.glb.clouddn.com/win10-installation-unallocated-disk.jpg" alt="全硬盘安装 windows 10"><br>
很有意思，为了安装 windows 10，系统会额外给我创建一个500 MB的 system reserved 分区处理，特此截图留念：<br>
<img src="http://7xkqa9.com1.z0.glb.clouddn.com/win10-installation-after-allocation.jpg" alt="为 windows 10 分配磁盘空间"></p>
<h2 id="硬盘分区"><a class="header-anchor" href="#硬盘分区">null</a>硬盘分区</h2>
<p>安装完Windows之后，现在就一个硬盘分区，安装完 windows 10，系统文件占了将近20 G，记得以前学校的老师说过，建议把所有的软件都安装到C盘，这样可以避免一些意想不到的问题。所以我觉得分150G 给C盘比较合适，如果以后安装了游戏，可以考虑放到D盘什么。受Linux还有Mac使用经验影响，我决定再只分出一个D盘专门用来存放非系统文件。剩余的将近150G空间则给Linux之用。分区工具我使用的是<a href="http://www.disktool.cn/download.html" target="_blank" rel="noopener">分区助手</a>，确实还是蛮好用的，下图是分区完毕之后：<br>
<img src="http://7xkqa9.com1.z0.glb.clouddn.com/hard_disk_repartition.PNG" alt></p>
<p>#安装 Ubuntu 15.04<br>
现在开始安装 Ubuntu 15.04, 第一个麻烦就是：电脑无法识别我U盘里的Ubuntu，又是头一次遇到这种问题，屏幕上只显示：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SYSLINUX 4.04 EDD 20110518 Copyright (C) 1994-2013 H. Peter Anvin et al</span><br></pre></td></tr></table></figure>
<p>还好有人遇到跟我一样的问题，我马上怀疑是不是又是由于 UEFI/legacy mode的缘故。为了安装 Windows 10 我把这个设定由UEFI变成了 Legacy mode，而现在我制作的 Ubuntu安装盘应该是 UEFI模式，只有切换回来，电脑才可以找到操作系统入口，事实证明，我的猜想是正确的。不过在一开始安装Ubuntu的时候，安装程序就检测出来了有非UEFI模式下安装的其他操作系统存在，如下图所示：<br>
<img src="http://7xkqa9.com1.z0.glb.clouddn.com/warning.png" alt="警告"><br>
仔细阅读之后，我觉得我应该选<em>Go Back</em>，回过头来看，这里的<em>Go Back</em>应该指的是用Legacy mode(而不是UEFI模式)。另外，下图佐证了：我安装的 Windows 10是基于MBR的，因为Disklabel type: dos，如果是基于GPT的，我们应该看到的是：Disklabel type: gpt。<br>
<img src="http://7xkqa9.com1.z0.glb.clouddn.com/ubuntu_fdisk_output.png" alt="Ubuntu fdisk 结果"><br>
<img src="http://7xkqa9.com1.z0.glb.clouddn.com/partition_root.png" alt="Root分区分配示意图"><br>
关于swap分区介绍(<a href="https://www.maketecheasier.com/swap-partitions-on-linux/" target="_blank" rel="noopener">https://www.maketecheasier.com/swap-partitions-on-linux/</a>)<br>
设置为primary分区是无法继续分割的。。。<br>
<img src="http://7xkqa9.com1.z0.glb.clouddn.com/hard_partion_ubuntu_installation.png" alt="xxx"><br>
<img src="http://7xkqa9.com1.z0.glb.clouddn.com/partition_swap.png" alt="Swap分区分配示意图"><br>
<img src="http://7xkqa9.com1.z0.glb.clouddn.com/partition_resume.png" alt="最终分区示意图"><br>
其实做完分区开始安装还是蛮紧张的，因为生怕安装了 Ubuntu了以后，就再也没法启动 windows 了，最坏的情况就是，就是两个系统都进不去了(现在想想，好像没有道理无法登陆 Ubuntu)。<br>
<img src="http://7xkqa9.com1.z0.glb.clouddn.com/update_grub_output.png" alt="Ubuntu update-grub 结果"><br>
因为是在UEFI模式下读取的U盘但是安装的是非UEFI模式，所以开机的时候，又是Operation system not found。选择回 Legacy mode，终于顺利启动！<br>
为了进一步验证，现在Ubuntu处于Legacy模式下，输入下面命令：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">如果/sys/firmware/efi文件夹存在，则显示<span class="string">"EFI boot on HDD"</span>。不然则显示<span class="string">"Legacy boot on HDD"</span></span></span><br><span class="line">[ -d /sys/firmware/efi ] &amp;&amp; echo "EFI boot on HDD" || echo "Legacy boot on HDD"</span><br></pre></td></tr></table></figure>
<p>结果显示为&quot;Legacy boot on HDD&quot;。(曾经显示为EFI boot on HDD)</p>
<p>最后还有个问题就是：每次在Windows和Ubuntu之间切换时间就不一致了。</p>
<h1>参考资料</h1>
<p><a href="http://askubuntu.com/questions/221835/installing-ubuntu-on-a-pre-installed-windows-8-64-bit-system-uefi-supported" target="_blank" rel="noopener">Installing Ubuntu on a Pre-Installed Windows 8 (64-bit) System (UEFI Supported)</a><br>
<a href="http://linuxbsdos.com/2015/01/18/tip-for-dual-booting-windows-10-preview-and-linux-on-a-pc-with-uefi-firmware/" target="_blank" rel="noopener">Tip for dual-booting Windows 10 preview and Linux on a PC with UEFI firmware</a></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rennesong.com/2015/07/30/Common-used-vim-commands/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="rennsong">
      <meta itemprop="description" content="Personal blog site, to note technique and life related articles">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Rennesong's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2015/07/30/Common-used-vim-commands/" class="post-title-link" itemprop="url">常用 VIM 命令备忘</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2015-07-30 23:59:36" itemprop="dateCreated datePublished" datetime="2015-07-30T23:59:36+02:00">2015-07-30</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-03-25 11:27:10" itemprop="dateModified" datetime="2019-03-25T11:27:10+01:00">2019-03-25</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>利用此贴记录下自己常用的VIM的命令，备忘：<br>
在command mode下，键入<br>
shift+G:    跳转至文章的最后一行<br>
gg:         跳转至文章的开头<br>
o:          跳转至光标当前所在行的下一行并进入insert mode</p>
<p>Error trying to parse settings: Unexpected character, expected a comma or closing bracket in Packages/OmniMarkupPreviewer/OmniMarkupPreviewer.sublime-settings:88:103</p>
<p><a href="http://www.tecmint.com/35-practical-examples-of-linux-find-command/" target="_blank" rel="noopener">35 Practical Examples of Linux Find Command</a></p>
<p>网页链接<a href="http://www.ruanman.net/archives/7623.html#comments" target="_blank" rel="noopener">Mac Office 2016正式版下载附破解补丁</a>里面较全面详细地介绍了如何下载，安装以及破解Office 2016 for Mac.</p>
<p>问题在于：</p>
<p>需要一个Microsoft account这个还蛮有意思的，这是在效仿Apple嘛。在开机初始化阶段关联一个Account。</p>
<p>安装完之后，无线网卡的驱动是有的，这点儿还是蛮欣慰的。至少这样我有网络连接去下载其他驱动啊。显卡驱动显然没有安装，画面看着真是巨渣。</p>
<p>其实升级到Win10后无需再像以前那样繁琐地检测系统硬件、显卡型号，然后再到处搜索下载驱动程序。在Windows 10中，只需通过Windows更新即可方便地下载安装驱动程序。开始-&gt;settting-&gt;update&amp;security-&gt;Windows update</p>
<p>#汉字字符显示问题<br>
关键：将non-Unicode编码为 汉语</p>
<p>#应用程序安装<br>
第一个先安装Google chrome<br>
改变默认程序的方法：<br>
To chagne your default apps, go to Settings-&gt;System-&gt;Default apps<br>
第二个是office<br>
QQ, skype之类的还有<br>
其他也确实想不到该去安装什么了(目前)</p>
<p>Ubuntu的社区对Grub2有很好的说明的。</p>
<p>#Ubuntu开发环境搭建<br>
(这个其实可以专门写个文章了)<br>
更新系统软件仓库</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get udpate</span><br></pre></td></tr></table></figure>
<p>安装openssh-server, 以便从mac上ssh进入这台机器, 安装VIM，以方便编辑配置文件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install openssh-server vim</span><br><span class="line">ps aux | grep sshd</span><br></pre></td></tr></table></figure>
<p>如果发现有sshd守护进程运行，则说明openssh server成功安装并且启动。<br>
接下来在Ubuntu下创建公钥私钥，以便可以不需要密码接入</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa</span><br></pre></td></tr></table></figure>
<p>接下来将Mac上的公钥copy到Ubuntu下</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">ssh-copy-id可以通过Homebrew安装</span></span><br><span class="line">ssh-copy-id qsong@10.35.130.207</span><br></pre></td></tr></table></figure>
<p>还是不习惯使用Utity界面，还是使用传统界面吧</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install gnome-session-flashback</span><br></pre></td></tr></table></figure>
<p>安装完毕之后，log out再log in就生效了。<br>
用命令行访问 Windows 10 分区</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">首先需要知道 哪个分区(sdaX)是我们需要访问的分区</span></span><br><span class="line">cat /proc/partitions</span><br><span class="line"><span class="meta">#</span><span class="bash">接下来在/mnt创建一个文件夹，用以挂载我们需要访问的分区</span></span><br><span class="line">mkdir /mnt/win</span><br><span class="line"><span class="meta">#</span><span class="bash">接下来, 挂载分区。注意将X换成相应的数字，比如3</span></span><br><span class="line">mount /dev/sdaX /mnt/win</span><br><span class="line"><span class="meta">#</span><span class="bash">我们可以通过命令行访问分区了</span></span><br><span class="line">cd /mnt/win</span><br></pre></td></tr></table></figure>
<p>不过，现在 Ubuntu 系统都会默认把 windows partition 挂载在某个挂载点的(通常在/media之下)。如何获取哪个分区挂载哪个挂载点之下呢？有以下几种方法</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">方法一：</span></span><br><span class="line">cat /etc/mtab</span><br><span class="line"><span class="meta">#</span><span class="bash">方法二：</span></span><br><span class="line">df</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rennesong.com/2015/07/29/How-to-install-node-js-and-npm-on-Mac/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="rennsong">
      <meta itemprop="description" content="Personal blog site, to note technique and life related articles">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Rennesong's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2015/07/29/How-to-install-node-js-and-npm-on-Mac/" class="post-title-link" itemprop="url">如何在Mac Yosemite中安装node.js以及NPM</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2015-07-29 21:04:34" itemprop="dateCreated datePublished" datetime="2015-07-29T21:04:34+02:00">2015-07-29</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-03-25 11:27:10" itemprop="dateModified" datetime="2019-03-25T11:27:10+01:00">2019-03-25</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>想要使用 Githubs pages 和 hexo 搭建一个静态博客站点，因为 hexo 是台湾小伙儿 tommy3551 使用 Node.js 开发的一个模板引擎，以及我的工作电脑的操作系统系统是 Mac 10.10.4 (Yosemite)。因此，为了使用 hexo, 我首先需要在Mac下安装 node 以及 npm。经过调查，发现 Node js在Mac下有两种安装方式:</p>
<ul>
<li>基于pkg installer安装</li>
<li>通过Homebrew安装</li>
<li>通过NVM安装<br>
由于最近使用Homebrew比较多，以及Homebrew以其卓越的用户体验，让我渐渐觉得，好像Mac下凡是跟开发有关的工具/环境都应该通过brew安装。登陆Node.js的官网，看到还有pkg安装包的安装包的方式，猛一下的困惑了，这两种方式我究竟该用哪个呢？</li>
</ul>
<h1>误入“歧途”</h1>
<p>Google is your teacher. 习惯性的先上网搜了一下，Stack overflow上有一篇帖子讨论了在Mac下究竟哪种方式更方便。看完之后，我感觉，哦，好像直接使用pkg安装包更合适了，心想也是啊，其他开发工具，没有pkg我才使用Homebrew呢，现在有pkg installer,我干嘛不用呢？</p>
<p>于是，直接下载安装一气呵成。使用的时候，比如输入</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo -g</span><br></pre></td></tr></table></figure>
<p>系统提示需要管理员权限，Mac下不用sudo好多年啊，好吧，那就sudo一下呗，心想，要是用brew安装不久没这个不便了么，其实我应该使用brew的呀。再后来，使用bew的时候，习惯性地来了个</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash">brew doctor</span></span><br></pre></td></tr></table></figure>
<p>输出显现，/usr/local下面有跟node有关的文件，不是被brew管理的，虽然我不是个有洁癖或者强迫症的人，但是看了一下基本上/usr/local/bin里面的文件，基本owner都是自己啊，现在突然多了一下root的感觉还是怪不爽的，年轻人就是喜欢折腾，我还是删了pkg安装的node改用brew再安装一遍吧。自己就是作啊。。。</p>
<h1>弃暗投明</h1>
<p>第一步需要删除已安装的node, 这个帖子：<a href="https://gist.github.com/TonyMtz/d75101d9bdf764c890ef" target="_blank" rel="noopener">https://gist.github.com/TonyMtz/d75101d9bdf764c890ef</a> 好评如潮，事实证明，确实是好用，不过我对其略有补充，所以这里再把使用的命令粘过来。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> First list what files are installed by pkg-installer with <span class="built_in">command</span> lsbom</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Use a loop <span class="keyword">in</span> shell to delete them</span></span><br><span class="line">lsbom -f -l -s -pf /var/db/receipts/org.nodejs.pkg.bom | while read f; do  sudo rm /usr/local/$&#123;f&#125;; done</span><br><span class="line"><span class="meta">#</span><span class="bash"> Then delete all node-related bin files under /usr/<span class="built_in">local</span>/bin</span></span><br><span class="line">sudo rm -rf /usr/local/lib/node /usr/local/lib/node_modules /var/db/receipts/org.nodejs.*</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> To recap, the best way (I<span class="string">'ve found) to completely uninstall node + npm is to do the following:</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">go to /usr/<span class="built_in">local</span>/lib and delete any node and node_modules</span></span><br><span class="line">cd /usr/local/lib</span><br><span class="line">sudo rm -rf node*</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> go to /usr/<span class="built_in">local</span>/include and delete any node and node_modules directory</span></span><br><span class="line">cd /usr/local/include</span><br><span class="line">sudo rm -rf node*</span><br></pre></td></tr></table></figure>
<p>现在我们可以使用Homebrew来安装node.js以及npm了，很简单：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew instal node</span><br></pre></td></tr></table></figure>
<p>应该会成功。。。吧。。。</p>
<h1>柳暗花明</h1>
<p>不过，让我震惊的是，我居然得到了一些错误信息：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Bash completion has been installed to:</span><br><span class="line">  /usr/local/etc/bash_completion.d</span><br><span class="line">Error: The `brew link` step did not complete successfully</span><br><span class="line">The formula built, but is not symlinked into /usr/local</span><br><span class="line">Could not symlink share/systemtap/tapset/node.stp</span><br><span class="line">/usr/local/share/systemtap/tapset is not writable.</span><br></pre></td></tr></table></figure>
<p>我第一反应就是：还是之前由于pkg安装后的遗毒啊。网上有些人遇到了跟我一样的问题，比如这篇帖子：<a href="http://stackoverflow.com/questions/31374143/trouble-install-node-js-with-homebrew" target="_blank" rel="noopener">Trouble install node.js with homebrew</a>。这篇帖子印证了我的猜想，我猜测这是因为pkg包安装node的时候，以root身份创建了文件/usr/local/share/systemtap/tapset。现在Homebrew再来安装的时候，没有办法对该文件读写。于是爆出了上述错误。好的补救措施如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 将yourusername以及yourgroupename换成你需要的名字</span></span><br><span class="line">chown -R &lt;yourusername&gt;:&lt;yourgroupname&gt; systemtap</span><br><span class="line">brew link node</span><br></pre></td></tr></table></figure>
<p>现在大功告成啦！</p>
<h1>风云再起</h1>
<p>2016年伊始，又想重新开始使用hexo记录博客了，没想到hexo不工作了，而且越倒腾越乱，好像网友有人推荐彻底卸载node npm hexo重新再安装，于是乎，发现了一种更灵活的node体系安装方法：通过NVM（Node Version Manager）,<br>
以下是网友给出的很详细的教程：(<a href="http://icarus4.logdown.com/posts/175092-nodejs-installation-guide" target="_blank" rel="noopener">http://icarus4.logdown.com/posts/175092-nodejs-installation-guide</a>)</p>
<h1>总结</h1>
<p>其实并不是用Homebrew安装node+npm就一定比用编译好的pkg安装包好，只是我个人的喜欢觉得还是用brew管理的更好而已，重要的是选择自己用着觉着顺手的就行。</p>
<h1>参考资料</h1>
<p><a href="http://blog.teamtreehouse.com/install-node-js-npm-mac" target="_blank" rel="noopener">How to Install Node.js and NPM on a Mac</a></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rennesong.com/2015/07/28/Apply-USA-VISA-in-Paris/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="rennsong">
      <meta itemprop="description" content="Personal blog site, to note technique and life related articles">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Rennesong's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2015/07/28/Apply-USA-VISA-in-Paris/" class="post-title-link" itemprop="url">2015年巴黎申请美国10年签证全攻略</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2015-07-28 22:19:24" itemprop="dateCreated datePublished" datetime="2015-07-28T22:19:24+02:00">2015-07-28</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-03-25 11:27:10" itemprop="dateModified" datetime="2019-03-25T11:27:10+01:00">2019-03-25</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1>前言</h1>
<p>话说，今年3月向 VTC2015fall 投了一篇论文，5月中下旬的时候收到邮件说论文被接收了，很开心。一方面这是自己人生的第一篇Paper, 另一方面会议的地点是Boston。利用这次开会的机会，终于有机会亲赴美帝，好好了解一下这个建国不过三百年却跻身为蓝星历史上第一强权的国家。另外女朋友Y之前也从来没有去过美国，也对这个国家充满了好奇(其实是shopping), 而且博士期间也很有可能要去美国开会。刚好利用这次机会，我们俩准备一起申请美国签证，旅游学术爱情三不误。</p>
<p>梦想是美好的，现实是残酷的。由于众所周知的原因， 持有中国国籍的在读博士在法国申请赴美签证不是那么容易的，一般都要经历所谓的 <strong><em>check</em></strong> 阶段，时间从一周至三个月不等。网上因为被check各种求助该怎么办的帖子一搜一大堆。比如我认识的 Rennes 读博士的小伙伴，不论是去开会还是旅游，都经历过万恶的 check。甚至有人因为 check 时间过久而最终没能去参加会议。其实不只是对于中国人是这样，外国友人也不能例外啊，比如委内瑞拉的小伙伴，也经过过3个星期的等待。所以得知论文被接受之后，Xavier 就跟我说，要我抓紧时间申请 VISA，以免跟上次大师兄一样，会议前3天才拿到。不过Y身边的朋友跟我得到信息却是相反的，因她的朋友们申请美国会议签证基本都是秒过，最长的也没有超过一周，从来没有遇到我们雷恩小伙伴的这种窘境。不过不管谁是对的，作为万里长征的第一步，我们必须赶快着手把签证搞起来，这样即使被 check 了，6，7，8月三个月还是等的起的。还好一切都是出奇的顺利，我6月2日开始填写DS-160表格(女朋友是6月17开始填的表格)，结果7月3，4日我俩就先后收到各自带有10年美国签证的护照。这期间人品是各种的好！在去面签的那天，我俩就说过，如果签证顺利拿到了，就赶紧把着申请流程记录下来，既是一段美好的回忆又可以帮到其他有需要的同学。何乐而不为呢？另外, 我这次申请的是会议签证，Y申请的是旅游签证，常见的赴美签证类型一下子就都被我俩囊括了。所以记录下整个流程我相信是有价值的，希望可以帮到更多的朋友。</p>
<p>整个签证的申请可以用下面这个时间线来概括。接下来我就详细地介绍下我们是如何一步步完成签证申请并且最终顺利拿到签证的。</p>
<ul>
<li>2015-06-02 填写 DS-160 表格</li>
<li>2015-06-10 完成 DS-160 表格</li>
<li>2015-06-16 签证费转账成功预约面签时间</li>
<li>2015-06-30 巴黎美国大使馆面签</li>
<li>2015-07-03 收到带签证护照</li>
</ul>
<h1><a href="https://ceac.state.gov/genniv/" target="_blank" rel="noopener">DS-160填写</a></h1>
<p>个人感觉申请美国签证最麻烦最“困难”的一个环节是 DS-160 表格的填写。不过还好，众多拿到过美国签证的小伙伴们都充分发挥了共产主义精神，在网上详细的填写说明俯拾皆是。不过好多帖子的日期都是过去一两年的了，DS-160 表格也有一些变化，所以我在这里做一个总结性的工作，详细地介绍每一页我是怎么填写的</p>
<h2 id="step-1-创建申请"><a class="header-anchor" href="#step-1-创建申请">null</a>step 1: 创建申请</h2>
<p>由于博主身在法国留学，自然而然应该选择 France,Paris 了，然后点击 <strong>Start an Application</strong>。系统会给你创建一个 Appplication ID 的，记好这个ID。</p>
<div style="text-align: center">
![Home page](/images/USA_VISA/DS-160-step-1.png "DS-160 主页")
</div>
<h2 id="step-2-申请者个人信息"><a class="header-anchor" href="#step-2-申请者个人信息">null</a>step 2: 申请者个人信息</h2>
<p>个人信息分由两页构成。以下都是不完全截图，博主用红色方框勾出了值得注意的地方</p>
<div style="text-align: center">
![Personal information 1](/images/USA_VISA/DS-160-Personal-information-1.png)
</div>
下图中的 National Identification Number指的是身份证号而非护照号，护照号需要在以后的页面中填写。
<div style="text-align: center">
![Personal information 2](/images/USA_VISA/DS-160-Personal-Information-2.png)
</div>
<h2 id="step-3-地址及联系方式"><a class="header-anchor" href="#step-3-地址及联系方式">null</a>step 3: 地址及联系方式</h2>
<p>如实填写即可，为了避免本文图片过多，影响加载速度，所以这里不予贴图。后面的step 6,7,9,11也是类似情况。</p>
<h2 id="step-4-护照信息"><a class="header-anchor" href="#step-4-护照信息">null</a>step 4: 护照信息</h2>
<p>需要指出的是：Passport Book Number这一项，对于我们中国护照而言，就是护照信息页右边竖着写的那8位数字, 而不是我们的Passport number</p>
<div style="text-align: center">
![Passport information](/images/USA_VISA/DS-160-Passport-information.png)
</div>
<h2 id="step-5-旅行信息"><a class="header-anchor" href="#step-5-旅行信息">null</a>step 5: 旅行信息</h2>
<p>博主以及博主女朋友去美国签证都是B类型的，不管商务会议还是旅游，都选择 B1&amp;B2</p>
<div style="text-align: center">
![Travel information](/images/USA_VISA/DS-160-Travel-information.png)
</div>
<h2 id="step-6-同行者信息"><a class="header-anchor" href="#step-6-同行者信息">null</a>step 6: 同行者信息</h2>
<p>虽然我们俩个是一起去美国，但是我是去开会，女朋友是去旅游，所以这一页面，我们选择的都是No。</p>
<h2 id="step-7-之前的美国旅行"><a class="header-anchor" href="#step-7-之前的美国旅行">null</a>step 7: 之前的美国旅行</h2>
<p>之前从未去过美国，所以都是No</p>
<h2 id="step-8-美国联系人信息"><a class="header-anchor" href="#step-8-美国联系人信息">null</a>step 8: 美国联系人信息</h2>
<p>这是我花费时间最多的地方，鉴于我是去参加会议，所以之前一直以为这一页我应该填写 VTC 这个会议 General Chair 的信息。同事说，这类信息都会在会议发的邀请信上写出来的。所以一开始我填到这页时候就停了下来，等着 VTC 给我发信息了。谁知道 VTC 今年的组织比较混乱，我迟迟拿不到邀请信(现在都木有！！！)，所以最后我 Google 了一下 Chair 信息自己填了进去。后来网上说，其实填写你居住酒店的联系方式都是可以的。</p>
<div style="text-align: center">
![Point of contact information in USA](/images/USA_VISA/DS-160-Point-of-contact.png)
</div>
<h2 id="step-9-父母信息"><a class="header-anchor" href="#step-9-父母信息">null</a>step 9: 父母信息</h2>
<p>这一页无他可言。</p>
<h2 id="step-10-工作-教育-培训"><a class="header-anchor" href="#step-10-工作-教育-培训">null</a>step 10: 工作/教育/培训</h2>
<p>这一项里我犯过一个错误。我当时只填写了自己的研究生教育经历（居然忘记了填写自己的本科经历），因为我对网页上一条信息理解有误: 我以为只要填最近的一次教育经历就行。女朋友比我填 DS-160 的时间晚，所以我提醒了她要注意。不过事实证明，没有填写本科学习经历没有导致拒签，不过不建议效仿。</p>
<div style="text-align: center">
![Previous working/education/formation experience](/images/USA_VISA/DS-160-Previous-education.png)
</div>
<h2 id="step-11-犯罪记录"><a class="header-anchor" href="#step-11-犯罪记录">null</a>step 11: 犯罪记录</h2>
<p>这一页我基本是当做拓展词汇量的阅读来做了，都是些很有意思的问题，基本上选择的都是 No 吧。</p>
<p>当一切信息都填写完毕之后，会让你上传照片的。我是用自己的Mac在自己的办公室照的，可以通过这个<a href="http://travel.state.gov/content/visas/english/general/photos/digital-image-requirements.html" target="_blank" rel="noopener">网站</a>来检验是不是符合标准。而且最后VISA上面用的就是我自己照的这张照片（色调偏暗，没有大使馆里的Photomaton照出来的清晰，这是后话。）回顾起来，填写 DS-160 表格，我居然用了两个星期！！！尤其是填写Point of Contact in USA。其他小伙伴在填写时候记得避免我这样的错误。</p>
<h1><a href="https://ais.usvisa-info.com/fr-FR/niv" target="_blank" rel="noopener">面签预约</a></h1>
<p>DS-160 表格填写完之后，就可以通过点击上面标题的链接去注册账号然后预约RDV（面签）啦！不过只有美国大使馆那边先收到你的汇款你才有可能去选择RDV日期。汇款支持两种方式：银行卡支付以及转账。根据我搜集到的帖子，没有人通过银行卡支付成功的，最后都是选的转账模式。我在下面贴出来了当时我收到邮件（里的附件）截图。出于保护个人隐私需要，我把附件里的那个PIN码遮住了一半，转账的要点就是：</p>
<ul>
<li>转账也有Deadline的，要赶紧转</li>
<li>转账的时候一定要写上那个PIN码</li>
<li>转账金额是152欧（不知道以后是否会变）其中包含了护照寄给你的邮费</li>
</ul>
<p>通过网银转账后，一般2，3个工作日，大使馆就能收到你的汇款，系统也就允许你选RDV日期了。我记得我是6月13日左右发出转账申请，6月15号我才可以选择RDV日期。当我进入选日期页面发现最早的RDV也是7月4，5号了。要命的是，我7月11日要跟女朋友去西班牙旅游啊，据说Easyjet登机的时候要求查看护照啊！如果我选择7月11日之前的 RDV，万一不幸被 check 了（就算是秒过，也很难保证我7月11日之前就拿到护照啊），那我的西班牙之旅岂不是就泡汤了。也就说为了保证不耽误西班牙之旅，我只能选择最早7月20日的 RDV！！！我心里当时对自己的那个恨啊。。。后来我心想：那就没事儿多刷刷 RDV 吧，看有没有更早的日期可选，没想到第二天早上就出现了个6月30日的。二话不说，赶紧预约上。女朋友也是，好像是6月20左右才可以选 RDV，当时能选的日期也很靠后了，后来也跟我一样，刷出来了6月30日的。(PS: 事实证明，从法国去西班牙，Easyjet 几乎不查看护照，Vuling 倒是要求了看护照，我直接给人家看了我的 Titre de sejour (长期居留卡)，人家也没说啥。)</p>
<div style="text-align: center">
![VISA Payment Instructions](/images/USA_VISA/VISA-Payment-Instruction.png)
</div>
<h1>材料准备</h1>
<p>首先列出来我们共同准备的材料清单</p>
<ul>
<li>RDV确认单，</li>
<li>所有银行的存款证明</li>
<li>工资单</li>
<li>酒店预订信息</li>
<li>护照有效页和Titre de séjour的复印件</li>
<li>个人简历(据说博士们会被要求个人简历的)<br>
我因为开会而额外准备的材料：</li>
<li>VTC会议注册付款记录</li>
<li>学校出具的支付我旅行费用的证明<br>
女朋友额外准备的材料(因为是旅游，所以她准备好多好多好多。。。)</li>
<li>convention d’accueil</li>
<li>旅行计划</li>
<li>学校注册证名</li>
<li>住房合同</li>
<li>出生公证<br>
其实在接下来要介绍的面签过程中，大部分的材料都没有排上用场，但是还是建议准备材料要不厌其详，因为核心目的都是为了证明，你去了美国还会回来的。</li>
</ul>
<h1>开会面签过程</h1>
<p>美国大使馆的位置相当好找：地铁1号线 concorde 站下车即可，不管从哪个口出来，手机导航很方便就可以找到。进入大使馆需要过两关：第一关位于大使馆大门外，跟个碉堡似得，这个地方需要出示护照以及RDV的确认表格。门卫会看你的 RDV 时间适时让你进去。当时我女朋友的 RDV 是8h30而我的是9h30，我们是8h25左右到的大使馆。理论上只能是我女朋友进去而我需要在门口等到9点30左右，我当时试着问可不可以我俩一起进去，门卫说不可以。因为我俩来的时候把材料都放在一起了，既然不让一起进去，我俩就在门口分材料，女朋友进去以后，我发现我忘了要零钱，就让门卫帮我递个零钱啥的，后来他们也觉得这样好麻烦，于是索性就让我俩一起进去了。哈哈，好幸运！！！</p>
<p>之后就是在大使馆庭院里排队等第二关安检。随身的吃喝的要放在门外木柜上，手机他们会拿个透明塑料袋给你保管起来，给你的牌子。只允许带着自己的护照材料等进入大使馆内部，所以之后的几个小时木有手机可以玩哦，不过可以跟其他人聊聊天啥的也蛮不错的。过了第二关，正式进入大使馆内部了。门口有个美女欢迎你，她会要求你出示护照，RDV 确认单以及 5x5cm 的照片。如果一切无误，她会给你发个排队小票的。这张小票一定要保管好。关于 5x5cm 的照片，可以自己提前准备号，也可以用大使馆里面的 photomaton，女朋友自己花了4欧去照了标准证件照，而我比较幸运，门口的美女估计心情很好，看我 RDV确认单上的照片应该符合规定，但是她也说，要是里面的 consulat 觉得照片不符合要求，我还是需要再到 photomaton 这边补照。所以还是建议大家在 photomaton 那儿花点钱提前把照片准备好吧，以免横生枝节。</p>
<p>具体的面试也是分两步：第一步显示按号码去录指纹，我跟大妈用法语交流的。当时大妈问我要照片，我说我已经把我的照片电子版上传到系统了，她看了下确认合格，就让我录了指纹。然后我就又做回等候区去等待 consulat 给我面试。下面我介绍我当时面试的流程。C代表 Consulat, S代表我, 面试官首先问我愿意用法语还是英语，鉴于我的英语已经深深地被法语影响了，我说我倾向于法语，面试开始：</p>
<p>C: 去美国做什么？<br>
S: 去美国开会。（同时从材料夹里面取出了我 VTC paper的注册收据，上面有会议名称，地点，时间等等）<br>
面试官拿着我给她的会议付款收据之后，就开始在电脑上记录信息不再理我了。<br>
C: 你现在在法国做什么？<br>
S: 还是学生<br>
C: 几年级？<br>
S: 博士一年级(我终于忍不住还是提了自己是在读博士这个事儿了，要诚实。。。)<br>
C: 什么专业？<br>
S: (为了避免出现必被 check 的敏感词)通信<br>
C: 通信里面哪个方向呢？<br>
S: 移动通信，就是咱们用的手机网络(听上去很人畜无害有木有)<br>
面试官接着又在电脑上敲了一通<br>
C: 来法国多久了？<br>
S: 我说2010年我就过来了<br>
C: 毕业之后啥打算呢？(好俗的问题。。。)<br>
S: 回中国，比如进个运营商啥的。<br>
C: 好了，你将会在大概一周左右收到你的护照(其实当时我没有听清，但是我很确定是说几天之后就可以好的意思)<br>
S：也就说，在7月11号之前我可以收到我的护照吧？<br>
C: 是的</p>
<h1>旅游面签过程</h1>
<p>因为我是因为开会来面签的，现在贴出来女朋友Y的面签过程，鉴于面试过程都差不多，此处我只贴出女朋友和面签官的对话过程。同样的，C代表她遇到的面签官，Y代表她本人：</p>
<p>C：Bonjour<br>
Y：Bonjour<br>
（接着签证官自动转成英语）<br>
C: 去美国做什么？<br>
Y: Travel。（同时从材料夹里面取出了我的行程单，上面有我想去玩的景点，时间安排等等）边掏边跟她说我是9月＊＊号过去，然后9月＊＊后回来。这儿还有我的酒店预订单。<br>
（这个时候面试官一直忙着在电脑上记录信息，只是摆了摆手说不用拿了）<br>
C：你来法国多久了？<br>
Y：三四年了，从2011年开始<br>
C：你怎样支付这次美国旅行？<br>
Y：我自己来支付，这有我的工资单，银行的存款证明<br>
（她示意我把这俩样东西拿给她看看）<br>
Y：我还带了我的博士合同，你需要看吗？（因为合同上面也有工资金额的证明以及博士的起止日期，可以证明我从美国玩完还得回来继续读书）<br>
C：那个不用看了<br>
（面试官在电脑上又是一通狂敲）<br>
C: Sorry，你能再重复一下你来法国多久了吗？我忘记了。。。<br>
Y：四年了，2011年过来读 master 的<br>
C：谢谢，你现在还是学生？<br>
Y：是的<br>
C: 你学校名字是？<br>
S: Telecom ParisTech （我又一次想出示我的合同）<br>
C: 不用了，I trust you （天哪，签证官说trust me，何等荣幸啊，当时心里就一阵激动，想着 visa 肯定没问题了）<br>
C: 毕业之后你要去哪呢？<br>
Y: 当然是回中国啦。<br>
（以下纯属和笑眯眯的签证官闲扯的问答）<br>
C：你最喜欢哪个城市？So far<br>
Y：巴黎就不错呀，浪漫啊<br>
C：是的<br>
Y：罗马也不错，很多名胜古迹<br>
C：确实，我也很喜欢罗马<br>
Y：我希望波士顿也是一个漂亮的城市<br>
C：It should be，你会喜欢上它的。。。<br>
C：OK，你的 visa 会在今天签发，一周左右你会收到你的护照<br>
Y：一周之内吗？因为我下周末要去西班牙玩，到时需要护照的<br>
C: 差不多，10天之内肯定可以拿到<br>
Y：太谢谢你了，have a nice day!</p>
<p>我和女朋友差不多是同时结束面签的，交流了一下，我们觉得应该都是顺利获签的，然后就去老佛爷逛街了。下午的时候，去<a href="https://ceac.state.gov/CEACStatTracker/Status.aspx" target="_blank" rel="noopener">大使馆系统</a>上查询状态，就发现我的已经是 Issued 的状态了，传说中的秒过!还是对博士的秒过!真是撞大运了。</p>
<p>这里有个小插曲：当我查询完我的状态以后，Y同学也要我帮她看看结果是啥，我俩都觉得应该也是 Issued 吧，没想到她的显示的是 Administrative Processing! 传说中的check!!当时女朋友整个人都不好了，抱怨着，不是说相信我么，为毛还要check我呢。。。我莫非要是我们学校第一个被check的人，呜呜呜。。。我当时安慰她说，毕竟她这是去旅游，没有个凭据啥的，你想啊，人家连你的简历啥的都木有收，这里的 Administrative processing 也就是稍微处理下你的信息而已，而不是真的check。。。第二天估计就会是Issued的状态了，人家面试官不会骗你的。事实证明，第二天下午，果真就是Issued的状态了。</p>
<h1>行程单</h1>
<p>因为女朋友去美国是办理的旅游签证，所以按照网上的攻略，最好是有一份行程单。</p>
<h1>收回护照</h1>
<p>6月30日面签之后，7月3日顺利收到带有10年签证的护照。</p>
<h1>总结</h1>
<p>这次美国签证的申请感觉真是幸运的很，对于在读博士而言，我个人感觉，我的那个VTC会议付款凭据起了很大作用，因为 consulat 拿着我那个收据记录了很多信息，也估计是因为我教过钱，所以确订我确实是去美国回来，开完会还要回来接着念书，完全没有移民的想法。</p>
<h1>参考资料</h1>
<p>此处列出当时对我有帮助的帖子，既是参考文献，也是对这些愿意花时间把自己的经历写出来的小伙伴的答谢。<br>
<a href="http://bbs.xineurope.com/thread-1986840-1-1.html" target="_blank" rel="noopener">2015年3月，在巴黎申请美国10年签证</a><br>
<a href="http://bbs.xineurope.com/thread-1962434-1-1.html" target="_blank" rel="noopener">2014年巴黎办理美国10年签证经验分享</a><br>
<a href="http://www.mafengwo.cn/i/3314229.html" target="_blank" rel="noopener">2015年申请美国签证被CHECK后通过的经验教训</a><br>
<a href="http://www.douban.com/group/topic/31575167/" target="_blank" rel="noopener">美国签证US VISA-巴黎美领馆-签证全攻略-2012.07.31-ZYY</a></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rennesong.com/2015/07/28/How-to-establish-personal-blog-with-Github-pages-and-hexo/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="rennsong">
      <meta itemprop="description" content="Personal blog site, to note technique and life related articles">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Rennesong's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2015/07/28/How-to-establish-personal-blog-with-Github-pages-and-hexo/" class="post-title-link" itemprop="url">Github Pages 和 hexo 建立个人博客教程</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2015-07-28 16:00:46" itemprop="dateCreated datePublished" datetime="2015-07-28T16:00:46+02:00">2015-07-28</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-03-25 11:27:10" itemprop="dateModified" datetime="2019-03-25T11:27:10+01:00">2019-03-25</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1>前言</h1>
<p>一直有亲自搭建一个个人博客记录下自己生活学习中点滴的想法, 但每次都以“没有时间”为托词将这个想法压了下去。久而久之这个“宏大”的想法也就被抛诸脑后了。2015年7月，学校里的老师同学差不多都去度假了。老板走之前给我留下了一堆任务，比如 NS-3 的安装使用。于是又像往常一样。在各种技术博客的帮助下，我总算是把 NS-3 调理顺了。</p>
<p>跟以前一样，我觉得这时候把这些安装配置搞得清楚，指不定过了几个月就有都忘了。一想到之前的人生就是不断地在记住遗忘之中度过，我觉得这次不可以再拖了，必须着手搞一搞自己的私人博客了，既可以锻炼自己 web 方面的技能，又可以记录下自己的学习生活。实在妙极！刚好这两周老板不在，利用这个时间给我充个电~</p>
<h1>更新 2016-10-20</h1>
<p>好久不写博客了，怎么现在重新拾起，却发现，诸如 npm, hexo 之类的命令不管用了, 我怀疑莫非是因为系统升级导致了这样的情况？但是我的 node.js 是通过 Homebrew 安装的啊，npm/hexo 又是通过 node 管理的。不太理解。。。</p>
<h1>技术方案选择</h1>
<p>Google 了一下，网上推荐度最高的就是个人博客方案就是: Github pages + hexo + 多说 + 七牛 + Doddady + DNSPro了，所以其他技术方案，也有各自的亮点，但是本博客就不予考虑了。Pelican 我也考察过，但是感觉还是 hexo 更简单方便一些。</p>
<h1>环境准备</h1>
<p>本博客主要是针对 Mac 环境下的个人博客搭建，如果是Windows平台的，可以移步至 cnfeat 前辈的大作，目前知乎上推荐度最高的，个人博客搭建教程：<a href="http://cnfeat.com/2014/05/10/2014-05-11-how-to-build-a-blog/" target="_blank" rel="noopener">如何搭建一个独立博客——简明Github Pages与Hexo教程</a>。</p>
<h2 id="安装git-node-js-npm"><a class="header-anchor" href="#安装git-node-js-npm">null</a>安装git, node.js, npm</h2>
<p>网上相关的安装教程多如牛毛，我个人推荐使用Homebrew安装，具体流程参见：<br>
<a href="http://www.moncefbelyamani.com/how-to-install-xcode-homebrew-git-rvm-ruby-on-mac/" target="_blank" rel="noopener">How to Install Xcode, Homebrew, Git, RVM, Ruby &amp; Rails on Mac OS X (From Snow Leopard to Yosemite)</a><br>
<a href="http://rennesong.com/2015/07/29/How-to-install-node-js-and-npm-on-Mac/">如何在Mac Yosemite中安装node.js以及NPM</a></p>
<h2 id="安装-hexo-以及必须的-node-js-模块"><a class="header-anchor" href="#安装-hexo-以及必须的-node-js-模块">null</a>安装 hexo 以及必须的 node.js 模块</h2>
<p>首先在电脑中自己觉得合适的位置，创建一个专门用来写博客的文件夹，并且切换至这个文件夹</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir Personal_Blog &amp;&amp; cd Personal_Blog</span><br></pre></td></tr></table></figure>
<p>接着使用Node.js的包管理器npm安装hexo模板引擎，注意选项g代表了gloablly</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo -g</span><br></pre></td></tr></table></figure>
<p>待 hexo 安装完毕后，用 hexo 初始化这个文件夹(和 git 的用法很相似)</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo init</span><br></pre></td></tr></table></figure>
<p>这时候 Terminal 里会出现提示：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">INFO  Copying data to ~/Documents/Personal_Blog</span><br><span class="line">INFO  You are almost done! Don't forget to run 'npm install' before you start blogging with Hexo!</span><br></pre></td></tr></table></figure>
<p>而且，这个文件夹会多出一些文件(一开始是空的)：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">total 24</span><br><span class="line">drwxr-xr-x   8 qsong  staff   272B Jul 30 14:30 .</span><br><span class="line">drwx------+ 36 qsong  staff   1.2K Jul 30 14:30 ..</span><br><span class="line">-rw-r--r--   1 qsong  staff    65B Jul 30 14:30 .gitignore</span><br><span class="line">-rw-r--r--   1 qsong  staff   1.4K Jul 30 14:30 _config.yml</span><br><span class="line">-rw-r--r--   1 qsong  staff   442B Jul 30 14:30 package.json</span><br><span class="line">drwxr-xr-x   5 qsong  staff   170B Jul 30 14:30 scaffolds</span><br><span class="line">drwxr-xr-x   3 qsong  staff   102B Jul 30 14:30 source</span><br><span class="line">drwxr-xr-x   3 qsong  staff   102B Jul 30 14:30 themes</span><br></pre></td></tr></table></figure>
<p>根据系统的提示，我们需要安装node.js需要的模块，只需要执行：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install</span><br></pre></td></tr></table></figure>
<p>为了让hexo把网站代码推送到githubs上，我们还需要下面这个module</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>
<p>至此，我们可以说个人博客就这么搭建好了，简单吧。</p>
<h2 id="hexo-配置文件"><a class="header-anchor" href="#hexo-配置文件">null</a>hexo 配置文件</h2>
<p>网站搭建完成后，就可以根据自己爱好来对 Hexo 生成的网站进行设置了，对整站的设置，只要修改项目目录的 _config.yml 就可以了，这是我的设置，可供参考。<br>
另外需要特别指出的是，如果需要将 github pages 的原始域名 (e.g., <a href="http://hansomesong.github.io" target="_blank" rel="noopener">hansomesong.github.io</a>) 变成自己购买的个性化域名 (<a href="http://rennesong.com">rennesong.com</a>), 需要在 source 文件夹下，创建一个名为 CNAME 的文件，这个文件只有一行，记录自己的个性化域名，比如我的域名就是 <a href="http://rennesong.com">rennesong.com</a></p>
<h1>社会化评论支持</h1>
<p>Hexo默认支持的第三方社会化评论插件是Disqus, 国内多使用<strong><em>多说</em></strong>。鉴于本博客由汉语书写，主要针对中国同胞了，所以决定采用多说。具体安装过程参见zipperary大作<a href="http://zipperary.com/2013/05/30/hexo-guide-4/" target="_blank" rel="noopener">hexo系列教程:(四) hexo博客的优化技巧</a>。其实很简单，概括起来就是：第一要去多说网站上注册一个账户，创建一个域名。第二就是把相应的Javascript代码粘贴到自己使用模板的相应文件里(具体代码文件因模板而异)。比如 zipperary 上面的帖子就只是针对他使用的主题 light 的，但是他依然给出了含有Hexo默认主题的相关 Javascript 的代码的帖子。</p>
<h1>生成站点地图</h1>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-sitemap --save</span><br></pre></td></tr></table></figure>
<p>然后编辑 _config.xml 文件(注意不是 theme 的 _config.xml 文件)</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">plugins:</span><br><span class="line">- hexo-generator-sitemap</span><br><span class="line">sitemap:</span><br><span class="line">	path: sitemap.xml</span><br></pre></td></tr></table></figure>
<p>注意 YAML 格式的配置文件要求冒号之后面<strong><em>有一个空格</em></strong>。我曾经因为在编辑 deploy 的配置的时候，冒号之后少加了空格，而导致无法将本地生成的静态文件上传到 github.</p>
<h1>Hexo 推荐主题</h1>
<p>The highly recommanded theme, in my opinon, is: <a href="https://github.com/theme-next" target="_blank" rel="noopener">NexT</a>, thanks to its detailed documentation and well orginzed code repositories</p>
<p>To use Next theme, please change to direcotry “themes” of your website and issue the following command:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/theme-next/hexo-theme-next.git next</span><br></pre></td></tr></table></figure>
<p>Modify the your site _config.ymal to specify the applied theme.</p>
<h1>Hexo 常见命令</h1>
<p>这里有必要提下 Hexo 常用的几个命令：<br>
hexo clean: 删除本地生成的 public 文件夹<br>
hexo generate (hexo g) 生成静态文件，会在当前目录下生成一个新的叫做 public 的文件夹<br>
hexo server (hexo s) 启动本地web服务，用于博客的预览<br>
hexo deploy (hexo d) 部署播客到远端（比如 github, heroku 等平台）</p>
<h1>Hexo 升级之后的坑</h1>
<p>At the time of this writing，Hexo was still at version of 2.X. 目前 Hexo 已经从 2.x 系列升级为 3.x 系列。导致一了一些模板以及插件不能正常使用的情况。比如我在执行 hexo g 的时候，报错如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Template render error: (unknown path) [Line 7, Column 23]</span><br><span class="line">  Error: Unable to call `the return value of (posts[&quot;first&quot;])[&quot;updated&quot;][&quot;toISOString&quot;]`, which is undefined or falsey</span><br></pre></td></tr></table></figure>
<p>原因就是插件 hexo-generate-feed 还有 hexo-generate-sitemap 和 hexo3 不兼容！<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup><br>
According to <sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup>, this is due to the lack support of plugin primitive in configuration script (i.e. _config.yml)</p>
<h1>参考文献</h1>
<hr class="footnotes-sep">
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1" class="footnote-item"><p><a href="http://kuangqi.me/tricks/enable-table-of-contents-on-hexo/" target="_blank" rel="noopener">http://kuangqi.me/tricks/enable-table-of-contents-on-hexo/</a> <a href="#fnref1" class="footnote-backref">↩</a></p>
</li>
<li id="fn2" class="footnote-item"><p><a href="http://www.luckyonecn.com/blog/update-hexo-to-3-2-2/" target="_blank" rel="noopener">http://www.luckyonecn.com/blog/update-hexo-to-3-2-2/</a> <a href="#fnref2" class="footnote-backref">↩</a></p>
</li>
</ol>
</section>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">rennsong</p>
              <div class="site-description motion-element" itemprop="description">Personal blog site, to note technique and life related articles</div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">20</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">6</span>
                    <span class="site-state-item-name">标签</span>
                  
                </div>
              
            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          

          

          
          

          
            
          
          

        </div>
      </div>

      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">rennsong</span>

  

  
</div>


  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a> v7.0.1</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/src/utils.js?v=7.0.1"></script>

  <script src="/js/src/motion.js?v=7.0.1"></script>



  
  


  <script src="/js/src/schemes/muse.js?v=7.0.1"></script>




  

  


  <script src="/js/src/next-boot.js?v=7.0.1"></script>


  

  

  

  



  




  

  

  

  

  

  

  

  

  

  

  

  

  

  

</body>
</html>
