<!DOCTYPE html>












  


<html class="theme-next mist use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
























<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=7.1.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.1.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.1.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.1.0">


  <link rel="mask-icon" href="/images/logo.svg?v=7.1.0" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '7.1.0',
    sidebar: {"position":"right","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="生成树算法 介绍下，计算机科学中的经典算法。理论部分 交换机中生成树算法工作原理 概括来讲，STP的工作流程可以分为三个阶段： * Root Brideg 选举 * Root Port (for non-root bridge) 选举 * Designated Port 选举 - 【http://www.omnisecu.com/cisco-certified-network-associate-">
<meta name="keywords" content="STP">
<meta property="og:type" content="article">
<meta property="og:title" content="Ethernet 交换实验准备工作">
<meta property="og:url" content="http://rennesong.com/2016/10/22/TP-Ethernet-md/index.html">
<meta property="og:site_name" content="Rennesong&#39;s blog">
<meta property="og:description" content="生成树算法 介绍下，计算机科学中的经典算法。理论部分 交换机中生成树算法工作原理 概括来讲，STP的工作流程可以分为三个阶段： * Root Brideg 选举 * Root Port (for non-root bridge) 选举 * Designated Port 选举 - 【http://www.omnisecu.com/cisco-certified-network-associate-">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2019-03-25T10:27:10.931Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Ethernet 交换实验准备工作">
<meta name="twitter:description" content="生成树算法 介绍下，计算机科学中的经典算法。理论部分 交换机中生成树算法工作原理 概括来讲，STP的工作流程可以分为三个阶段： * Root Brideg 选举 * Root Port (for non-root bridge) 选举 * Designated Port 选举 - 【http://www.omnisecu.com/cisco-certified-network-associate-">



  <link rel="alternate" href="/atom.xml" title="Rennesong's blog" type="application/atom+xml">



  
  
  <link rel="canonical" href="http://rennesong.com/2016/10/22/TP-Ethernet-md/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>Ethernet 交换实验准备工作 | Rennesong's blog</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript><!-- hexo-inject:begin --><!-- hexo-inject:end -->

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container sidebar-position-right page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Rennesong's blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">Blog my life from now on!</p>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
    
      
    

    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>关于</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>

      
      
    </ul>
  

  
    

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rennesong.com/2016/10/22/TP-Ethernet-md/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="rennsong">
      <meta itemprop="description" content="Personal blog site, to note technique and life related articles">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Rennesong's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Ethernet 交换实验准备工作

              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2016-10-22 00:52:33" itemprop="dateCreated datePublished" datetime="2016-10-22T00:52:33+02:00">2016-10-22</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-03-25 11:27:10" itemprop="dateModified" datetime="2019-03-25T11:27:10+01:00">2019-03-25</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="生成树算法">生成树算法</h1>
<p>介绍下，计算机科学中的经典算法。理论部分</p>
<h1 id="交换机中生成树算法工作原理">交换机中生成树算法工作原理</h1>
<p>概括来讲，STP的工作流程可以分为三个阶段： * Root Brideg 选举 * Root Port (for non-root bridge) 选举 * Designated Port 选举 - 【http://www.omnisecu.com/cisco-certified-network-associate-ccna/how-spanning-tree-protocol-stp-select-designated-port.php】 - 这个帖子对Designated Port的选举给出了非常详细的解释</p>
<p>以下帖子对STP原理部分 给出了非常 【https://www.pluralsight.com/blog/software-development/spanning-tree-protocol-tutorial】</p>
<p>以后最好 保留一些 STP 的traces，用以展示STP协议发送的packet的内容，比如有没有IP层？ 无图无真相。 For the election of the Root Bridge (bridge is equivalent to Switch), the one that will be the initial point of reference, switches manipulate and analyze the Root Bridge ID and Sender Bridge ID fields. Both of these fields consist of a six byte MAC address header and a two byte Bridge Priority header. The switch with the smallest Bridge Priority is automatically elected as the Root Bridge. If Bridge Priority is the same on all switches then the switch with the smaller MAC address is elected as the Root Bridge.</p>
<p>在 交换机 默认配置下，据说只有ARP diffusion 通过，那么发出请求的机器是如何知道 对应IP地址的MAC地址的呢？</p>
<p>对这句话也不是很理解，</p>
<p>il est en full duplex, donc le protocole CSMA/CD est désactivé. 我想那是因为 full duplex 是因为 发送还有接受方，走的是不同的channel(比如不同的频率)，所以根本不需要运行 CSMA/CD 协议 il est en half duplex, donc le protocole CSMA/CD est activé. 因为采用的是半双工，所以 发送以及接受，占用的都是同样的channel. 那么当然需要一些 冲突避免机制。</p>
<p>在命令行模式下 show interfaces status 注意比较这俩命令的区别： show interfaces status show interfaces show interface 端口名字 一个是以列表形式把所有interfaces的信息汇集起来显示出来，一个是把每个interface的信息详细地显示出来， 而show interface 端口名字 则是只详细显示一个端口的信息</p>
<h1 id="tp-中遇到的问题">TP 中遇到的问题</h1>
<h2 id="路由器-and-mac">路由器 and MAC</h2>
<p>实际上，一个交换机并不一定只具有一个 MAC 地址。比如为了支持 Spanning Tree Protocol (STP)，交换机的每个接口就需要有一个专属的M AC 地址。我们以 Telecom Bretagne 实验室的配置情况为例：该实验采用的是 Cisco Catalyst 3560 交换机。该交换机配备有8个 FastEthernet端口以及1个 GigaEthernet 端口。我们可以通过如下命令查看下， 这9个端口的MAC地址： <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">Switch#show mac-address-table</span><br><span class="line">          Mac Address Table</span><br><span class="line">-------------------------------------------</span><br><span class="line"></span><br><span class="line">Vlan    Mac Address       Type        Ports</span><br><span class="line">----    -----------       --------    -----</span><br><span class="line"> All    0100.0ccc.cccc    STATIC      CPU</span><br><span class="line"> All    0100.0ccc.cccd    STATIC      CPU</span><br><span class="line"> All    0180.c200.0000    STATIC      CPU</span><br><span class="line"> All    0180.c200.0001    STATIC      CPU</span><br><span class="line"> All    0180.c200.0002    STATIC      CPU</span><br><span class="line"> All    0180.c200.0003    STATIC      CPU</span><br><span class="line"> All    0180.c200.0004    STATIC      CPU</span><br><span class="line"> All    0180.c200.0005    STATIC      CPU</span><br><span class="line"> All    0180.c200.0006    STATIC      CPU</span><br><span class="line"> All    0180.c200.0007    STATIC      CPU</span><br><span class="line"> All    0180.c200.0008    STATIC      CPU</span><br><span class="line"> All    0180.c200.0009    STATIC      CPU</span><br><span class="line"> All    0180.c200.000a    STATIC      CPU</span><br><span class="line"> All    0180.c200.000b    STATIC      CPU</span><br><span class="line"> All    0180.c200.000c    STATIC      CPU</span><br><span class="line"> All    0180.c200.000d    STATIC      CPU</span><br><span class="line"> All    0180.c200.000e    STATIC      CPU</span><br><span class="line"> All    0180.c200.000f    STATIC      CPU</span><br><span class="line"> All    0180.c200.0010    STATIC      CPU</span><br><span class="line"> All    ffff.ffff.ffff    STATIC      CPU</span><br><span class="line">   1    0008.e3ff.fc28    DYNAMIC     Gi0/1</span><br><span class="line">   1    000a.5e3f.61b0    DYNAMIC     Gi0/1</span><br><span class="line">   1    000a.f716.45f6    DYNAMIC     Gi0/1</span><br><span class="line">   1    0021.1cb9.8981    DYNAMIC     Gi0/1</span><br><span class="line">   1    0021.566a.0001    DYNAMIC     Gi0/1</span><br><span class="line">   1    0800.27c6.3745    DYNAMIC     Gi0/1</span><br><span class="line">   1    f029.2973.fd17    DYNAMIC     Gi0/1</span><br><span class="line">Total Mac Addresses for this criterion: 27</span><br></pre></td></tr></table></figure></p>
<p>STP的第一步是选择 Root Bridge, 选择标准是选择 Priority 最小的那个，如果所有的交换机的 Priority 的值都一样，那么选择 MAC 地址最小的那个。这里面，参与比较的 MAC 地址是交换机本身的 MAC 地址，而不是某个端口的 MAC 地址 （这一点，我有待确认，应该是这样的）。 所以我们可以通过命令 show spanning-tree 来查看 STP 有关的数据（其中必然其本身的 MAC 地址以及 Root Bridge MAC 地址）： <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">Switch#show spanning-tree</span><br><span class="line">VLAN0001</span><br><span class="line">  Spanning tree enabled protocol ieee</span><br><span class="line">  Root ID    Priority    32769</span><br><span class="line">             Address     0021.1cb6.9880</span><br><span class="line">             This bridge is the root</span><br><span class="line">             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec</span><br><span class="line"></span><br><span class="line">  Bridge ID  Priority    32769  (priority 32768 sys-id-ext 1)</span><br><span class="line">             Address     0021.1cb6.9880</span><br><span class="line">             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec</span><br><span class="line">             Aging Time 300</span><br><span class="line"></span><br><span class="line">Interface        Role Sts Cost      Prio.Nbr Type</span><br><span class="line">---------------- ---- --- --------- -------- --------------------------------</span><br><span class="line">Gi0/1            Desg FWD 19        128.1    Shr</span><br><span class="line">Fa0/1            Desg FWD 19        128.2    P2p</span><br><span class="line">Fa0/2            Desg FWD 19        128.3    P2p</span><br><span class="line">Fa0/4            Desg FWD 19        128.5    P2p</span><br></pre></td></tr></table></figure></p>
<p>通过 命令 show interface Fa0/1，其输出如下： <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">Switch#show interface Fa0/1</span><br><span class="line">FastEthernet0/1 is up, line protocol is up (connected)</span><br><span class="line">  Hardware is Fast Ethernet, address is 0021.1cb6.9882 (bia 0021.1cb6.9882)</span><br><span class="line">  MTU 1500 bytes, BW 100000 Kbit, DLY 100 usec,</span><br><span class="line">     reliability 255/255, txload 1/255, rxload 1/255</span><br><span class="line">  Encapsulation ARPA, loopback not set</span><br><span class="line">  Keepalive set (10 sec)</span><br><span class="line">  Full-duplex, 100Mb/s, media type is 10/100BaseTX</span><br><span class="line">  input flow-control is off, output flow-control is unsupported</span><br><span class="line">  ARP type: ARPA, ARP Timeout 04:00:00</span><br><span class="line">  Last input never, output 00:00:00, output hang never</span><br><span class="line">  Last clearing of &quot;show interface&quot; counters never</span><br><span class="line">  Input queue: 0/75/0/0 (size/max/drops/flushes); Total output drops: 0</span><br><span class="line">  Queueing strategy: fifo</span><br><span class="line">  Output queue: 0/40 (size/max)</span><br><span class="line">  5 minute input rate 0 bits/sec, 0 packets/sec</span><br><span class="line">  5 minute output rate 0 bits/sec, 0 packets/sec</span><br><span class="line">     53 packets input, 4450 bytes, 0 no buffer</span><br><span class="line">     Received 29 broadcasts (0 multicasts)</span><br><span class="line">     0 runts, 0 giants, 0 throttles</span><br><span class="line">     0 input errors, 0 CRC, 0 frame, 0 overrun, 0 ignored</span><br><span class="line">     0 watchdog, 4 multicast, 0 pause input</span><br><span class="line">     0 input packets with dribble condition detected</span><br><span class="line">     2169 packets output, 191447 bytes, 0 underruns</span><br><span class="line">     0 output errors, 0 collisions, 1 interface resets</span><br><span class="line">     0 babbles, 0 late collision, 0 deferred</span><br><span class="line">     0 lost carrier, 0 no carrier, 0 PAUSE output</span><br><span class="line">     0 output buffer failures, 0 output buffers swapped out</span><br></pre></td></tr></table></figure></p>
<p>我们不妨再看一看, show interface Ga0/1 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">Switch#show interface GigabitEthernet0/1</span><br><span class="line">GigabitEthernet0/1 is up, line protocol is up (connected)</span><br><span class="line">  Hardware is Gigabit Ethernet, address is 0021.1cb6.9881 (bia 0021.1cb6.9881)</span><br><span class="line">  MTU 1500 bytes, BW 100000 Kbit, DLY 100 usec,</span><br><span class="line">     reliability 255/255, txload 1/255, rxload 1/255</span><br><span class="line">  Encapsulation ARPA, loopback not set</span><br><span class="line">  Keepalive not set</span><br><span class="line">  Half-duplex, 100Mb/s, link type is auto, media type is 10/100/1000BaseTX</span><br><span class="line">  input flow-control is off, output flow-control is unsupported</span><br><span class="line">  ARP type: ARPA, ARP Timeout 04:00:00</span><br><span class="line">  Last input 00:00:20, output 00:00:01, output hang never</span><br><span class="line">  Last clearing of &quot;show interface&quot; counters never</span><br><span class="line">  Input queue: 0/75/0/0 (size/max/drops/flushes); Total output drops: 0</span><br><span class="line">  Queueing strategy: fifo</span><br><span class="line">  Output queue: 0/40 (size/max)</span><br><span class="line">  5 minute input rate 0 bits/sec, 0 packets/sec</span><br><span class="line">  5 minute output rate 0 bits/sec, 0 packets/sec</span><br><span class="line">     1057 packets input, 155540 bytes, 0 no buffer</span><br><span class="line">     Received 508 broadcasts (0 multicasts)</span><br><span class="line">     0 runts, 0 giants, 0 throttles</span><br><span class="line">     0 input errors, 0 CRC, 0 frame, 0 overrun, 0 ignored</span><br><span class="line">     0 watchdog, 481 multicast, 0 pause input</span><br><span class="line">     0 input packets with dribble condition detected</span><br><span class="line">     1652 packets output, 128172 bytes, 0 underruns</span><br><span class="line">     0 output errors, 0 collisions, 1 interface resets</span><br><span class="line">     0 babbles, 0 late collision, 0 deferred</span><br><span class="line">     0 lost carrier, 0 no carrier, 0 PAUSE output</span><br><span class="line">     0 output buffer failures, 0 output buffers swapped out</span><br></pre></td></tr></table></figure></p>
<p>其实，命令 show version 返回的信息之中，也是包含有 switch 的 MAC 地址的，比如如下输出：</p>
<p>（需要补充。。。）</p>
<p>在配置模式下, 输入如下命令： <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">conf t</span><br><span class="line">monitor session 1 source plan 1</span><br><span class="line">monitor session 1 destination interface Fa0/3</span><br><span class="line">exit</span><br></pre></td></tr></table></figure></p>
<p>在命令行模式下，继续输入：write</p>
<p>为了完成本次TP，还需要熟悉工具 Iperf 的用法</p>
<h2 id="stp-收敛问题">STP 收敛问题</h2>
<p>虽然采用 STP 可以有效避免 交换机环路问题，但是 STP 协议的收敛时间 通常为 40-50 秒。这 STP 收敛时间期间， 所有的交换机是无法进行数据转发的，对于大型网络来说，也许拓扑结构的改变是时有发生的（比如插拔网线），如果每次STP都需要40-50秒的时间来处理这种改变，那么带来的延时对用户来说是无法忍受的。所以，在什么网络中，什么情况下使用 STP 需要慎重考虑。</p>
<h2 id="关于如何删除更改-vlan">关于如何删除/更改 VLAN</h2>
<p>有些学生在 TP 开始的时候，忘记了初始化switch，尤其在制造 Loopback 观察 STP如何关闭port的时候。有可能会因为因为不同的端口位于不同的VLAN上导致看不到预想的情况。这种情况下，我们需要知道，如何在 switch 更改/删除 VLAN。 以下命令，可以更改VLAN <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">interface range gigabitEThernet 1/0/3-6</span><br><span class="line">switchport access vlan 1</span><br><span class="line">exit</span><br></pre></td></tr></table></figure></p>
<p>以下命令，可以删除VLAN <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">no vlan 192</span><br></pre></td></tr></table></figure></p>

      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/STP/" rel="tag"># STP</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2015/08/19/LTE-Basics/" rel="next" title="LTE-Basics">
                <i class="fa fa-chevron-left"></i> LTE-Basics
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/10/22/TP-IPv6/" rel="prev" title="IPv6 实验课准备以及遇到的问题">
                IPv6 实验课准备以及遇到的问题 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">rennsong</p>
              <div class="site-description motion-element" itemprop="description">Personal blog site, to note technique and life related articles</div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">34</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                      <a href="/categories/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">14</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">19</span>
                    <span class="site-state-item-name">标签</span>
                  
                </div>
              
            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/hansomesong" title="GitHub &rarr; https://github.com/hansomesong" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
            </div>
          

          

          
          

          
            
          
          

        </div>
      </div>

      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#生成树算法"><span class="nav-number">1.</span> <span class="nav-text">生成树算法</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#交换机中生成树算法工作原理"><span class="nav-number">2.</span> <span class="nav-text">交换机中生成树算法工作原理</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#tp-中遇到的问题"><span class="nav-number">3.</span> <span class="nav-text">TP 中遇到的问题</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#路由器-and-mac"><span class="nav-number">3.1.</span> <span class="nav-text">路由器 and MAC</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#stp-收敛问题"><span class="nav-number">3.2.</span> <span class="nav-text">STP 收敛问题</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#关于如何删除更改-vlan"><span class="nav-number">3.3.</span> <span class="nav-text">关于如何删除/更改 VLAN</span></a></li></ol></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">rennsong</span>

  

  
</div>


  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a> v7.1.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/utils.js?v=7.1.0"></script>

  <script src="/js/motion.js?v=7.1.0"></script>



  
  


  <script src="/js/schemes/muse.js?v=7.1.0"></script>




  
  <script src="/js/scrollspy.js?v=7.1.0"></script>
<script src="/js/post-details.js?v=7.1.0"></script>



  


  <script src="/js/next-boot.js?v=7.1.0"></script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({"tex2jax":{"inlineMath":[["$","$"],["\\(","\\)"]],"skipTags":["script","noscript","style","textarea","pre","code"],"processEscapes":true},"TeX":{"equationNumbers":{"autoNumber":"AMS"}}});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->


  

  

  

  


  


  




  

  

  
  

  
  

  


  

  

  

  

  

  

  

  

  

  

  

</body>
</html>
